import{g as D,p as n,q as g,r as p,s as h}from"./chunk-NUYRC2UF.js";import{T as l,X as v,a as b,b as f,g as u,w as m,x as P}from"./chunk-EQSQR36W.js";var y=class z{constructor(t){this.app=t;this.db=h(this.app)}db;getPizzasFromDb(){let t=n(this.db,"pizzas");return new u(r=>{let c=p(t,o=>{let s=[];o.forEach(e=>{let a=e.val();s.push(f(b({id:e.key||""},a),{tipo:"pizza"}))}),r.next(s)},o=>{r.error(o)});return()=>c()})}getBebidasFromDb(){let t=n(this.db,"bebidas");return new u(r=>{let c=p(t,o=>{let s=[];o.forEach(e=>{let a=e.val();s.push(b({id:e.key||""},a))}),r.next(s)},o=>{r.error(o)});return()=>c()})}getProducts(){return P([this.getPizzasFromDb(),this.getBebidasFromDb()]).pipe(m(([t,r])=>[...t,...r]))}getProductById(t){let r=n(this.db,`pizzas/${t}`),c=n(this.db,`bebidas/${t}`),o=new u(e=>{let a=p(r,i=>{let d=i.val();d?e.next(f(b({},d),{id:i.key||"",tipo:"pizza"})):e.next(void 0)},i=>{e.error(i)});return()=>a()}),s=new u(e=>{let a=p(c,i=>{let d=i.val();d?e.next(f(b({},d),{id:i.key||""})):e.next(void 0)},i=>{e.error(i)});return()=>a()});return P([o,s]).pipe(m(([e,a])=>e||a),m(e=>(e===void 0?console.log(`Producto con ID ${t} no encontrado en pizzas ni bebidas.`):console.log(`Producto con ID ${t} encontrado:`,e),e)))}addReserva(t){let r=n(this.db,"reservas");return Promise.resolve(g(r,t))}static \u0275fac=function(r){return new(r||z)(v(D))};static \u0275prov=l({token:z,factory:z.\u0275fac,providedIn:"root"})};export{y as a};
