var RM=Object.defineProperty,NM=Object.defineProperties;var xM=Object.getOwnPropertyDescriptors;var RE=Object.getOwnPropertySymbols,PM=Object.getPrototypeOf,OM=Object.prototype.hasOwnProperty,kM=Object.prototype.propertyIsEnumerable,FM=Reflect.get;var NE=(t,e,n)=>e in t?RM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})OM.call(e,n)&&NE(t,n,e[n]);if(RE)for(var n of RE(e))kM.call(e,n)&&NE(t,n,e[n]);return t},P=(t,e)=>NM(t,xM(e));var oi=(t,e,n)=>FM(PM(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var Ph;function _l(){return Ph}function vn(t){let e=Ph;return Ph=t,e}var xE=Symbol("NotFound");function uo(t){return t===xE||t?.name==="\u0275NotFound"}function bl(t,e){return Object.is(t,e)}var Qe=null,El=!1,Oh=1,LM=null,Ze=Symbol("SIGNAL");function L(t){let e=Qe;return Qe=t,e}function Dl(){return Qe}var si={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fo(t){if(El)throw new Error("");if(Qe===null)return;Qe.consumerOnSignalRead(t);let e=Qe.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Qe.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Qe.producers,n!==void 0&&n.producer===t)){Qe.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Qe&&(!r||UM(i,Qe)))return;let o=po(Qe),s={producer:t,consumer:Qe,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Qe.producersTail=s,e!==void 0?e.nextProducer=s:Qe.producers=s,o&&OE(t,s)}function PE(){Oh++}function Tl(t){if(!(po(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Oh)){if(!t.producerMustRecompute(t)&&!qs(t)){wl(t);return}t.producerRecomputeValue(t),wl(t)}}function kh(t){if(t.consumers===void 0)return;let e=El;El=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||VM(r)}}finally{El=e}}function Fh(){return Qe?.consumerAllowSignalWrites!==!1}function VM(t){t.dirty=!0,kh(t),t.consumerMarkedDirty?.(t)}function wl(t){t.dirty=!1,t.lastCleanEpoch=Oh}function ai(t){return t&&(t.producersTail=void 0,t.recomputing=!0),L(t)}function ho(t,e){if(L(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(po(t))do r=Lh(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function qs(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Tl(n),r!==n.version))return!0}return!1}function Sl(t){if(po(t)){let e=t.producers;for(;e!==void 0;)e=Lh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function OE(t,e){let n=t.consumersTail,r=po(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)OE(i.producer,i)}function Lh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!po(e)){let o=e.producers;for(;o!==void 0;)o=Lh(o)}return n}function po(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Al(t){LM?.(t)}function UM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ml(t,e){let n=Object.create(jM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Tl(n),fo(n),n.value===Gs)throw n.error;return n.value};return r[Ze]=n,Al(n),r}var Cl=Symbol("UNSET"),Il=Symbol("COMPUTING"),Gs=Symbol("ERRORED"),jM=P(_({},si),{value:Cl,dirty:!0,error:null,equal:bl,kind:"computed",producerMustRecompute(t){return t.value===Cl||t.value===Il},producerRecomputeValue(t){if(t.value===Il)throw new Error("");let e=t.value;t.value=Il;let n=ai(t),r,i=!1;try{r=t.computation(),L(null),i=e!==Cl&&e!==Gs&&r!==Gs&&t.equal(e,r)}catch(o){r=Gs,t.error=o}finally{ho(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function BM(){throw new Error}var kE=BM;function FE(t){kE(t)}function Vh(t){kE=t}var $M=null;function Uh(t,e){let n=Object.create(Rl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>LE(n);return r[Ze]=n,Al(n),[r,s=>go(n,s),s=>jh(n,s)]}function LE(t){return fo(t),t.value}function go(t,e){Fh()||FE(t),t.equal(t.value,e)||(t.value=e,HM(t))}function jh(t,e){Fh()||FE(t),go(t,e(t.value))}var Rl=P(_({},si),{equal:bl,value:void 0,kind:"signal"});function HM(t){t.version++,PE(),kh(t),$M?.(t)}function V(t){return typeof t=="function"}function mo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Nl=mo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ci(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(V(r))try{r()}catch(o){e=o instanceof Nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VE(o)}catch(s){e=e??[],s instanceof Nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Nl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)VE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ci(n,e)}remove(e){let{_finalizers:n}=this;n&&ci(n,e),e instanceof t&&e._removeParent(this)}};ve.EMPTY=(()=>{let t=new ve;return t.closed=!0,t})();var Bh=ve.EMPTY;function xl(t){return t instanceof ve||t&&"closed"in t&&V(t.remove)&&V(t.add)&&V(t.unsubscribe)}function VE(t){V(t)?t():t.unsubscribe()}var Kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vo={setTimeout(t,e,...n){let{delegate:r}=vo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Pl(t){vo.setTimeout(()=>{let{onUnhandledError:e}=Kt;if(e)e(t);else throw t})}function Ys(){}var UE=$h("C",void 0,void 0);function jE(t){return $h("E",void 0,t)}function BE(t){return $h("N",t,void 0)}function $h(t,e,n){return{kind:t,value:e,error:n}}var li=null;function yo(t){if(Kt.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=li;if(li=null,n)throw r}}else t()}function $E(t){Kt.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=t)}var ui=class extends ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xl(e)&&e.add(this)):this.destination=GM}static create(e,n,r){return new _o(e,n,r)}next(e){this.isStopped?zh(BE(e),this):this._next(e)}error(e){this.isStopped?zh(jE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zh(UE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zM=Function.prototype.bind;function Hh(t,e){return zM.call(t,e)}var Wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ol(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ol(r)}else Ol(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ol(n)}}},_o=class extends ui{constructor(e,n,r){super();let i;if(V(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Kt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hh(e.next,o),error:e.error&&Hh(e.error,o),complete:e.complete&&Hh(e.complete,o)}):i=e}this.destination=new Wh(i)}};function Ol(t){Kt.useDeprecatedSynchronousErrorHandling?$E(t):Pl(t)}function WM(t){throw t}function zh(t,e){let{onStoppedNotification:n}=Kt;n&&vo.setTimeout(()=>n(t,e))}var GM={closed:!0,next:Ys,error:WM,complete:Ys};var Eo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function Gh(...t){return qh(t)}function qh(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var O=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=YM(n)?n:new _o(n,r,i);return yo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=HE(r),new r((i,o)=>{let s=new _o({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Eo](){return this}pipe(...n){return qh(n)(this)}toPromise(n){return n=HE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function HE(t){var e;return(e=t??Kt.Promise)!==null&&e!==void 0?e:Promise}function qM(t){return t&&V(t.next)&&V(t.error)&&V(t.complete)}function YM(t){return t&&t instanceof ui||qM(t)&&xl(t)}function Yh(t){return V(t?.lift)}function Q(t){return e=>{if(Yh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(t,e,n,r,i){return new Kh(t,e,n,r,i)}var Kh=class extends ui{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Co(){return Q((t,e)=>{let n=null;t._refCount++;let r=K(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Io=class extends O{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Yh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ve;let n=this.getSubject();e.add(this.source.subscribe(K(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ve.EMPTY)}return e}refCount(){return Co()(this)}};var zE=mo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zE}next(n){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bh:(this.currentObservers=null,o.push(n),new ve(()=>{this.currentObservers=null,ci(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new O;return n.source=this,n}}return t.create=(e,n)=>new kl(e,n),t})(),kl=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Bh}};var ke=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qh={now(){return(Qh.delegate||Date).now()},delegate:void 0};var Fl=class extends ve{constructor(e,n){super()}schedule(e,n=0){return this}};var Ks={setInterval(t,e,...n){let{delegate:r}=Ks;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ks;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var wo=class extends Fl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ks.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ks.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ci(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var bo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};bo.now=Qh.now;var Do=class extends bo{constructor(e,n=bo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Zh=new Do(wo);var Ll=class extends wo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Vl=class extends Do{};var Jh=new Vl(Ll);var ft=new O(t=>t.complete());function WE(t){return t&&V(t.schedule)}function GE(t){return t[t.length-1]}function Ul(t){return V(GE(t))?t.pop():void 0}function hr(t){return WE(GE(t))?t.pop():void 0}function Xh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function qE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function di(t){return this instanceof di?(this.v=t,this):new di(t)}function KE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(C){return new Promise(function(y,w){o.push([h,C,y,w])>1||c(h,C)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(C){f(o[0][3],C)}}function l(h){h.value instanceof di?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function QE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qE=="function"?qE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var jl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Bl(t){return V(t?.then)}function $l(t){return V(t[Eo])}function Hl(t){return Symbol.asyncIterator&&V(t?.[Symbol.asyncIterator])}function zl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wl=KM();function Gl(t){return V(t?.[Wl])}function ql(t){return KE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield di(n.read());if(i)return yield di(void 0);yield yield di(r)}}finally{n.releaseLock()}})}function Yl(t){return V(t?.getReader)}function Me(t){if(t instanceof O)return t;if(t!=null){if($l(t))return QM(t);if(jl(t))return ZM(t);if(Bl(t))return JM(t);if(Hl(t))return ZE(t);if(Gl(t))return XM(t);if(Yl(t))return eR(t)}throw zl(t)}function QM(t){return new O(e=>{let n=t[Eo]();if(V(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZM(t){return new O(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function JM(t){return new O(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Pl)})}function XM(t){return new O(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ZE(t){return new O(e=>{tR(t,e).catch(n=>e.error(n))})}function eR(t){return ZE(ql(t))}function tR(t,e){var n,r,i,o;return YE(this,void 0,void 0,function*(){try{for(n=QE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ht(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function pr(t,e=0){return Q((n,r)=>{n.subscribe(K(r,i=>ht(r,t,()=>r.next(i),e),()=>ht(r,t,()=>r.complete(),e),i=>ht(r,t,()=>r.error(i),e)))})}function gr(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JE(t,e){return Me(t).pipe(gr(e),pr(e))}function XE(t,e){return Me(t).pipe(gr(e),pr(e))}function eC(t,e){return new O(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function tC(t,e){return new O(n=>{let r;return ht(n,e,()=>{r=t[Wl](),ht(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}function Kl(t,e){if(!t)throw new Error("Iterable cannot be null");return new O(n=>{ht(n,e,()=>{let r=t[Symbol.asyncIterator]();ht(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function nC(t,e){return Kl(ql(t),e)}function rC(t,e){if(t!=null){if($l(t))return JE(t,e);if(jl(t))return eC(t,e);if(Bl(t))return XE(t,e);if(Hl(t))return Kl(t,e);if(Gl(t))return tC(t,e);if(Yl(t))return nC(t,e)}throw zl(t)}function pe(t,e){return e?rC(t,e):Me(t)}function A(...t){let e=hr(t);return pe(t,e)}function To(t,e){let n=V(t)?t:()=>t,r=i=>i.error(n());return new O(e?i=>e.schedule(r,0,i):r)}function ep(t){return!!t&&(t instanceof O||V(t.lift)&&V(t.subscribe))}var Wn=mo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function N(t,e){return Q((n,r)=>{let i=0;n.subscribe(K(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:nR}=Array;function rR(t,e){return nR(e)?t(...e):t(e)}function Ql(t){return N(e=>rR(t,e))}var{isArray:iR}=Array,{getPrototypeOf:oR,prototype:sR,keys:aR}=Object;function Zl(t){if(t.length===1){let e=t[0];if(iR(e))return{args:e,keys:null};if(cR(e)){let n=aR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function cR(t){return t&&typeof t=="object"&&oR(t)===sR}function Jl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function fi(...t){let e=hr(t),n=Ul(t),{args:r,keys:i}=Zl(t);if(r.length===0)return pe([],e);let o=new O(lR(r,e,i?s=>Jl(i,s):It));return n?o.pipe(Ql(n)):o}function lR(t,e,n=It){return r=>{iC(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)iC(e,()=>{let l=pe(t[c],e),u=!1;l.subscribe(K(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function iC(t,e,n){t?ht(n,t,e):e()}function oC(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=C=>l<r?g(C):c.push(C),g=C=>{o&&e.next(C),l++;let y=!1;Me(n(C,u++)).subscribe(K(e,w=>{i?.(w),o?h(w):e.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let w=c.shift();s?ht(e,s,()=>g(w)):g(w)}f()}catch(w){e.error(w)}}))};return t.subscribe(K(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Fe(t,e,n=1/0){return V(e)?Fe((r,i)=>N((o,s)=>e(r,o,i,s))(Me(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>oC(r,i,t,n)))}function sC(t=1/0){return Fe(It,t)}function aC(){return sC(1)}function So(...t){return aC()(pe(t,hr(t)))}function Qs(t){return new O(e=>{Me(t()).subscribe(e)})}function tp(...t){let e=Ul(t),{args:n,keys:r}=Zl(t),i=new O(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Me(n[u]).subscribe(K(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Jl(r,a):a),o.complete())}))}});return e?i.pipe(Ql(e)):i}function pt(t,e){return Q((n,r)=>{let i=0;n.subscribe(K(r,o=>t.call(e,o,i++)&&r.next(o)))})}function xt(t){return Q((e,n)=>{let r=null,i=!1,o;r=e.subscribe(K(n,void 0,void 0,s=>{o=Me(t(s,xt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function cC(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(K(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function mr(t,e){return V(e)?Fe(t,e,1):Fe(t,1)}function vr(t){return Q((e,n)=>{let r=!1;e.subscribe(K(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Qt(t){return t<=0?()=>ft:Q((e,n)=>{let r=0;e.subscribe(K(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Xl(t=uR){return Q((e,n)=>{let r=!1;e.subscribe(K(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function uR(){return new Wn}function yr(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Gn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):It,Qt(1),n?vr(e):Xl(()=>new Wn))}function Ao(t){return t<=0?()=>ft:Q((e,n)=>{let r=[];e.subscribe(K(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function np(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):It,Ao(1),n?vr(e):Xl(()=>new Wn))}function rp(t,e){return Q(cC(t,e,arguments.length>=2,!0))}function ip(...t){let e=hr(t);return Q((n,r)=>{(e?So(t,n,e):So(t,n)).subscribe(r)})}function ye(t,e){return Q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(K(r,c=>{i?.unsubscribe();let l=0,u=o++;Me(t(c,u)).subscribe(i=K(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function eu(t){return Q((e,n)=>{Me(t).subscribe(K(n,()=>n.complete(),Ys)),!n.closed&&e.subscribe(n)})}function je(t,e,n){let r=V(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(K(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}function lC(t){let e=L(null);try{return t()}finally{L(e)}}var ou="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",b=class extends Error{code;constructor(e,n){super(vi(e,n)),this.code=e}};function dR(t){return`NG0${Math.abs(t)}`}function vi(t,e){return`${dR(t)}${e?": "+e:""}`}var Kn=globalThis;function te(t){for(let e in t)if(t[e]===te)return e;throw Error("")}function fC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Yn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Yn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function vp(t,e){return t?e?`${t} ${e}`:t:e||""}var fR=te({__forward_ref__:te});function Qn(t){return t.__forward_ref__=Qn,t.toString=function(){return Yn(this())},t}function ze(t){return yp(t)?t():t}function yp(t){return typeof t=="function"&&t.hasOwnProperty(fR)&&t.__forward_ref__===Qn}function hC(t,e){t==null&&_p(e,t,null,"!=")}function _p(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ta(t){return hR(t,su)}function Ep(t){return ta(t)!==null}function hR(t,e){return t.hasOwnProperty(e)&&t[e]||null}function pR(t){let e=t?.[su]??null;return e||null}function sp(t){return t&&t.hasOwnProperty(nu)?t[nu]:null}var su=te({\u0275prov:te}),nu=te({\u0275inj:te}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Cp(t){return t&&!!t.\u0275providers}var Ip=te({\u0275cmp:te}),wp=te({\u0275dir:te}),bp=te({\u0275pipe:te}),Dp=te({\u0275mod:te}),Xs=te({\u0275fac:te}),yi=te({__NG_ELEMENT_ID__:te}),uC=te({__NG_ENV_ID__:te});function na(t){return typeof t=="string"?t:t==null?"":String(t)}function ru(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():na(t)}var Tp=te({ngErrorCode:te}),pC=te({ngErrorMessage:te}),Js=te({ngTokenPath:te});function Sp(t,e){return gC("",-200,e)}function au(t,e){throw new b(-201,!1)}function gR(t,e){t[Js]??=[];let n=t[Js],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(hC(e.provide,"Token with multi: true should have a provide property"),r=ru(e.provide)):r=ru(e),n[0]!==r&&t[Js].unshift(r)}function mR(t,e){let n=t[Js],r=t[Tp],i=t[pC]||t.message;return t.message=yR(i,r,n,e),t}function gC(t,e,n){let r=new b(e,t);return r[Tp]=e,r[pC]=t,n&&(r[Js]=n),r}function vR(t){return t[Tp]}function yR(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return vi(e,`${t}${o}${i}`)}var ap;function mC(){return ap}function tt(t){let e=ap;return ap=t,e}function Ap(t,e,n){let r=ta(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;au(t,"Injector")}var _R={},hi=_R,cp="__NG_DI_FLAG__",lp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=pi(n)||0;try{return this.injector.get(e,r&8?null:hi,r)}catch(i){if(uo(i))return i;throw i}}};function ER(t,e=0){let n=_l();if(n===void 0)throw new b(-203,!1);if(n===null)return Ap(t,void 0,e);{let r=CR(e),i=n.retrieve(t,r);if(uo(i)){if(r.optional)return null;throw i}return i}}function x(t,e=0){return(mC()||ER)(ze(t),e)}function m(t,e){return x(t,pi(e))}function pi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function CR(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function up(t){let e=[];for(let n=0;n<t.length;n++){let r=ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=IR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(x(i,o))}else e.push(x(r))}return e}function vC(t,e){return t[cp]=e,t.prototype[cp]=e,t}function IR(t){return t[cp]}function _r(t,e){let n=t.hasOwnProperty(Xs);return n?t[Xs]:null}function cu(t,e){t.forEach(n=>Array.isArray(n)?cu(n,e):e(n))}function Mp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ra(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _C(t,e,n){let r=Ro(t,e);return r>=0?t[r|1]=n:(r=~r,yC(t,r,e,n)),r}function lu(t,e){let n=Ro(t,e);if(n>=0)return t[n|1]}function Ro(t,e){return wR(t,e,1)}function wR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ir={},wt=[],wr=new D(""),Rp=new D("",-1),Np=new D(""),ea=class{get(e,n=hi){if(n===hi){let i=gC("",-201);throw i.name="\u0275NotFound",i}return n}};function xp(t){return t[Dp]||null}function br(t){return t[Ip]||null}function Pp(t){return t[wp]||null}function EC(t){return t[bp]||null}function Ot(t){return{\u0275providers:t}}function CC(...t){return{\u0275providers:Op(!0,t),\u0275fromNgModule:!0}}function Op(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return cu(e,s=>{let a=s;iu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&IC(i,o),n}function IC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];kp(i,o=>{e(o,r)})}}function iu(t,e,n,r){if(t=ze(t),!t)return!1;let i=null,o=sp(t),s=!o&&br(t);if(!o&&!s){let c=t.ngModule;if(o=sp(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)iu(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{cu(o.imports,u=>{iu(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&IC(l,e)}if(!a){let l=_r(i)||(()=>new i);e({provide:i,useFactory:l,deps:wt},i),e({provide:Np,useValue:i,multi:!0},i),e({provide:wr,useValue:()=>x(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;kp(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function kp(t,e){for(let n of t)Cp(n)&&(n=n.\u0275providers),Array.isArray(n)?kp(n,e):e(n)}var bR=te({provide:String,useValue:te});function wC(t){return t!==null&&typeof t=="object"&&bR in t}function DR(t){return!!(t&&t.useExisting)}function TR(t){return!!(t&&t.useFactory)}function gi(t){return typeof t=="function"}function bC(t){return!!t.useClass}var ia=new D(""),tu={},dC={},op;function oa(){return op===void 0&&(op=new ea),op}var _e=class{},mi=class extends _e{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,fp(e,s=>this.processProvider(s)),this.records.set(Rp,Mo(void 0,this)),i.has("environment")&&this.records.set(_e,Mo(void 0,this));let o=this.records.get(ia);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Np,wt,{self:!0}))}retrieve(e,n){let r=pi(n)||0;try{return this.get(e,hi,r)}catch(i){if(uo(i))return i;throw i}}destroy(){Zs(this),this._destroyed=!0;let e=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(e)}}onDestroy(e){return Zs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Zs(this);let n=vn(this),r=tt(void 0),i;try{return e()}finally{vn(n),tt(r)}}get(e,n=hi,r){if(Zs(this),e.hasOwnProperty(uC))return e[uC](this);let i=pi(r),o,s=vn(this),a=tt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=NR(e)&&ta(e);u&&this.injectableDefInScope(u)?l=Mo(dp(e),tu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?oa():this.parent;return n=i&8&&n===hi?null:n,c.get(e,n)}catch(c){let l=vR(c);throw l===-200||l===-201?new b(l,null):c}finally{tt(a),vn(s)}}resolveInjectorInitializers(){let e=L(null),n=vn(this),r=tt(void 0),i;try{let o=this.get(wr,wt,{self:!0});for(let s of o)s()}finally{vn(n),tt(r),L(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Yn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ze(e);let n=gi(e)?e:ze(e&&e.provide),r=AR(e);if(!gi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mo(void 0,tu,!0),i.factory=()=>up(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=L(null);try{if(n.value===dC)throw Sp(Yn(e));return n.value===tu&&(n.value=dC,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&RR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dp(t){let e=ta(t),n=e!==null?e.factory:_r(t);if(n!==null)return n;if(t instanceof D)throw new b(204,!1);if(t instanceof Function)return SR(t);throw new b(204,!1)}function SR(t){if(t.length>0)throw new b(204,!1);let n=pR(t);return n!==null?()=>n.factory(t):()=>new t}function AR(t){if(wC(t))return Mo(void 0,t.useValue);{let e=Fp(t);return Mo(e,tu)}}function Fp(t,e,n){let r;if(gi(t)){let i=ze(t);return _r(i)||dp(i)}else if(wC(t))r=()=>ze(t.useValue);else if(TR(t))r=()=>t.useFactory(...up(t.deps||[]));else if(DR(t))r=(i,o)=>x(ze(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ze(t&&(t.useClass||t.provide));if(MR(t))r=()=>new i(...up(t.deps));else return _r(i)||dp(i)}return r}function Zs(t){if(t.destroyed)throw new b(205,!1)}function Mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function MR(t){return!!t.deps}function RR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NR(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function fp(t,e){for(let n of t)Array.isArray(n)?fp(n,e):n&&Cp(n)?fp(n.\u0275providers,e):e(n)}function we(t,e){let n;t instanceof mi?(Zs(t),n=t):n=new lp(t);let r,i=vn(n),o=tt(void 0);try{return e()}finally{vn(i),tt(o)}}function DC(){return mC()!==void 0||_l()!=null}var Zt=0,F=1,U=2,Be=3,kt=4,Ft=5,No=6,xo=7,be=8,_i=9,_n=10,ge=11,Po=12,Lp=13,Ei=14,bt=15,Ci=16,Ii=17,wi=18,sa=19,Vp=20,qn=21,uu=22,aa=23,Dt=24,du=25,De=26,TC=1,Up=6,Dr=7,ca=8,la=9,We=10;function En(t){return Array.isArray(t)&&typeof t[TC]=="object"}function Jt(t){return Array.isArray(t)&&t[TC]===!0}function jp(t){return(t.flags&4)!==0}function Tr(t){return t.componentOffset>-1}function ua(t){return(t.flags&1)===1}function Cn(t){return!!t.template}function Oo(t){return(t[U]&512)!==0}function bi(t){return(t[U]&256)===256}var SC="svg",AC="math";function Lt(t){for(;Array.isArray(t);)t=t[Zt];return t}function Bp(t,e){return Lt(e[t])}function Xt(t,e){return Lt(e[t.index])}function da(t,e){return t.data[e]}function fu(t,e){return t[e]}function $p(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Vt(t,e){let n=e[t];return En(n)?n:n[Zt]}function hu(t){return(t[U]&128)===128}function MC(t){return Jt(t[Be])}function In(t,e){return e==null?null:t[e]}function Hp(t){t[Ii]=0}function zp(t){t[U]&1024||(t[U]|=1024,hu(t)&&ha(t))}function RC(t,e){for(;t>0;)e=e[Ei],t--;return e}function fa(t){return!!(t[U]&9216||t[Dt]?.dirty)}function pu(t){t[_n].changeDetectionScheduler?.notify(8),t[U]&64&&(t[U]|=1024),fa(t)&&ha(t)}function ha(t){t[_n].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!hu(e)));)e=Er(e)}function Wp(t,e){if(bi(t))throw new b(911,!1);t[qn]===null&&(t[qn]=[]),t[qn].push(e)}function NC(t,e){if(t[qn]===null)return;let n=t[qn].indexOf(e);n!==-1&&t[qn].splice(n,1)}function Er(t){let e=t[Be];return Jt(e)?e[Be]:e}function xC(t){return t[xo]??=[]}function PC(t){return t.cleanup??=[]}var q={lFrame:KC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},pa=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(pa||{}),xR=0,hp=!1;function OC(){return q.lFrame.elementDepthCount}function kC(){q.lFrame.elementDepthCount++}function FC(){q.lFrame.elementDepthCount--}function Gp(){return q.bindingsEnabled}function LC(){return q.skipHydrationRootTNode!==null}function VC(t){return q.skipHydrationRootTNode===t}function UC(){q.skipHydrationRootTNode=null}function z(){return q.lFrame.lView}function Ge(){return q.lFrame.tView}function ue(t){return q.lFrame.contextLView=t,t[be]}function de(t){return q.lFrame.contextLView=null,t}function nt(){let t=qp();for(;t!==null&&t.type===64;)t=t.parent;return t}function qp(){return q.lFrame.currentTNode}function jC(){let t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ko(t,e){let n=q.lFrame;n.currentTNode=t,n.isParent=e}function Yp(){return q.lFrame.isParent}function BC(){q.lFrame.isParent=!1}function Kp(t){_p("Must never be called in production mode"),xR=t}function Qp(){return hp}function Zp(t){let e=hp;return hp=t,e}function ga(){let t=q.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $C(t){return q.lFrame.bindingIndex=t}function Di(){return q.lFrame.bindingIndex++}function HC(t){let e=q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function zC(){return q.lFrame.inI18n}function WC(t,e){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,gu(e)}function GC(){return q.lFrame.currentDirectiveIndex}function gu(t){q.lFrame.currentDirectiveIndex=t}function qC(t){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jp(t){q.lFrame.currentQueryIndex=t}function PR(t){let e=t[F];return e.type===2?e.declTNode:e.type===1?t[Ft]:null}function Xp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=PR(o),i===null||(o=o[Ei],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=q.lFrame=YC();return r.currentTNode=e,r.lView=t,!0}function mu(t){let e=YC(),n=t[F];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function YC(){let t=q.lFrame,e=t===null?null:t.child;return e===null?KC(t):e}function KC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function QC(){let t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eg=QC;function vu(){let t=QC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ZC(t){return(q.lFrame.contextLView=RC(t,q.lFrame.contextLView))[be]}function Sr(){return q.lFrame.selectedIndex}function Ar(t){q.lFrame.selectedIndex=t}function yu(){let t=q.lFrame;return da(t.tView,t.selectedIndex)}function JC(){return q.lFrame.currentNamespace}var XC=!0;function _u(){return XC}function Eu(t){XC=t}function pp(t,e=null,n=null,r){let i=tg(t,e,n,r);return i.resolveInjectorInitializers(),i}function tg(t,e=null,n=null,r,i=new Set){let o=[n||wt,CC(t)];return r=r||(typeof t=="object"?void 0:Yn(t)),new mi(o,e||oa(),r||null,i)}var Re=class t{static THROW_IF_NOT_FOUND=hi;static NULL=new ea;static create(e,n){if(Array.isArray(e))return pp({name:""},n,e,"");{let r=e.name??"";return pp({name:r},e.parent,e.providers,r)}}static \u0275prov=S({token:t,providedIn:"any",factory:()=>x(Rp)});static __NG_ELEMENT_ID__=-1},Ne=new D(""),Zn=(()=>{class t{static __NG_ELEMENT_ID__=OR;static __NG_ENV_ID__=n=>n}return t})(),gp=class extends Zn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return bi(this._lView)}onDestroy(e){let n=this._lView;return Wp(n,e),()=>NC(n,e)}};function OR(){return new gp(z())}var yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rt=new D("",{providedIn:"root",factory:()=>{let t=m(_e),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(yn),e.handleError(n))}}}),eI={provide:wr,useValue:()=>void m(yn),multi:!0};function ng(t){return typeof t=="function"&&t[Ze]!==void 0}function wn(t,e){let[n,r,i]=Uh(t,e?.equal),o=n,s=o[Ze];return o.set=r,o.update=i,o.asReadonly=tI.bind(o),o}function tI(){let t=this[Ze];if(t.readonlyFn===void 0){let e=()=>this();e[Ze]=t,t.readonlyFn=e}return t.readonlyFn}function rg(t){return ng(t)&&typeof t.set=="function"}var Cr=class{},Cu=new D("",{providedIn:"root",factory:()=>!1});var ig=new D(""),og=new D("");var bn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ke(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new O(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=S({token:t,providedIn:"root",factory:()=>new t})}return t})(),Jn=(()=>{class t{internalPendingTasks=m(bn);scheduler=m(Cr);errorHandler=m(rt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=S({token:t,providedIn:"root",factory:()=>new t})}return t})();function ma(...t){}var sg=(()=>{class t{static \u0275prov=S({token:t,providedIn:"root",factory:()=>new mp})}return t})(),mp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Bo(t){return{toString:t}.toString()}var Iu="__parameters__";function HR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function zR(t,e,n){return Bo(()=>{let r=HR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Iu)?c[Iu]:Object.defineProperty(c,Iu,{value:[]})[Iu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Tt=vC(zR("Optional"),8);function WR(t){return typeof t=="function"}var Au=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function PI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var er=(()=>{let t=()=>OI;return t.ngInherit=!0,t})();function OI(t){return t.type.prototype.ngOnChanges&&(t.setInput=qR),GR}function GR(){let t=FI(this),e=t?.current;if(e){let n=t.previous;if(n===Ir)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qR(t,e,n,r,i){let o=this.declaredInputs[r],s=FI(t)||YR(t,{previous:Ir,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Au(l&&l.currentValue,n,c===Ir),PI(t,e,i,n)}var kI="__ngSimpleChanges__";function FI(t){return t[kI]||null}function YR(t,e){return t[kI]=e}var nI=[];var se=function(t,e=null,n){for(let r=0;r<nI.length;r++){let i=nI[r];i(t,e,n)}};function KR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=OI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function LI(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Du(t,e,n){VI(t,e,3,n)}function Tu(t,e,n,r){(t[U]&3)===n&&VI(t,e,n,r)}function ag(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function VI(t,e,n,r){let i=r!==void 0?t[Ii]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ii]+=65536),(a<o||o==-1)&&(QR(t,n,e,c),t[Ii]=(t[Ii]&4294901760)+c+2),c++}function rI(t,e){se(4,t,e);let n=L(null);try{e.call(t)}finally{L(n),se(5,t,e)}}function QR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[U]>>14<t[Ii]>>16&&(t[U]&3)===e&&(t[U]+=16384,rI(a,o)):rI(a,o)}var Lo=-1,Ai=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function ZR(t){return(t.flags&8)!==0}function JR(t){return(t.flags&16)!==0}function XR(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];eN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function UI(t){return t===3||t===4||t===6}function eN(t){return t.charCodeAt(0)===64}function Ea(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?iI(t,n,i,null,e[++r]):iI(t,n,i,null,null))}}return t}function iI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function jI(t){return t!==Lo}function Mu(t){return t&32767}function tN(t){return t>>16}function Ru(t,e){let n=tN(t),r=e;for(;n>0;)r=r[Ei],n--;return r}var yg=!0;function Nu(t){let e=yg;return yg=t,e}var nN=256,BI=nN-1,$I=5,rN=0,Dn={};function iN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yi)&&(r=n[yi]),r==null&&(r=n[yi]=rN++);let i=r&BI,o=1<<i;e.data[t+(i>>$I)]|=o}function xu(t,e){let n=HI(t,e);if(n!==-1)return n;let r=e[F];r.firstCreatePass&&(t.injectorIndex=e.length,cg(r.data,t),cg(e,null),cg(r.blueprint,null));let i=zg(t,e),o=t.injectorIndex;if(jI(i)){let s=Mu(i),a=Ru(i,e),c=a[F].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function cg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function HI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=YI(i),r===null)return Lo;if(n++,i=i[Ei],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Lo}function _g(t,e,n){iN(t,e,n)}function oN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(UI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function zI(t,e,n){if(n&8||t!==void 0)return t;au(e,"NodeInjector")}function WI(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[_i],o=tt(void 0);try{return i?i.get(e,r,n&8):Ap(e,r,n&8)}finally{tt(o)}}return zI(r,e,n)}function GI(t,e,n,r=0,i){if(t!==null){if(e[U]&2048&&!(r&2)){let s=uN(t,e,n,r,Dn);if(s!==Dn)return s}let o=qI(t,e,n,r,Dn);if(o!==Dn)return o}return WI(e,n,r,i)}function qI(t,e,n,r,i){let o=cN(n);if(typeof o=="function"){if(!Xp(e,t,r))return r&1?zI(i,n,r):WI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))au(n);else return s}finally{eg()}}else if(typeof o=="number"){let s=null,a=HI(t,e),c=Lo,l=r&1?e[bt][Ft]:null;for((a===-1||r&4)&&(c=a===-1?zg(t,e):e[a+8],c===Lo||!sI(r,!1)?a=-1:(s=e[F],a=Mu(c),e=Ru(c,e)));a!==-1;){let u=e[F];if(oI(o,a,u.data)){let d=sN(a,e,n,s,r,l);if(d!==Dn)return d}c=e[a+8],c!==Lo&&sI(r,e[F].data[a+8]===l)&&oI(o,a,e)?(s=u,a=Mu(c),e=Ru(c,e)):a=-1}}return i}function sN(t,e,n,r,i,o){let s=e[F],a=s.data[t+8],c=r==null?Tr(a)&&yg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=aN(a,s,n,c,l);return u!==null?Pu(e,s,u,a,i):Dn}function aN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&Cn(h)&&h.type===n)return c}return null}function Pu(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ai){let a=o;if(a.resolving){let h=ru(s[n]);throw Sp(h)}let c=Nu(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?tt(a.injectImpl):null,f=Xp(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&KR(n,s[n],e)}finally{d!==null&&tt(d),Nu(c),a.resolving=!1,eg()}}return o}function cN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yi)?t[yi]:void 0;return typeof e=="number"?e>=0?e&BI:lN:e}function oI(t,e,n){let r=1<<t;return!!(n[e+(t>>$I)]&r)}function sI(t,e){return!(t&2)&&!(t&1&&e)}var Si=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return GI(this._tNode,this._lView,e,pi(r),n)}};function lN(){return new Si(nt(),z())}function xi(t){return Bo(()=>{let e=t.prototype.constructor,n=e[Xs]||Eg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Xs]||Eg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Eg(t){return yp(t)?()=>{let e=Eg(ze(t));return e&&e()}:_r(t)}function uN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[U]&2048&&!Oo(s);){let a=qI(o,s,n,r|2,Dn);if(a!==Dn)return a;let c=o.parent;if(!c){let l=s[Vp];if(l){let u=l.get(n,Dn,r);if(u!==Dn)return u}c=YI(s),s=s[Ei]}o=c}return i}function YI(t){let e=t[F],n=e.type;return n===2?e.declTNode:n===1?t[Ft]:null}function Ta(t){return oN(nt(),t)}function dN(){return qu(nt(),z())}function qu(t,e){return new tr(Xt(t,e))}var tr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=dN}return t})();function KI(t){return(t.flags&128)===128}var Wg=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Wg||{}),QI=new Map,fN=0;function hN(){return fN++}function pN(t){QI.set(t[sa],t)}function Cg(t){QI.delete(t[sa])}var aI="__ngContext__";function Vo(t,e){En(e)?(t[aI]=e[sa],pN(e)):t[aI]=e}function ZI(t){return XI(t[Po])}function JI(t){return XI(t[kt])}function XI(t){for(;t!==null&&!Jt(t);)t=t[kt];return t}var Ig;function Gg(t){Ig=t}function ew(){if(Ig!==void 0)return Ig;if(typeof document<"u")return document;throw new b(210,!1)}var Yu=new D("",{providedIn:"root",factory:()=>gN}),gN="ng",Ku=new D(""),Rr=new D("",{providedIn:"platform",factory:()=>"unknown"});var Qu=new D("",{providedIn:"root",factory:()=>ew().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mN="h",vN="b";var tw="r";var nw="di";var rw=!1,iw=new D("",{providedIn:"root",factory:()=>rw});var yN=(t,e,n,r)=>{};function _N(t,e,n,r){yN(t,e,n,r)}function qg(t){return(t.flags&32)===32}var EN=()=>null;function ow(t,e,n=!1){return EN(t,e,n)}function sw(t,e){let n=t.contentQueries;if(n!==null){let r=L(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Jp(o),a.contentQueries(2,e[s],s)}}}finally{L(r)}}}function wg(t,e,n){Jp(0);let r=L(null);try{e(t,n)}finally{L(r)}}function aw(t,e,n){if(jp(e)){let r=L(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{L(r)}}}var Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{});var wu;function CN(){if(wu===void 0&&(wu=null,Kn.trustedTypes))try{wu=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return wu}function cI(t){return CN()?.createScriptURL(t)||t}var Ou=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ou})`}};function Sa(t){return t instanceof Ou?t.changingThisBreaksApplicationSecurity:t}function Yg(t,e){let n=cw(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ou})`)}return n===e}function cw(t){return t instanceof Ou&&t.getTypeName()||null}var IN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lw(t){return t=String(t),t.match(IN)?t:"unsafe:"+t}var Zu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zu||{});function Nr(t){let e=dw();return e?e.sanitize(Zu.URL,t)||"":Yg(t,"URL")?Sa(t):lw(na(t))}function uw(t){let e=dw();if(e)return cI(e.sanitize(Zu.RESOURCE_URL,t)||"");if(Yg(t,"ResourceURL"))return cI(Sa(t));throw new b(904,!1)}function wN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?uw:Nr}function Kg(t,e,n){return wN(e,n)(t)}function dw(){let t=z();return t&&t[_n].sanitizer}function fw(t){return t instanceof Function?t():t}function bN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var hw="ng-template";function DN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&bN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Qg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Qg(t){return t.type===4&&t.value!==hw}function TN(t,e,n){let r=t.type===4&&!n?hw:t.value;return e===r}function SN(t,e,n){let r=4,i=t.attrs,o=i!==null?RN(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!en(r)&&!en(c))return!1;if(s&&en(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!TN(t,c,n)||c===""&&e.length===1){if(en(r))return!1;s=!0}}else if(r&8){if(i===null||!DN(t,i,c,n)){if(en(r))return!1;s=!0}}else{let l=e[++a],u=AN(c,i,Qg(t),n);if(u===-1){if(en(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(en(r))return!1;s=!0}}}}return en(r)||s}function en(t){return(t&1)===0}function AN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return NN(e,t)}function MN(t,e,n=!1){for(let r=0;r<e.length;r++)if(SN(t,e[r],n))return!0;return!1}function RN(t){for(let e=0;e<t.length;e++){let n=t[e];if(UI(n))return e}return t.length}function NN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function lI(t,e){return t?":not("+e.trim()+")":e}function xN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!en(s)&&(e+=lI(o,i),i=""),r=s,o=o||!en(r);n++}return i!==""&&(e+=lI(o,i)),e}function PN(t){return t.map(xN).join(",")}function ON(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!en(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var An={};function kN(t,e){return t.createText(e)}function FN(t,e,n){t.setValue(e,n)}function pw(t,e,n){return t.createElement(e,n)}function ku(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gw(t,e,n){t.appendChild(e,n)}function uI(t,e,n,r,i){r!==null?ku(t,e,n,r,i):gw(t,e,n)}function mw(t,e,n){t.removeChild(null,e,n)}function LN(t,e,n){t.setAttribute(e,"style",n)}function VN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vw(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&XR(t,e,r),i!==null&&VN(t,e,i),o!==null&&LN(t,e,o)}function Zg(t,e,n,r,i,o,s,a,c,l,u){let d=De+r,f=d+i,h=UN(d,f),g=typeof l=="function"?l():l;return h[F]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function UN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:An);return n}function jN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Zg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Jg(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Zt]=i,d[U]=r|4|128|8|64|1024,(l!==null||t&&t[U]&2048)&&(d[U]|=2048),Hp(d),d[Be]=d[Ei]=t,d[be]=n,d[_n]=s||t&&t[_n],d[ge]=a||t&&t[ge],d[_i]=c||t&&t[_i]||null,d[Ft]=o,d[sa]=hN(),d[No]=u,d[Vp]=l,d[bt]=e.type==2?t[bt]:d,d}function BN(t,e,n){let r=Xt(e,t),i=jN(n),o=t[_n].rendererFactory,s=Xg(t,Jg(t,i,null,yw(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function yw(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function _w(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xg(t,e){return t[Po]?t[Lp][kt]=e:t[Po]=e,t[Lp]=e,e}function M(t=1){Ew(Ge(),z(),Sr()+t,!1)}function Ew(t,e,n,r){if(!r)if((e[U]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Du(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Tu(e,o,0,n)}Ar(n)}var Ju=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ju||{});function bg(t,e,n,r){let i=L(null);try{let[o,s,a]=t.inputs[n],c=null;(s&Ju.SignalBased)!==0&&(c=e[o][Ze]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):PI(e,c,o,r)}finally{L(i)}}var Tn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tn||{}),$N;function em(t,e){return $N(t,e)}function Fo(t,e,n,r,i){if(r!=null){let o,s=!1;Jt(r)?o=r:En(r)&&(s=!0,r=r[Zt]);let a=Lt(r);t===0&&n!==null?i==null?gw(e,n,a):ku(e,n,a,i||null,!0):t===1&&n!==null?ku(e,n,a,i||null,!0):t===2?mw(e,a,s):t===3&&e.destroyNode(a),o!=null&&ex(e,t,o,n,i)}}function HN(t,e){Cw(t,e),e[Zt]=null,e[Ft]=null}function zN(t,e,n,r,i,o){r[Zt]=i,r[Ft]=e,ed(t,r,n,1,i,o)}function Cw(t,e){e[_n].changeDetectionScheduler?.notify(9),ed(t,e,e[ge],2,null,null)}function WN(t){let e=t[Po];if(!e)return lg(t[F],t);for(;e;){let n=null;if(En(e))n=e[Po];else{let r=e[We];r&&(n=r)}if(!n){for(;e&&!e[kt]&&e!==t;)En(e)&&lg(e[F],e),e=e[Be];e===null&&(e=t),En(e)&&lg(e[F],e),n=e&&e[kt]}e=n}}function tm(t,e){let n=t[la],r=n.indexOf(e);n.splice(r,1)}function Xu(t,e){if(bi(e))return;let n=e[ge];n.destroyNode&&ed(t,e,n,3,null,null),WN(e)}function lg(t,e){if(bi(e))return;let n=L(null);try{e[U]&=-129,e[U]|=256,e[Dt]&&Sl(e[Dt]),qN(t,e),GN(t,e),e[F].type===1&&e[ge].destroy();let r=e[Ci];if(r!==null&&Jt(e[Be])){r!==e[Be]&&tm(r,e);let i=e[wi];i!==null&&i.detachView(t)}Cg(e)}finally{L(n)}}function GN(t,e){let n=t.cleanup,r=e[xo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[xo]=null);let i=e[qn];if(i!==null){e[qn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[aa];if(o!==null){e[aa]=null;for(let s of o)s.destroy()}}function qN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ai)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];se(4,a,c);try{c.call(a)}finally{se(5,a,c)}}else{se(4,i,o);try{o.call(i)}finally{se(5,i,o)}}}}}function YN(t,e,n){return KN(t,e.parent,n)}function KN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Zt];if(Tr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Xn.None||i===Xn.Emulated)return null}return Xt(r,n)}function QN(t,e,n){return JN(t,e,n)}function ZN(t,e,n){return t.type&40?Xt(t,n):null}var JN=ZN,dI;function nm(t,e,n,r){let i=YN(t,r,e),o=e[ge],s=r.parent||e[Ft],a=QN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)uI(o,i,n[c],a,!1);else uI(o,i,n,a,!1);dI!==void 0&&dI(o,r,e,n,i)}function va(t,e){if(e!==null){let n=e.type;if(n&3)return Xt(e,t);if(n&4)return Dg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return va(t,r);{let i=t[e.index];return Jt(i)?Dg(-1,i):Lt(i)}}else{if(n&128)return va(t,e.next);if(n&32)return em(e,t)()||Lt(t[e.index]);{let r=Iw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[bt]);return va(i,r)}else return va(t,e.next)}}}return null}function Iw(t,e){if(e!==null){let r=t[bt][Ft],i=e.projection;return r.projection[i]}return null}function Dg(t,e){let n=We+t+1;if(n<e.length){let r=e[n],i=r[F].firstChild;if(i!==null)return va(r,i)}return e[Dr]}function rm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Vo(Lt(a),r),n.flags|=2),!qg(n))if(c&8)rm(t,e,n.child,r,i,o,!1),Fo(e,t,i,a,o);else if(c&32){let l=em(n,r),u;for(;u=l();)Fo(e,t,i,u,o);Fo(e,t,i,a,o)}else c&16?XN(t,e,r,n,i,o):Fo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ed(t,e,n,r,i,o){rm(n,r,t.firstChild,e,i,o,!1)}function XN(t,e,n,r,i,o){let s=n[bt],c=s[Ft].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Fo(e,t,i,u,o)}else{let l=c,u=s[Be];KI(r)&&(l.flags|=128),rm(t,e,l,u,i,o,!0)}}function ex(t,e,n,r,i){let o=n[Dr],s=Lt(n);o!==s&&Fo(e,t,r,o,i);for(let a=We;a<n.length;a++){let c=n[a];ed(c[F],c,t,e,r,o)}}function tx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tn.Important),t.setStyle(n,r,i,o))}}function ww(t,e,n,r,i){let o=Sr(),s=r&2;try{Ar(-1),s&&e.length>De&&Ew(t,e,De,!1),se(s?2:0,i,n),n(r,i)}finally{Ar(o),se(s?3:1,i,n)}}function im(t,e,n){cx(t,e,n),(n.flags&64)===64&&lx(t,e,n)}function om(t,e,n=Xt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function nx(t,e,n,r){let o=r.get(iw,rw)||n===Xn.ShadowDom,s=t.selectRootElement(e,o);return rx(s),s}function rx(t){ix(t)}var ix=()=>null;function ox(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bw(t,e,n,r,i,o){let s=e[F];if(sm(t,s,e,n,r)){Tr(t)&&ax(e,t.index);return}t.type&3&&(n=ox(n)),sx(t,e,n,r,i,o)}function sx(t,e,n,r,i,o){if(t.type&3){let s=Xt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function ax(t,e){let n=Vt(e,t);n[U]&16||(n[U]|=64)}function cx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Tr(n)&&BN(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||xu(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Pu(e,t,s,n);if(Vo(c,e),o!==null&&hx(e,s-r,c,a,n,o),Cn(a)){let l=Vt(n.index,e);l[be]=Pu(e,t,s,n)}}}function lx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=GC();try{Ar(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];gu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ux(c,l)}}finally{Ar(-1),gu(s)}}function ux(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Dw(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];MN(e,o.selectors,!1)&&(r??=[],Cn(o)?r.unshift(o):r.push(o))}return r}function dx(t,e,n,r,i,o){let s=Xt(t,e);fx(e[ge],s,o,t.value,n,r,i)}function fx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?na(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function hx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];bg(r,n,c,l)}}function px(t,e,n,r,i){let o=De+n,s=e[F],a=i(s,e,t,r,n);e[o]=a,ko(t,!0);let c=t.type===2;return c?(vw(e[ge],a,t),(OC()===0||ua(t))&&Vo(a,e),kC()):Vo(a,e),_u()&&(!c||!qg(t))&&nm(s,e,a,t),t}function gx(t){let e=t;return Yp()?BC():(e=e.parent,ko(e,!1)),e}function mx(t,e){let n=t[_i];if(!n)return;n.get(rt,null)?.(e)}function sm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];bg(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];bg(u,l,r,i),a=!0}return a}function vx(t,e){let n=Vt(e,t),r=n[F];yx(r,n);let i=n[Zt];i!==null&&n[No]===null&&(n[No]=ow(i,n[_i])),se(18),am(r,n,n[be]),se(19,n[be])}function yx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function am(t,e,n){mu(e);try{let r=t.viewQuery;r!==null&&wg(1,r,n);let i=t.template;i!==null&&ww(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wi]?.finishViewCreation(t),t.staticContentQueries&&sw(t,e),t.staticViewQueries&&wg(2,t.viewQuery,n);let o=t.components;o!==null&&_x(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,vu()}}function _x(t,e){for(let n=0;n<e.length;n++)vx(t,e[n])}function td(t,e,n,r){let i=L(null);try{let o=e.tView,a=t[U]&4096?4096:16,c=Jg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ci]=l;let u=t[wi];return u!==null&&(c[wi]=u.createEmbeddedView(o)),am(o,c,n),c}finally{L(i)}}function Ca(t,e){return!e||e.firstChild===null||KI(t)}var fI=!1,Ex=new D("");function Ia(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Lt(o)),Jt(o)&&Tw(o,r);let s=n.type;if(s&8)Ia(t,e,n.child,r);else if(s&32){let a=em(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Iw(e,n);if(Array.isArray(a))r.push(...a);else{let c=Er(e[bt]);Ia(c[F],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Tw(t,e){for(let n=We;n<t.length;n++){let r=t[n],i=r[F].firstChild;i!==null&&Ia(r[F],r,i,e)}t[Dr]!==t[Zt]&&e.push(t[Dr])}function Sw(t){if(t[du]!==null){for(let e of t[du])e.impl.addSequence(e);t[du].length=0}}var Aw=[];function Cx(t){return t[Dt]??Ix(t)}function Ix(t){let e=Aw.pop()??Object.create(bx);return e.lView=t,e}function wx(t){t.lView[Dt]!==t&&(t.lView=null,Aw.push(t))}var bx=P(_({},si),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ha(t.lView)},consumerOnSignalRead(){this.lView[Dt]=this}});function Dx(t){let e=t[Dt]??Object.create(Tx);return e.lView=t,e}var Tx=P(_({},si),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!Mw(e[F]);)e=Er(e);e&&zp(e)},consumerOnSignalRead(){this.lView[Dt]=this}});function Mw(t){return t.type!==2}function Rw(t){if(t[aa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[aa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[U]&8192)}}var Sx=100;function cm(t,e=0){let r=t[_n].rendererFactory,i=!1;i||r.begin?.();try{Ax(t,e)}finally{i||r.end?.()}}function Ax(t,e){let n=Qp();try{Zp(!0),Tg(t,e);let r=0;for(;fa(t);){if(r===Sx)throw new b(103,!1);r++,Tg(t,1)}}finally{Zp(n)}}function Nw(t,e){Kp(e?pa.Exhaustive:pa.OnlyDirtyViews);try{cm(t)}finally{Kp(pa.Off)}}function Mx(t,e,n,r){if(bi(e))return;let i=e[U],o=!1,s=!1;mu(e);let a=!0,c=null,l=null;o||(Mw(t)?(l=Cx(e),c=ai(l)):Dl()===null?(a=!1,l=Dx(e),c=ai(l)):e[Dt]&&(Sl(e[Dt]),e[Dt]=null));try{Hp(e),$C(t.bindingStartIndex),n!==null&&ww(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Du(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Tu(e,h,0,null),ag(e,0)}if(s||Rx(e),Rw(e),xw(e,0),t.contentQueries!==null&&sw(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Du(e,h)}else{let h=t.contentHooks;h!==null&&Tu(e,h,1),ag(e,1)}xx(t,e);let d=t.components;d!==null&&Ow(e,d,0);let f=t.viewQuery;if(f!==null&&wg(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Du(e,h)}else{let h=t.viewHooks;h!==null&&Tu(e,h,2),ag(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[uu]){for(let h of e[uu])h();e[uu]=null}o||(Sw(e),e[U]&=-73)}catch(u){throw o||ha(e),u}finally{l!==null&&(ho(l,c),a&&wx(l)),vu()}}function xw(t,e){for(let n=ZI(t);n!==null;n=JI(n))for(let r=We;r<n.length;r++){let i=n[r];Pw(i,e)}}function Rx(t){for(let e=ZI(t);e!==null;e=JI(e)){if(!(e[U]&2))continue;let n=e[la];for(let r=0;r<n.length;r++){let i=n[r];zp(i)}}}function Nx(t,e,n){se(18);let r=Vt(e,t);Pw(r,n),se(19,r[be])}function Pw(t,e){hu(t)&&Tg(t,e)}function Tg(t,e){let r=t[F],i=t[U],o=t[Dt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qs(o)),s||=!1,o&&(o.dirty=!1),t[U]&=-9217,s)Mx(r,t,r.template,t[be]);else if(i&8192){let a=L(null);try{Rw(t),xw(t,1);let c=r.components;c!==null&&Ow(t,c,1),Sw(t)}finally{L(a)}}}function Ow(t,e,n){for(let r=0;r<e.length;r++)Nx(t,e[r],n)}function xx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],a=n[++r];WC(s,o);let c=e[o];se(24,c),a(2,c),se(25,c)}}}finally{Ar(-1)}}function lm(t,e){let n=Qp()?64:1088;for(t[_n].changeDetectionScheduler?.notify(e);t;){t[U]|=n;let r=Er(t);if(Oo(t)&&!r)return t;t=r}return null}function kw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Fw(t,e){let n=We+e;if(n<t.length)return t[n]}function nd(t,e,n,r=!0){let i=e[F];if(Px(i,e,t,n),r){let s=Dg(n,t),a=e[ge],c=a.parentNode(t[Dr]);c!==null&&zN(i,t[Ft],a,e,c,s)}let o=e[No];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Lw(t,e){let n=wa(t,e);return n!==void 0&&Xu(n[F],n),n}function wa(t,e){if(t.length<=We)return;let n=We+e,r=t[n];if(r){let i=r[Ci];i!==null&&i!==t&&tm(i,r),e>0&&(t[n-1][kt]=r[kt]);let o=ra(t,We+e);HN(r[F],r);let s=o[wi];s!==null&&s.detachView(o[F]),r[Be]=null,r[kt]=null,r[U]&=-129}return r}function Px(t,e,n,r){let i=We+r,o=n.length;r>0&&(n[i-1][kt]=e),r<o-We?(e[kt]=n[i],Mp(n,We+r,e)):(n.push(e),e[kt]=null),e[Be]=n;let s=e[Ci];s!==null&&n!==s&&Vw(s,e);let a=e[wi];a!==null&&a.insertView(t),pu(e),e[U]|=128}function Vw(t,e){let n=t[la],r=e[Be];if(En(r))t[U]|=2;else{let i=r[Be][bt];e[bt]!==i&&(t[U]|=2)}n===null?t[la]=[e]:n.push(e)}var Mr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[F];return Ia(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[be]}set context(e){this._lView[be]=e}get destroyed(){return bi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Jt(e)){let n=e[ca],r=n?n.indexOf(this):-1;r>-1&&(wa(e,r),ra(n,r))}this._attachedToViewContainer=!1}Xu(this._lView[F],this._lView)}onDestroy(e){Wp(this._lView,e)}markForCheck(){lm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){pu(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,cm(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[_i].get(Ex,fI)}catch{this.exhaustive=fI}}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Oo(this._lView),n=this._lView[Ci];n!==null&&!e&&tm(n,this._lView),Cw(this._lView[F],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e;let n=Oo(this._lView),r=this._lView[Ci];r!==null&&!n&&Vw(r,this._lView),pu(this._lView)}};var rd=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Ox;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=td(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Mr(o)}}return t})();function Ox(){return kx(nt(),z())}function kx(t,e){return t.type&4?new rd(e,t,qu(t,e)):null}function id(t,e,n,r,i){let o=t.data[e];if(o===null)o=Fx(t,e,n,r,i),zC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=jC();o.injectorIndex=s===null?-1:s.injectorIndex}return ko(o,!0),o}function Fx(t,e,n,r,i){let o=qp(),s=Yp(),a=s?o:o&&o.parent,c=t.data[e]=Vx(t,a,n,e,r,i);return Lx(t,c,o,s),c}function Lx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Vx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vq=new RegExp(`^(\\d+)*(${vN}|${mN})*(.*)`);function Ux(t){let e=t[Up]??[],r=t[Be][ge],i=[];for(let o of e)o.data[nw]!==void 0?i.push(o):jx(o,r);t[Up]=i}function jx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[tw];for(;n<i;){let o=r.nextSibling;mw(e,r,!1),r=o,n++}}}var Bx=()=>null,$x=()=>null;function Sg(t,e){return Bx(t,e)}function Uw(t,e,n){return $x(t,e,n)}var jw=class{},od=class{},Ag=class{resolveComponentFactory(e){throw new b(917,!1)}},Aa=class{static NULL=new Ag},Mi=class{},xr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Hx()}return t})();function Hx(){let t=z(),e=nt(),n=Vt(e.index,t);return(En(n)?n:t)[ge]}var Bw=(()=>{class t{static \u0275prov=S({token:t,providedIn:"root",factory:()=>null})}return t})();var Su={},Mg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Su,r);return i!==Su||n===Su?i:this.parentInjector.get(e,n,r)}};function hI(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vp(i,a);else if(o==2){let c=a,l=e[++s];r=vp(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function R(t,e=0){let n=z();if(n===null)return x(t,e);let r=nt();return GI(r,n,ze(t),e)}function $w(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}Gx(t,e,n,a,o,c,l)}o!==null&&r!==null&&zx(n,r,o)}function zx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new b(-301,!1);r.push(e[i],o)}}function Wx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Gx(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&Cn(h)&&(c=!0,Wx(t,n,f)),_g(xu(n,e),t,h.type)}Jx(n,t.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=_w(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Ea(n.mergedAttrs,h.hostAttrs),Yx(t,n,e,d,h),Zx(d,h,i),s!==null&&s.has(h)){let[C,y]=s.get(h);n.directiveToIndex.set(h.type,[d,C+n.directiveStart,y+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}qx(t,n,o)}function qx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))pI(0,e,i,r),pI(1,e,i,r),mI(e,r,!1);else{let o=n.get(i);gI(0,e,o,r),gI(1,e,o,r),mI(e,r,!0)}}}function pI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Hw(e,o)}}function gI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Hw(e,s)}}function Hw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function mI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Qg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Yx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=_r(i.type,!0)),s=new Ai(o,Cn(i),R,null);t.blueprint[r]=s,n[r]=s,Kx(t,e,r,_w(t,n,i.hostVars,An),i)}function Kx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Qx(s)!=a&&s.push(a),s.push(n,r,o)}}function Qx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Zx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Cn(e)&&(n[""]=t)}}function Jx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zw(t,e,n,r,i,o,s,a){let c=e[F],l=c.consts,u=In(l,s),d=id(c,t,n,r,u);return o&&$w(c,e,d,In(l,a),i),d.mergedAttrs=Ea(d.mergedAttrs,d.attrs),d.attrs!==null&&hI(d,d.attrs,!1),d.mergedAttrs!==null&&hI(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Ww(t,e){LI(t,e),jp(e)&&t.queries.elementEnd(e)}function um(t,e,n){return t[e]=n}function Sn(t,e,n){if(n===An)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Rg(t,e,n,r){let i=Sn(t,e,n);return Sn(t,e+1,r)||i}function Xx(t,e,n,r,i,o){let s=Rg(t,e,n,r);return Rg(t,e+2,i,o)||s}function ug(t,e,n){return function r(i){let o=Tr(t)?Vt(t.index,e):e;lm(o,5);let s=e[be],a=vI(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=vI(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function vI(t,e,n,r){let i=L(null);try{return se(6,e,n),n(r)!==!1}catch(o){return mx(t,o),!1}finally{se(7,e,n),L(i)}}function eP(t,e,n,r,i,o,s,a){let c=ua(t),l=!1,u=null;if(!r&&c&&(u=tP(e,n,o,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Xt(t,n),f=r?r(d):d;_N(n,f,o,a);let h=i.listen(f,o,a),g=r?C=>r(Lt(C[t.index])):t.index;Gw(g,e,n,o,a,h,!1)}return l}function tP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[xo],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Gw(t,e,n,r,i,o,s){let a=e.firstCreatePass?PC(e):null,c=xC(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function yI(t,e,n,r,i,o){let s=e[n],a=e[F],l=a.data[n].outputs[r],d=s[l].subscribe(o);Gw(t.index,a,e,i,o,d,!0)}var Ng=Symbol("BINDING");var Fu=class extends Aa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=br(e);return new Uo(n,this.ngModule)}};function nP(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Ju.SignalBased)!==0};return i&&(o.transform=i),o})}function rP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function iP(t,e,n){let r=e instanceof _e?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Mg(n,r):n}function oP(t){let e=t.get(Mi,null);if(e===null)throw new b(407,!1);let n=t.get(Bw,null),r=t.get(Cr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function sP(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return pw(e,n,n==="svg"?SC:n==="math"?AC:null)}var Uo=class extends od{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=nP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=PN(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){se(22);let a=L(null);try{let c=this.componentDef,l=aP(r,c,s,o),u=iP(c,i||this.ngModule,e),d=oP(u),f=d.rendererFactory.createRenderer(null,c),h=r?nx(f,r,c.encapsulation,u):sP(c,f),g=s?.some(_I)||o?.some(w=>typeof w!="function"&&w.bindings.some(_I)),C=Jg(null,l,null,512|yw(c),null,null,d,f,u,null,ow(h,u,!0));C[De]=h,mu(C);let y=null;try{let w=zw(De,C,2,"#host",()=>l.directiveRegistry,!0,0);h&&(vw(f,h,w),Vo(h,C)),im(l,C,w),aw(l,w,C),Ww(l,w),n!==void 0&&lP(w,this.ngContentSelectors,n),y=Vt(w.index,C),C[be]=y[be],am(l,C,null)}catch(w){throw y!==null&&Cg(y),Cg(C),w}finally{se(23),vu()}return new Lu(this.componentType,C,!!g)}finally{L(a)}}};function aP(t,e,n,r){let i=t?["ng-version","20.1.6"]:ON(e.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Ng].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Ng].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Pp(d);c.push(f)}return Zg(0,null,cP(o,s),1,a,c,null,null,null,[i],null)}function cP(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function _I(t){let e=t[Ng].kind;return e==="input"||e==="twoWay"}var Lu=class extends jw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=da(n[F],De),this.location=qu(this._tNode,n),this.instance=Vt(this._tNode.index,n)[be],this.hostView=this.changeDetectorRef=new Mr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=sm(r,i[F],i,e,n);this.previousInputValues.set(e,n);let s=Vt(r.index,i);lm(s,1)}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $o=(()=>{class t{static __NG_ELEMENT_ID__=uP}return t})();function uP(){let t=nt();return fP(t,z())}var dP=$o,qw=class extends dP{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){let e=zg(this._hostTNode,this._hostLView);if(jI(e)){let n=Ru(e,this._hostLView),r=Mu(e),i=n[F].data[r+8];return new Si(i,n)}else return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=EI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-We}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Sg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ca(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!WR(e),l;if(c)l=n;else{let y=n||{};l=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef,s=y.directives,a=y.bindings}let u=c?e:new Uo(br(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let w=(c?d:this.parentInjector).get(_e,null);w&&(o=w)}let f=br(u.componentType??{}),h=Sg(this._lContainer,f?.id??null),g=h?.firstChild??null,C=u.create(d,i,g,o,s,a);return this.insertImpl(C.hostView,l,Ca(this._hostTNode,h)),C}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(MC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Be],l=new qw(c,c[Ft],c[Be]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return nd(s,i,o,r),e.attachToViewContainerRef(),Mp(dg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=EI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=wa(this._lContainer,n);r&&(ra(dg(this._lContainer),n),Xu(r[F],r))}detach(e){let n=this._adjustIndex(e,-1),r=wa(this._lContainer,n);return r&&ra(dg(this._lContainer),n)!=null?new Mr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function EI(t){return t[ca]}function dg(t){return t[ca]||(t[ca]=[])}function fP(t,e){let n,r=e[t.index];return Jt(r)?n=r:(n=kw(r,e,null,t),e[t.index]=n,Xg(e,n)),pP(n,e,t,r),new qw(n,t,e)}function hP(t,e){let n=t[ge],r=n.createComment(""),i=Xt(e,t),o=n.parentNode(i);return ku(n,o,r,n.nextSibling(i),!1),r}var pP=vP,gP=()=>!1;function mP(t,e,n){return gP(t,e,n)}function vP(t,e,n,r){if(t[Dr])return;let i;n.type&8?i=Lt(r):i=hP(e,n),t[Dr]=i}var CI=new Set;function Pr(t){CI.has(t)||(CI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ri=class{},sd=class{};var Vu=class extends Ri{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=xp(e);this._bootstrapComponents=fw(o.bootstrap),this._r3Injector=tg(e,n,[{provide:Ri,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver},...r],Yn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Uu=class extends sd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Vu(this.moduleType,e,[])}};var ba=class extends Ri{injector;componentFactoryResolver=new Fu(this);instance=null;constructor(e){super();let n=new mi([...e.providers,{provide:Ri,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],e.parent||oa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ma(t,e,n=null){return new ba({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var yP=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Op(!1,n.type),i=r.length>0?Ma([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=S({token:t,providedIn:"environment",factory:()=>new t(x(_e))})}return t})();function it(t){return Bo(()=>{let e=Yw(t),n=P(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Wg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(yP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||wt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Pr("NgStandalone"),Kw(n);let r=t.dependencies;return n.directiveDefs=II(r,_P),n.pipeDefs=II(r,EC),n.id=IP(n),n})}function _P(t){return br(t)||Pp(t)}function tn(t){return Bo(()=>({type:t.type,bootstrap:t.bootstrap||wt,declarations:t.declarations||wt,imports:t.imports||wt,exports:t.exports||wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function EP(t,e){if(t==null)return Ir;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Ju.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function CP(t){if(t==null)return Ir;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function $e(t){return Bo(()=>{let e=Yw(t);return Kw(e),e})}function Ra(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ir,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:EP(t.inputs,e),outputs:CP(t.outputs),debugInfo:null}}function Kw(t){t.features?.forEach(e=>e(t))}function II(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function IP(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function wP(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let e=wP(t.type),n=!0,r=[t];for(;e;){let i;if(Cn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new b(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=fg(t.inputs),s.declaredInputs=fg(t.declaredInputs),s.outputs=fg(t.outputs);let a=i.hostBindings;a&&AP(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&TP(t,c),l&&SP(t,l),bP(t,i),fC(t.outputs,i.outputs),Cn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Mn&&(n=!1)}}e=Object.getPrototypeOf(e)}DP(r)}function bP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function DP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ea(i.hostAttrs,n=Ea(n,i.hostAttrs))}}function fg(t){return t===Ir?{}:t===wt?[]:t}function TP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function SP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function AP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Qw(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ea(t.mergedAttrs,t.attrs);let u=t.tView=Zg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ko(t,!1);let c=RP(n,e,t,r);_u()&&nm(n,e,c,t),Vo(c,e);let l=kw(c,e,c,t);e[r+De]=l,Xg(e,l),mP(l,t,e)}function MP(t,e,n,r,i,o,s,a,c,l,u){let d=n+De,f;return e.firstCreatePass?(f=id(e,d,4,s||null,a||null),Gp()&&$w(e,t,f,In(e.consts,l),Dw),LI(e,f)):f=e.data[d],Qw(f,t,e,n,r,i,o,c),ua(f)&&im(e,t,f),l!=null&&om(t,f,u),f}function ju(t,e,n,r,i,o,s,a,c,l,u){let d=n+De,f;if(e.firstCreatePass){if(f=id(e,d,4,s||null,a||null),l!=null){let h=In(e.consts,l);f.localNames=[];for(let g=0;g<h.length;g+=2)f.localNames.push(h[g],-1)}}else f=e.data[d];return Qw(f,t,e,n,r,i,o,c),l!=null&&om(t,f,u),f}function ad(t,e,n,r,i,o,s,a){let c=z(),l=Ge(),u=In(l.consts,o);return MP(c,l,t,e,n,r,i,u,void 0,s,a),ad}var RP=NP;function NP(t,e,n,r){return Eu(!0),e[ge].createComment("")}var dm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(dm||{}),Na=new D(""),Zw=!1,xg=class extends Ae{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,DC()&&(this.destroyRef=m(Zn,{optional:!0})??void 0,this.pendingTasks=m(bn,{optional:!0})??void 0)}emit(e){let n=L(null);try{super.next(e)}finally{L(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ve&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},me=xg;function Jw(t){let e,n;function r(){t=ma;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function wI(t){return queueMicrotask(()=>t()),()=>{t=ma}}var fm="isAngularZone",Bu=fm+"_ID",xP=0,re=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new me(!1);onMicrotaskEmpty=new me(!1);onStable=new me(!1);onError=new me(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Zw}=e;if(typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(fm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,PP,ma,ma);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},PP={};function hm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function OP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Jw(()=>{t.callbackScheduled=!1,Pg(t),t.isCheckStableRunning=!0,hm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Pg(t)}function kP(t){let e=()=>{OP(t)},n=xP++;t._inner=t._inner.fork({name:"angular",properties:{[fm]:!0,[Bu]:n,[Bu+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(FP(c))return r.invokeTask(o,s,a,c);try{return bI(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DI(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bI(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!LP(c)&&e(),DI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Pg(t),hm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Pg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function bI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DI(t){t._nesting--,hm(t)}var $u=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new me;onMicrotaskEmpty=new me;onStable=new me;onError=new me;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function FP(t){return Xw(t,"__ignore_ng_zone__")}function LP(t){return Xw(t,"__scheduler_tick__")}function Xw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var eb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=S({token:t,providedIn:"root",factory:()=>new t})}return t})();var pm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var gm=new D("");function nr(t){return!!t&&typeof t.then=="function"}function cd(t){return!!t&&typeof t.subscribe=="function"}var tb=new D("");var mm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=m(tb,{optional:!0})??[];injector=m(Re);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=we(this.injector,i);if(nr(o))n.push(o);else if(cd(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ld=new D("");function nb(){Vh(()=>{let t="";throw new b(600,t)})}function rb(t){return t.isBoundToModule}var VP=10;var Or=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=m(rt);afterRenderManager=m(eb);zonelessEnabled=m(Cu);rootEffectScheduler=m(sg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ae;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=m(bn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(N(n=>!n))}constructor(){m(Na,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=m(_e);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Re.NULL){return this._injector.get(re).run(()=>{se(10);let s=n instanceof od;if(!this._injector.get(mm).done){let g="";throw new b(405,g)}let c;s?c=n:c=this._injector.get(Aa).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=rb(c)?void 0:this._injector.get(Ri),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(gm,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),ya(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),se(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(dm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new b(101,!1);let n=L(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,L(n),this.afterTick.next(),se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<VP;)se(14),this.synchronizeOnce(),se(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!fa(i))continue;let o=r&&!this.zonelessEnabled?0:1;cm(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>fa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ya(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ld,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ya(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ya(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ho(t,e,n,r){let i=z(),o=Di();if(Sn(i,o,e)){let s=Ge(),a=yu();dx(a,i,t,e,n,r)}return Ho}var Og=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function hg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function UP(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),u=e[o],d=hg(o,l,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let f=t.at(s),h=e[c],g=hg(s,f,c,h,n);if(g!==0){g<0&&t.updateValue(s,h),s--,c--;continue}let C=n(o,l),y=n(s,f),w=n(o,u);if(Object.is(w,y)){let H=n(c,h);Object.is(H,C)?(t.swap(o,s),t.updateValue(s,h),c--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new Hu,i??=SI(t,o,s,n),kg(t,r,o,w))t.updateValue(o,u),o++,s++;else if(i.has(w))r.set(C,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=c;)TI(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=t.at(o),d=l.value,f=hg(o,u,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=c.next();else{r??=new Hu,i??=SI(t,o,s,n);let h=n(o,d);if(kg(t,r,o,h))t.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,s++,l=c.next();else{let g=n(o,u);r.set(g,t.detach(o)),s--}}}for(;!l.done;)TI(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function kg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function TI(t,e,n,r,i){if(kg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function SI(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Hu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Te(t,e,n,r,i,o,s,a){Pr("NgControlFlow");let c=z(),l=Ge(),u=In(l.consts,o);return ju(c,l,t,e,n,r,i,u,256,s,a),St}function St(t,e,n,r,i,o,s,a){Pr("NgControlFlow");let c=z(),l=Ge(),u=In(l.consts,o);return ju(c,l,t,e,n,r,i,u,512,s,a),St}function Se(t,e){Pr("NgControlFlow");let n=z(),r=Di(),i=n[r]!==An?n[r]:-1,o=i!==-1?zu(n,De+i):void 0,s=0;if(Sn(n,r,t)){let a=L(null);try{if(o!==void 0&&Lw(o,s),t!==-1){let c=De+t,l=zu(n,c),u=Ug(n[F],c),d=Uw(l,u,n),f=td(n,u,e,{dehydratedView:d});nd(l,f,s,Ca(u,d))}}finally{L(a)}}else if(o!==void 0){let a=Fw(o,s);a!==void 0&&(a[be]=e)}}var Fg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-We}};function xa(t){return t}var Lg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function nn(t,e,n,r,i,o,s,a,c,l,u,d,f){Pr("NgControlFlow");let h=z(),g=Ge(),C=c!==void 0,y=z(),w=a?s.bind(y[bt][be]):s,H=new Lg(C,w);y[De+t]=H,ju(h,g,t+1,e,n,r,i,In(g.consts,o),256),C&&ju(h,g,t+2,c,l,u,d,In(g.consts,f),512)}var Vg=class extends Og{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-We}at(e){return this.getLView(e)[be].$implicit}attach(e,n){let r=n[No];this.needsIndexUpdate||=e!==this.length,nd(this.lContainer,n,e,Ca(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jP(this.lContainer,e)}create(e,n){let r=Sg(this.lContainer,this.templateTNode.tView.ssrId),i=td(this.hostLView,this.templateTNode,new Fg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Xu(e[F],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[be].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[be].$index=e}getLView(e){return BP(this.lContainer,e)}};function rn(t){let e=L(null),n=Sr();try{let r=z(),i=r[F],o=r[n],s=n+1,a=zu(r,s);if(o.liveCollection===void 0){let l=Ug(i,s);o.liveCollection=new Vg(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(UP(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Di(),u=c.length===0;if(Sn(r,l,u)){let d=n+2,f=zu(r,d);if(u){let h=Ug(i,d),g=Uw(f,h,r),C=td(r,h,void 0,{dehydratedView:g});nd(f,C,0,Ca(h,g))}else i.firstUpdatePass&&Ux(f),Lw(f,0)}}}finally{L(e)}}function zu(t,e){return t[e]}function jP(t,e){return wa(t,e)}function BP(t,e){return Fw(t,e)}function Ug(t,e){return da(t,e)}function Je(t,e,n){let r=z(),i=Di();if(Sn(r,i,e)){let o=Ge(),s=yu();bw(s,r,t,e,r[ge],n)}return Je}function AI(t,e,n,r,i){sm(e,t,n,i?"class":"style",r)}function v(t,e,n,r){let i=z(),o=i[F],s=t+De,a=o.firstCreatePass?zw(s,i,2,e,Dw,Gp(),n,r):o.data[s];if(px(a,i,t,e,$P),ua(a)){let c=i[F];im(c,i,a),aw(c,a,i)}return r!=null&&om(i,a),v}function E(){let t=Ge(),e=nt(),n=gx(e);return t.firstCreatePass&&Ww(t,n),VC(n)&&UC(),FC(),n.classesWithoutHost!=null&&ZR(n)&&AI(t,n,z(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&JR(n)&&AI(t,n,z(),n.stylesWithoutHost,!1),E}function qe(t,e,n,r){return v(t,e,n,r),E(),qe}var $P=(t,e,n,r,i)=>(Eu(!0),pw(e[ge],r,JC()));function At(){return z()}var Ti=void 0;function HP(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var zP=["en",[["a","p"],["AM","PM"],Ti],[["AM","PM"],Ti,Ti],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ti,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ti,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ti,"{1} 'at' {0}",Ti],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",HP],_a={};function vm(t,e,n){typeof e!="string"&&(n=e,e=t[fe.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),_a[e]=t,n&&(_a[e][fe.ExtraData]=n)}function ot(t){let e=WP(t),n=MI(e);if(n)return n;let r=e.split("-")[0];if(n=MI(r),n)return n;if(r==="en")return zP;throw new b(701,!1)}function MI(t){return t in _a||(_a[t]=Kn.ng&&Kn.ng.common&&Kn.ng.common.locales&&Kn.ng.common.locales[t]),_a[t]}var fe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(fe||{});function WP(t){return t.toLowerCase().replace(/_/g,"-")}var Pa="en-US",GP="USD";var qP=Pa;function ib(t){typeof t=="string"&&(qP=t.toLowerCase().replace(/_/g,"-"))}function Z(t,e,n){let r=z(),i=Ge(),o=nt();return ob(i,r,r[ge],o,t,e,n),Z}function ob(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=ug(r,e,o),eP(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=ug(r,e,o),yI(r,e,f,h,i,c)}if(l&&l.length)for(let d of l)c??=ug(r,e,o),yI(r,e,d,i,i,c)}}function j(t=1){return ZC(t)}function bu(t,e){return t<<17|e<<2}function Ni(t){return t>>17&32767}function YP(t){return(t&2)==2}function KP(t,e){return t&131071|e<<17}function jg(t){return t|2}function jo(t){return(t&131068)>>2}function pg(t,e){return t&-131069|e<<2}function QP(t){return(t&1)===1}function Bg(t){return t|1}function ZP(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ni(s),c=jo(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Ro(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Ni(t[a+1]);t[r+1]=bu(f,a),f!==0&&(t[f+1]=pg(t[f+1],r)),t[a+1]=KP(t[a+1],r)}else t[r+1]=bu(a,0),a!==0&&(t[a+1]=pg(t[a+1],r)),a=r;else t[r+1]=bu(c,0),a===0?a=r:t[c+1]=pg(t[c+1],r),c=r;l&&(t[r+1]=jg(t[r+1])),RI(t,u,r,!0),RI(t,u,r,!1),JP(e,u,t,r,o),s=bu(a,c),o?e.classBindings=s:e.styleBindings=s}function JP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Ro(o,e)>=0&&(n[r+1]=Bg(n[r+1]))}function RI(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ni(i):jo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];XP(c,e)&&(a=!0,t[s+1]=r?Bg(l):jg(l)),s=r?Ni(l):jo(l)}a&&(t[n+1]=r?jg(i):Bg(i))}function XP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ro(t,e)>=0:!1}function ud(t,e,n){return sb(t,e,n,!1),ud}function Oa(t,e){return sb(t,e,null,!0),Oa}function sb(t,e,n,r){let i=z(),o=Ge(),s=HC(2);if(o.firstUpdatePass&&tO(o,t,s,r),e!==An&&Sn(i,s,e)){let a=o.data[Sr()];sO(o,a,i,i[ge],t,i[s+1]=aO(e,n),r,s)}}function eO(t,e){return e>=t.expandoStartIndex}function tO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Sr()],s=eO(t,n);cO(o,r)&&e===null&&!s&&(e=!1),e=nO(i,o,e,r),ZP(i,o,e,n,s,r)}}function nO(t,e,n,r){let i=qC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=gg(null,t,e,n,r),n=Da(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=gg(i,t,e,n,r),o===null){let c=rO(t,e,r);c!==void 0&&Array.isArray(c)&&(c=gg(null,t,e,c[1],r),c=Da(c,e.attrs,r),iO(t,e,r,c))}else o=oO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function rO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(jo(r)!==0)return t[Ni(r)]}function iO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ni(i)]=r}function oO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Da(r,s,n)}return Da(r,e.attrs,n)}function gg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Da(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Da(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_C(t,s,n?!0:e[++o]))}return t===void 0?null:t}function sO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=QP(l)?NI(c,e,n,i,jo(l),s):void 0;if(!Wu(u)){Wu(o)||YP(l)&&(o=NI(c,null,n,i,a,s));let d=Bp(Sr(),n);tx(r,s,d,i,o)}}function NI(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===An&&(f=d?wt:void 0);let h=d?lu(f,r):u===r?f:void 0;if(l&&!Wu(h)&&(h=lu(c,r)),Wu(h)&&(a=h,s))return a;let g=t[i+1];i=s?Ni(g):jo(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=lu(c,r))}return a}function Wu(t){return t!==void 0}function aO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Yn(Sa(t)))),t}function cO(t,e){return(t.flags&(e?8:16))!==0}function T(t,e=""){let n=z(),r=Ge(),i=t+De,o=r.firstCreatePass?id(r,i,1,e,null):r.data[i],s=lO(r,n,o,e,t);n[i]=s,_u()&&nm(r,n,s,o),ko(o,!1)}var lO=(t,e,n,r,i)=>(Eu(!0),kN(e[ge],r));function ab(t,e,n,r=""){return Sn(t,Di(),n)?e+na(n)+r:An}function he(t){return st("",t),he}function st(t,e,n){let r=z(),i=ab(r,t,e,n);return i!==An&&uO(r,Sr(),i),st}function uO(t,e,n){let r=Bp(e,t);FN(t[ge],r,n)}function ka(t,e,n){rg(e)&&(e=e());let r=z(),i=Di();if(Sn(r,i,e)){let o=Ge(),s=yu();bw(s,r,t,e,r[ge],n)}return ka}function dd(t,e){let n=rg(t);return n&&t.set(e),n}function Fa(t,e){let n=z(),r=Ge(),i=nt();return ob(r,n,n[ge],i,t,e),Fa}function ym(t,e,n=""){return ab(z(),t,e,n)}function dO(t,e,n){let r=Ge();if(r.firstCreatePass){let i=Cn(t);$g(n,r.data,r.blueprint,i,!0),$g(e,r.data,r.blueprint,i,!1)}}function $g(t,e,n,r,i){if(t=ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)$g(t[o],e,n,r,i);else{let o=Ge(),s=z(),a=nt(),c=gi(t)?t:ze(t.provide),l=Fp(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(gi(t)||!t.multi){let h=new Ai(l,i,R,null),g=vg(c,e,i?u:u+f,d);g===-1?(_g(xu(a,s),o,c),mg(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=vg(c,e,u+f,d),g=vg(c,e,u,u+f),C=h>=0&&n[h],y=g>=0&&n[g];if(i&&!y||!i&&!C){_g(xu(a,s),o,c);let w=pO(i?hO:fO,n.length,i,r,l,t);!i&&y&&(n[g].providerFactory=w),mg(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),s.push(w)}else{let w=cb(n[i?g:h],l,!i&&r);mg(o,t,h>-1?h:g,w)}!i&&r&&y&&n[g].componentProviders++}}}function mg(t,e,n,r){let i=gi(e),o=bC(e);if(i||o){let c=(o?ze(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function cb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function vg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function fO(t,e,n,r,i){return Hg(this.multi,[])}function hO(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Pu(r,r[F],this.providerFactory.index,i);s=c.slice(0,a),Hg(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Hg(o,s);return s}function Hg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function pO(t,e,n,r,i,o){let s=new Ai(t,n,R,null);return s.multi=[],s.index=e,s.componentProviders=0,cb(s,i,r&&!n),s}function zo(t,e=[]){return n=>{n.providersResolver=(r,i)=>dO(r,i?i(t):t,e)}}function _m(t,e,n,r){return lb(z(),ga(),t,e,n,r)}function Em(t,e){let n=t[e];return n===An?void 0:n}function lb(t,e,n,r,i,o){let s=e+n;return Sn(t,s,i)?um(t,s+1,o?r.call(o,i):r(i)):Em(t,s+1)}function gO(t,e,n,r,i,o,s){let a=e+n;return Rg(t,a,i,o)?um(t,a+2,s?r.call(s,i,o):r(i,o)):Em(t,a+2)}function mO(t,e,n,r,i,o,s,a,c){let l=e+n;return Xx(t,l,i,o,s,a)?um(t,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Em(t,l+4)}function xe(t,e){let n=Ge(),r,i=t+De;n.firstCreatePass?(r=vO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=_r(r.type,!0)),s,a=tt(R);try{let c=Nu(!1),l=o();return Nu(c),$p(n,z(),i,l),l}finally{tt(a)}}function vO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ut(t,e,n){let r=t+De,i=z(),o=fu(i,r);return Im(i,r)?lb(i,ga(),e,o.transform,n,o):o.transform(n)}function Cm(t,e,n,r){let i=t+De,o=z(),s=fu(o,i);return Im(o,i)?gO(o,ga(),e,s.transform,n,r,s):s.transform(n,r)}function jt(t,e,n,r,i,o){let s=t+De,a=z(),c=fu(a,s);return Im(a,s)?mO(a,ga(),e,c.transform,n,r,i,o,c):c.transform(n,r,i,o)}function Im(t,e){return t[F].data[e].pure}var Gu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wm=(()=>{class t{compileModuleSync(n){return new Uu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=xp(n),o=fw(i.declarations).reduce((s,a)=>{let c=br(a);return c&&s.push(new Uo(c)),s},[]);return new Gu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var yO=(()=>{class t{zone=m(re);changeDetectionScheduler=m(Cr);applicationRef=m(Or);applicationErrorHandler=m(rt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ub({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new re(P(_({},db()),{scheduleInRootZone:n})),[{provide:re,useFactory:t},{provide:wr,multi:!0,useFactory:()=>{let r=m(yO,{optional:!0});return()=>r.initialize()}},{provide:wr,multi:!0,useFactory:()=>{let r=m(_O);return()=>{r.initialize()}}},e===!0?{provide:ig,useValue:!0}:[],{provide:og,useValue:n??Zw},{provide:rt,useFactory:()=>{let r=m(re),i=m(_e),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(yn),o.handleError(s))})}}}]}function db(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _O=(()=>{class t{subscription=new ve;initialized=!1;zone=m(re);pendingTasks=m(bn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var fb=(()=>{class t{applicationErrorHandler=m(rt);appRef=m(Or);taskService=m(bn);ngZone=m(re);zonelessEnabled=m(Cu);tracing=m(Na,{optional:!0});disableScheduling=m(ig,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(m(og,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $u||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?wI:Jw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,wI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EO(){return typeof $localize<"u"&&$localize.locale||Pa}var kr=new D("",{providedIn:"root",factory:()=>m(kr,{optional:!0,skipSelf:!0})||EO()}),bm=new D("",{providedIn:"root",factory:()=>GP});function gt(t){return lC(t)}function Wo(t,e){return Ml(t,e?.equal)}var hb=class{[Ze];constructor(e){this[Ze]=e}destroy(){this[Ze].destroy()}};var vb=Symbol("InputSignalNode#UNSET"),kO=P(_({},Rl),{transformFn:void 0,applyValueToInputSignal(t,e){go(t,e)}});function yb(t,e){let n=Object.create(kO);n.value=t,n.transformFn=e?.transform;function r(){if(fo(n),n.value===vb){let i=null;throw new b(-950,i)}return n.value}return r[Ze]=n,r}var hd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ta(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},FO=new D("");FO.__NG_ELEMENT_ID__=t=>{let e=nt();if(e===null)throw new b(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new b(204,!1)};function pb(t,e){return yb(t,e)}function LO(t){return yb(vb,t)}var _b=(pb.required=LO,pb);var Pi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Eb=new Pi("20.1.6");var Dm=new D(""),VO=new D("");function La(t){return!t.moduleRef}function UO(t){let e=La(t)?t.r3Injector:t.moduleRef.injector,n=e.get(re);return n.run(()=>{La(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(rt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),La(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Dm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Dm);s.add(o),t.moduleRef.onDestroy(()=>{ya(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return BO(r,n,()=>{let o=e.get(bn),s=o.add(),a=e.get(mm);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(kr,Pa);if(ib(c||Pa),!e.get(VO,!0))return La(t)?e.get(Or):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(La(t)){let u=e.get(Or);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return jO?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var jO;function BO(t,e,n){try{let r=n();return nr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var fd=null;function $O(t=[],e){return Re.create({name:e,providers:[{provide:ia,useValue:"platform"},{provide:Dm,useValue:new Set([()=>fd=null])},...t]})}function HO(t=[]){if(fd)return fd;let e=$O(t);return fd=e,nb(),zO(e),e}function zO(t){let e=t.get(Ku,null);we(t,()=>{e?.forEach(n=>n())})}function Tm(){return!1}var Fr=(()=>{class t{static __NG_ELEMENT_ID__=WO}return t})();function WO(t){return GO(nt(),z(),(t&16)===16)}function GO(t,e,n){if(Tr(t)&&!n){let r=Vt(t.index,e);return new Mr(r,r)}else if(t.type&175){let r=e[bt];return new Mr(r,e)}return null}function Cb(t){se(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=HO(r),o=[ub({}),{provide:Cr,useExisting:fb},eI,...n||[]],s=new ba({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return UO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{se(9)}}function Lr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var bb=null;function Bt(){return bb}function Sm(t){bb??=t}var Va=class{},Am=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(Db),providedIn:"platform"})}return t})();var Db=(()=>{class t extends Am{_location;_history;_doc=m(Ne);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bt().getBaseHref(this._doc)}onPopState(n){let r=Bt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Bt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Tb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Ib(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Vr(t){return t&&t[0]!=="?"?`?${t}`:t}var qo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(Ab),providedIn:"root"})}return t})(),Sb=new D(""),Ab=(()=>{class t extends qo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??m(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Tb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Vr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Vr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Vr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(x(Am),x(Sb,8))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yo=(()=>{class t{_subject=new Ae;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=KO(Ib(wb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Vr(r))}normalize(n){return t.stripTrailingSlash(YO(this._basePath,wb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Vr;static joinWithSlash=Tb;static stripTrailingSlash=Ib;static \u0275fac=function(r){return new(r||t)(x(qo))};static \u0275prov=S({token:t,factory:()=>qO(),providedIn:"root"})}return t})();function qO(){return new Yo(x(qo))}function YO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function wb(t){return t.replace(/\/index.html$/,"")}function KO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Pb={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Fm=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Fm||{});var Xe=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Xe||{}),oe=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(oe||{}),mt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(mt||{}),vt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ob(t){return ot(t)[fe.LocaleId]}function kb(t,e,n){let r=ot(t),i=[r[fe.DayPeriodsFormat],r[fe.DayPeriodsStandalone]],o=$t(i,e);return $t(o,n)}function Fb(t,e,n){let r=ot(t),i=[r[fe.DaysFormat],r[fe.DaysStandalone]],o=$t(i,e);return $t(o,n)}function Lb(t,e,n){let r=ot(t),i=[r[fe.MonthsFormat],r[fe.MonthsStandalone]],o=$t(i,e);return $t(o,n)}function Vb(t,e){let r=ot(t)[fe.Eras];return $t(r,e)}function Ua(t,e){let n=ot(t);return $t(n[fe.DateFormat],e)}function ja(t,e){let n=ot(t);return $t(n[fe.TimeFormat],e)}function Ba(t,e){let r=ot(t)[fe.DateTimeFormat];return $t(r,e)}function Rn(t,e){let n=ot(t),r=n[fe.NumberSymbols][e];if(typeof r>"u"){if(e===vt.CurrencyDecimal)return n[fe.NumberSymbols][vt.Decimal];if(e===vt.CurrencyGroup)return n[fe.NumberSymbols][vt.Group]}return r}function Ub(t,e){return ot(t)[fe.NumberFormats][e]}function QO(t){return ot(t)[fe.Currencies]}function jb(t){if(!t[fe.ExtraData])throw new b(2303,!1)}function Bb(t){let e=ot(t);return jb(e),(e[fe.ExtraData][2]||[]).map(r=>typeof r=="string"?Mm(r):[Mm(r[0]),Mm(r[1])])}function $b(t,e,n){let r=ot(t);jb(r);let i=[r[fe.ExtraData][0],r[fe.ExtraData][1]],o=$t(i,e)||[];return $t(o,n)||[]}function $t(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new b(2304,!1)}function Mm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function Hb(t,e,n="en"){let r=QO(n)[t]||Pb[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var ZO=2;function zb(t){let e,n=Pb[t];return n&&(e=n[2]),typeof e=="number"?e:ZO}var JO=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,pd={},XO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Wb(t,e,n,r){let i=ck(t);e=rr(n,e)||e;let s=[],a;for(;e;)if(a=XO.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=qb(r,c),i=ak(i,r));let l="";return s.forEach(u=>{let d=ok(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function _d(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function rr(t,e){let n=Ob(t);if(pd[n]??={},pd[n][e])return pd[n][e];let r="";switch(e){case"shortDate":r=Ua(t,mt.Short);break;case"mediumDate":r=Ua(t,mt.Medium);break;case"longDate":r=Ua(t,mt.Long);break;case"fullDate":r=Ua(t,mt.Full);break;case"shortTime":r=ja(t,mt.Short);break;case"mediumTime":r=ja(t,mt.Medium);break;case"longTime":r=ja(t,mt.Long);break;case"fullTime":r=ja(t,mt.Full);break;case"short":let i=rr(t,"shortTime"),o=rr(t,"shortDate");r=gd(Ba(t,mt.Short),[i,o]);break;case"medium":let s=rr(t,"mediumTime"),a=rr(t,"mediumDate");r=gd(Ba(t,mt.Medium),[s,a]);break;case"long":let c=rr(t,"longTime"),l=rr(t,"longDate");r=gd(Ba(t,mt.Long),[c,l]);break;case"full":let u=rr(t,"fullTime"),d=rr(t,"fullDate");r=gd(Ba(t,mt.Full),[u,d]);break}return r&&(pd[n][e]=r),r}function gd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function on(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function ek(t,e){return on(t,3).substring(0,e)}function Pe(t,e,n=0,r=!1,i=!1){return function(o,s){let a=tk(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return ek(a,e);let c=Rn(s,vt.MinusSign);return on(a,e,c,r,i)}}function tk(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new b(2301,!1)}}function ce(t,e,n=Xe.Format,r=!1){return function(i,o){return nk(i,o,t,e,n,r)}}function nk(t,e,n,r,i,o){switch(n){case 2:return Lb(e,i,r)[t.getMonth()];case 1:return Fb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=Bb(e),u=$b(e,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,C=s>=h.hours&&a>=h.minutes,y=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(C&&y)return!0}else if(C||y)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return kb(e,i,r)[s<12?0:1];case 3:return Vb(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new b(2302,!1)}}function md(t){return function(e,n,r){let i=-1*r,o=Rn(n,vt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+on(s,2,o)+on(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+on(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+on(s,2,o)+":"+on(Math.abs(i%60),2,o);default:throw new b(2302,!1)}}}var rk=0,yd=4;function ik(t){let e=_d(t,rk,1).getDay();return _d(t,0,1+(e<=yd?yd:yd+7)-e)}function Gb(t){let e=t.getDay(),n=e===0?-3:yd-e;return _d(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Rm(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Gb(n),s=ik(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return on(i,t,Rn(r,vt.MinusSign))}}function vd(t,e=!1){return function(n,r){let o=Gb(n).getFullYear();return on(o,t,Rn(r,vt.MinusSign),e)}}var Nm={};function ok(t){if(Nm[t])return Nm[t];let e;switch(t){case"G":case"GG":case"GGG":e=ce(3,oe.Abbreviated);break;case"GGGG":e=ce(3,oe.Wide);break;case"GGGGG":e=ce(3,oe.Narrow);break;case"y":e=Pe(0,1,0,!1,!0);break;case"yy":e=Pe(0,2,0,!0,!0);break;case"yyy":e=Pe(0,3,0,!1,!0);break;case"yyyy":e=Pe(0,4,0,!1,!0);break;case"Y":e=vd(1);break;case"YY":e=vd(2,!0);break;case"YYY":e=vd(3);break;case"YYYY":e=vd(4);break;case"M":case"L":e=Pe(1,1,1);break;case"MM":case"LL":e=Pe(1,2,1);break;case"MMM":e=ce(2,oe.Abbreviated);break;case"MMMM":e=ce(2,oe.Wide);break;case"MMMMM":e=ce(2,oe.Narrow);break;case"LLL":e=ce(2,oe.Abbreviated,Xe.Standalone);break;case"LLLL":e=ce(2,oe.Wide,Xe.Standalone);break;case"LLLLL":e=ce(2,oe.Narrow,Xe.Standalone);break;case"w":e=Rm(1);break;case"ww":e=Rm(2);break;case"W":e=Rm(1,!0);break;case"d":e=Pe(2,1);break;case"dd":e=Pe(2,2);break;case"c":case"cc":e=Pe(7,1);break;case"ccc":e=ce(1,oe.Abbreviated,Xe.Standalone);break;case"cccc":e=ce(1,oe.Wide,Xe.Standalone);break;case"ccccc":e=ce(1,oe.Narrow,Xe.Standalone);break;case"cccccc":e=ce(1,oe.Short,Xe.Standalone);break;case"E":case"EE":case"EEE":e=ce(1,oe.Abbreviated);break;case"EEEE":e=ce(1,oe.Wide);break;case"EEEEE":e=ce(1,oe.Narrow);break;case"EEEEEE":e=ce(1,oe.Short);break;case"a":case"aa":case"aaa":e=ce(0,oe.Abbreviated);break;case"aaaa":e=ce(0,oe.Wide);break;case"aaaaa":e=ce(0,oe.Narrow);break;case"b":case"bb":case"bbb":e=ce(0,oe.Abbreviated,Xe.Standalone,!0);break;case"bbbb":e=ce(0,oe.Wide,Xe.Standalone,!0);break;case"bbbbb":e=ce(0,oe.Narrow,Xe.Standalone,!0);break;case"B":case"BB":case"BBB":e=ce(0,oe.Abbreviated,Xe.Format,!0);break;case"BBBB":e=ce(0,oe.Wide,Xe.Format,!0);break;case"BBBBB":e=ce(0,oe.Narrow,Xe.Format,!0);break;case"h":e=Pe(3,1,-12);break;case"hh":e=Pe(3,2,-12);break;case"H":e=Pe(3,1);break;case"HH":e=Pe(3,2);break;case"m":e=Pe(4,1);break;case"mm":e=Pe(4,2);break;case"s":e=Pe(5,1);break;case"ss":e=Pe(5,2);break;case"S":e=Pe(6,1);break;case"SS":e=Pe(6,2);break;case"SSS":e=Pe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=md(0);break;case"ZZZZZ":e=md(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=md(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=md(2);break;default:return null}return Nm[t]=e,e}function qb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function sk(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function ak(t,e,n){let i=t.getTimezoneOffset(),o=qb(e,i);return sk(t,-1*(o-i))}function ck(t){if(Mb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return _d(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(JO))return lk(r)}let e=new Date(t);if(!Mb(e))throw new b(2302,!1);return e}function lk(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function Mb(t){return t instanceof Date&&!isNaN(t.valueOf())}var uk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Rb=22,Ed=".",$a="0",dk=";",fk=",",xm="#",Nb="\xA4";function hk(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=Rn(n,vt.Infinity);else{let l=mk(t);s&&(l=gk(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let H=o.match(uk);if(H===null)throw new b(2306,!1);let ae=H[1],X=H[3],zn=H[5];ae!=null&&(u=Pm(ae)),X!=null&&(d=Pm(X)),zn!=null?f=Pm(zn):X!=null&&d>f&&(f=d)}vk(l,d,f);let h=l.digits,g=l.integerLen,C=l.exponent,y=[];for(c=h.every(H=>!H);g<u;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?y=h.splice(g,h.length):(y=h,h=[0]);let w=[];for(h.length>=e.lgSize&&w.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)w.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&w.unshift(h.join("")),a=w.join(Rn(n,r)),y.length&&(a+=Rn(n,i)+y.join("")),C&&(a+=Rn(n,vt.Exponential)+"+"+C)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Yb(t,e,n,r,i){let o=Ub(e,Fm.Currency),s=pk(o,Rn(e,vt.MinusSign));return s.minFrac=zb(r),s.maxFrac=s.minFrac,hk(t,s,e,vt.CurrencyGroup,vt.CurrencyDecimal,i).replace(Nb,n).replace(Nb,"").trim()}function pk(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(dk),i=r[0],o=r[1],s=i.indexOf(Ed)!==-1?i.split(Ed):[i.substring(0,i.lastIndexOf($a)+1),i.substring(i.lastIndexOf($a)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(xm));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===$a?n.minFrac=n.maxFrac=u+1:d===xm?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(fk);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf(xm);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function gk(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function mk(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Ed))>-1&&(e=e.replace(Ed,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===$a;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===$a;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>Rb&&(r=r.splice(0,Rb-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function vk(t,e,n){if(e>n)throw new b(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,g){return f=f+d,g[h]=f<10?f:f-10,c&&(g[h]===0&&h>=l?g.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Pm(t){let e=parseInt(t);if(isNaN(e))throw new b(2305,!1);return e}var Lm=(()=>{class t{_viewContainer;_context=new Cd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){xb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){xb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(R($o),R(rd))};static \u0275dir=$e({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Cd=class{$implicit=null;ngIf=null};function xb(t,e){if(t&&!t.createEmbeddedView)throw new b(2020,!1)}function Vm(t,e){return new b(2100,!1)}var Om=class{createSubscription(e,n,r){return gt(()=>e.subscribe({next:n,error:r}))}dispose(e){gt(()=>e.unsubscribe())}},km=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},yk=new km,_k=new Om,sn=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=m(rt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(nr(n))return yk;if(cd(n))return _k;throw Vm(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(R(Fr,16))};static \u0275pipe=Ra({name:"async",type:t,pure:!1})}return t})();var Ek="mediumDate",Kb=new D(""),Qb=new D(""),Um=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??Ek,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Wb(n,s,o||this.locale,a)}catch(s){throw Vm(t,s.message)}}static \u0275fac=function(r){return new(r||t)(R(kr,16),R(Kb,24),R(Qb,24))};static \u0275pipe=Ra({name:"date",type:t,pure:!0})}return t})();var ir=(()=>{class t{_locale;_defaultCurrencyCode;constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",o,s){if(!Ck(n))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=Hb(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=Ik(n);return Yb(c,s,a,r,o)}catch(c){throw Vm(t,c.message)}}static \u0275fac=function(r){return new(r||t)(R(kr,16),R(bm,16))};static \u0275pipe=Ra({name:"currency",type:t,pure:!0})}return t})();function Ck(t){return!(t==null||t===""||t!==t)}function Ik(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new b(2309,!1);return t}var yt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=tn({type:t});static \u0275inj=Pt({})}return t})();function Ha(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Oi=class{};function Zb(t,e,n){return vm(t,e,n)}var Jb="browser";var wd=new D(""),zm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(x(wd),x(re))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),za=class{_doc;constructor(e){this._doc=e}manager},jm="ng-app-id";function Xb(t){for(let e of t)e.remove()}function e0(t,e){let n=e.createElement("style");return n.textContent=t,n}function bk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${jm}="${e}"],link[${jm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(jm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function $m(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Wm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,bk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,e0);r?.forEach(i=>this.addUsage(i,this.external,$m))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Xb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Xb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,e0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,$m(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(x(Ne),x(Yu),x(Qu,8),x(Rr))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),Bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gm=/%COMP%/g;var n0="%COMP%",Dk=`_nghost-${n0}`,Tk=`_ngcontent-${n0}`,Sk=!0,Ak=new D("",{providedIn:"root",factory:()=>Sk});function Mk(t){return Tk.replace(Gm,t)}function Rk(t){return Dk.replace(Gm,t)}function r0(t,e){return e.map(n=>n.replace(Gm,t))}var qm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Wa(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Id?i.applyToHost(n):i instanceof Ga&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Xn.Emulated:o=new Id(c,l,r,this.appId,u,s,a,d,f);break;case Xn.ShadowDom:return new Hm(c,l,n,r,s,a,this.nonce,d,f);default:o=new Ga(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(x(zm),x(Wm),x(Yu),x(Ak),x(Ne),x(Rr),x(re),x(Qu),x(Na,8))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),Wa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Bm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(t0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(t0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Bm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Bm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tn.DashCase|Tn.Important)?e.style.setProperty(n,r,i&Tn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Bt().getGlobalEventTarget(this.doc,e),!e))throw new b(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function t0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hm=class extends Wa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=r0(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=$m(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ga=class extends Wa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?r0(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Id=class extends Ga{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,l,u),this.contentAttr=Mk(u),this.hostAttr=Rk(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var bd=class t extends Va{supportsDOMEvents=!0;static makeCurrent(){Sm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Nk();return n==null?null:xk(n)}resetBaseElement(){qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ha(document.cookie,e)}},qa=null;function Nk(){return qa=qa||document.head.querySelector("base"),qa?qa.getAttribute("href"):null}function xk(t){return new URL(t,document.baseURI).pathname}var Pk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),o0=(()=>{class t extends za{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(x(Ne))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),i0=["alt","control","meta","shift"],Ok={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},s0=(()=>{class t extends za{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),i0.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Ok[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),i0.forEach(s=>{if(s!==i){let a=kk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(x(Ne))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})();function Ym(t,e){let n=_({rootComponent:t},Fk(e));return Cb(n)}function Fk(t){return{appProviders:[...Bk,...t?.providers??[]],platformProviders:jk}}function Lk(){bd.makeCurrent()}function Vk(){return new yn}function Uk(){return Gg(document),document}var jk=[{provide:Rr,useValue:Jb},{provide:Ku,useValue:Lk,multi:!0},{provide:Ne,useFactory:Uk}];var Bk=[{provide:ia,useValue:"root"},{provide:yn,useFactory:Vk},{provide:wd,useClass:o0,multi:!0,deps:[Ne]},{provide:wd,useClass:s0,multi:!0,deps:[Ne]},qm,Wm,zm,{provide:Mi,useExisting:qm},{provide:Oi,useClass:Pk},[]];var Zo=class{},Ya=class{},Ur=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Td=class{encodeKey(e){return a0(e)}encodeValue(e){return a0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $k(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Hk=/%(\d[a-f0-9])/gi,zk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function a0(t){return encodeURIComponent(t).replace(Hk,(e,n)=>zk[n]??e)}function Dd(t){return`${t}`}var or=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Td,e.fromString){if(e.fromObject)throw new b(2805,!1);this.map=$k(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Dd):[Dd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Dd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Dd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Sd=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Wk(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function c0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function l0(t){return typeof Blob<"u"&&t instanceof Blob}function u0(t){return typeof FormData<"u"&&t instanceof FormData}function Gk(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var d0="Content-Type",f0="Accept",p0="X-Request-URL",g0="text/plain",m0="application/json",qk=`${m0}, ${g0}, */*`,Ko=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(Wk(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new Ur,this.context??=new Sd,!this.params)this.params=new or,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||c0(this.body)||l0(this.body)||u0(this.body)||Gk(this.body)?this.body:this.body instanceof or?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||u0(this.body)?null:l0(this.body)?this.body.type||null:c0(this.body)?null:typeof this.body=="string"?g0:this.body instanceof or?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?m0:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.transferCache??this.transferCache,f=e.timeout??this.timeout,h=e.body!==void 0?e.body:this.body,g=e.withCredentials??this.withCredentials,C=e.reportProgress??this.reportProgress,y=e.headers||this.headers,w=e.params||this.params,H=e.context??this.context;return e.setHeaders!==void 0&&(y=Object.keys(e.setHeaders).reduce((ae,X)=>ae.set(X,e.setHeaders[X]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((ae,X)=>ae.set(X,e.setParams[X]),w)),new t(n,r,h,{params:w,headers:y,context:H,reportProgress:C,responseType:i,withCredentials:g,transferCache:d,keepalive:o,cache:a,priority:s,timeout:f,mode:c,redirect:l,credentials:u})}},Fi=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Fi||{}),Jo=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Ur,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ad=class t extends Jo{constructor(e={}){super(e)}type=Fi.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ka=class t extends Jo{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Fi.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qo=class extends Jo{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Yk=200,Kk=204;function Km(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var Rd=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ko)o=n;else{let c;i.headers instanceof Ur?c=i.headers:c=new Ur(i.headers);let l;i.params&&(i.params instanceof or?l=i.params:l=new or({fromObject:i.params})),o=new Ko(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=A(o).pipe(mr(c=>this.handler.handle(c)));if(n instanceof Ko||i.observe==="events")return s;let a=s.pipe(pt(c=>c instanceof Ka));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(N(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new b(2806,!1);return c.body}));case"blob":return a.pipe(N(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new b(2807,!1);return c.body}));case"text":return a.pipe(N(c=>{if(c.body!==null&&typeof c.body!="string")throw new b(2808,!1);return c.body}));case"json":default:return a.pipe(N(c=>c.body))}case"response":return a;default:throw new b(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new or().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Km(i,r))}post(n,r,i={}){return this.request("POST",n,Km(i,r))}put(n,r,i={}){return this.request("PUT",n,Km(i,r))}static \u0275fac=function(r){return new(r||t)(x(Zo))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})();var Qk=new D("");function v0(t,e){return e(t)}function Zk(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function Jk(t,e,n){return(r,i)=>we(n,()=>e(r,o=>t(o,i)))}var y0=new D(""),Zm=new D(""),_0=new D(""),Jm=new D("",{providedIn:"root",factory:()=>!0});function Xk(){let t=null;return(e,n)=>{t===null&&(t=(m(y0,{optional:!0})??[]).reduceRight(Zk,v0));let r=m(Jn);if(m(Jm)){let o=r.add();return t(e,n).pipe(yr(o))}else return t(e,n)}}var Md=(()=>{class t extends Zo{backend;injector;chain=null;pendingTasks=m(Jn);contributeToStability=m(Jm);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Zm),...this.injector.get(_0,[])]));this.chain=r.reduceRight((i,o)=>Jk(i,o,this.injector),v0)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(yr(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(x(Ya),x(_e))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})();var e1=/^\)\]\}',?\n/,t1=RegExp(`^${p0}:`,"m");function n1(t){return"responseURL"in t&&t.responseURL?t.responseURL:t1.test(t.getAllResponseHeaders())?t.getResponseHeader(p0):null}var Qm=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new b(-2800,!1);let r=this.xhrFactory;return A(null).pipe(ye(()=>new O(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((y,w)=>s.setRequestHeader(y,w.join(","))),n.headers.has(f0)||s.setRequestHeader(f0,qk),!n.headers.has(d0)){let y=n.detectContentTypeHeader();y!==null&&s.setRequestHeader(d0,y)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let y=n.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let y=s.statusText||"OK",w=new Ur(s.getAllResponseHeaders()),H=n1(s)||n.url;return c=new Ad({headers:w,status:s.status,statusText:y,url:H}),c},u=()=>{let{headers:y,status:w,statusText:H,url:ae}=l(),X=null;w!==Kk&&(X=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=X?Yk:0);let zn=w>=200&&w<300;if(n.responseType==="json"&&typeof X=="string"){let Ws=X;X=X.replace(e1,"");try{X=X!==""?JSON.parse(X):null}catch(yl){X=Ws,zn&&(zn=!1,X={error:yl,text:X})}}zn?(o.next(new Ka({body:X,headers:y,status:w,statusText:H,url:ae||void 0})),o.complete()):o.error(new Qo({error:X,headers:y,status:w,statusText:H,url:ae||void 0}))},d=y=>{let{url:w}=l(),H=new Qo({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(H)},f=d;n.timeout&&(f=y=>{let{url:w}=l(),H=new Qo({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:w||void 0});o.error(H)});let h=!1,g=y=>{h||(o.next(l()),h=!0);let w={type:Fi.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),n.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),o.next(w)},C=y=>{let w={type:Fi.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),o.next(w)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",f),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:Fi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(x(Oi))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),E0=new D(""),r1="XSRF-TOKEN",i1=new D("",{providedIn:"root",factory:()=>r1}),o1="X-XSRF-TOKEN",s1=new D("",{providedIn:"root",factory:()=>o1}),Qa=class{},a1=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ha(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(x(Ne),x(i1))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})();function c1(t,e){let n=t.url.toLowerCase();if(!m(E0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=m(Qa).getToken(),i=m(s1);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Xm=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Xm||{});function l1(t,e){return{\u0275kind:t,\u0275providers:e}}function Nd(...t){let e=[Rd,Qm,Md,{provide:Zo,useExisting:Md},{provide:Ya,useFactory:()=>m(Qk,{optional:!0})??m(Qm)},{provide:Zm,useValue:c1,multi:!0},{provide:E0,useValue:!0},{provide:Qa,useClass:a1}];for(let n of t)e.push(...n.\u0275providers);return Ot(e)}var h0=new D("");function C0(){return l1(Xm.LegacyInterceptors,[{provide:h0,useFactory:Xk},{provide:Zm,useExisting:h0,multi:!0}])}var ev=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=tn({type:t});static \u0275inj=Pt({providers:[Nd(C0())]})}return t})();var I0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(x(Ne))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var B="primary",dc=Symbol("RouteTitle"),ov=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ui(t){return new ov(t)}function R0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function f1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Nn(t[n],e[n]))return!1;return!0}function Nn(t,e){let n=t?sv(t):void 0,r=e?sv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!N0(t[i],e[i]))return!1;return!0}function sv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function N0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function x0(t){return t.length>0?t[t.length-1]:null}function ar(t){return ep(t)?t:nr(t)?pe(Promise.resolve(t)):A(t)}var h1={exact:O0,subset:k0},P0={exact:p1,subset:g1,ignored:()=>!0};function w0(t,e,n){return h1[n.paths](t.root,e.root,n.matrixParams)&&P0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function p1(t,e){return Nn(t,e)}function O0(t,e,n){if(!Li(t.segments,e.segments)||!Od(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!O0(t.children[r],e.children[r],n))return!1;return!0}function g1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>N0(t[n],e[n]))}function k0(t,e,n){return F0(t,e,e.segments,n)}function F0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Li(i,n)||e.hasChildren()||!Od(i,n,r))}else if(t.segments.length===n.length){if(!Li(t.segments,n)||!Od(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!k0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Li(t.segments,i)||!Od(t.segments,i,r)||!t.children[B]?!1:F0(t.children[B],e,o,r)}}function Od(t,e,n){return e.every((r,i)=>P0[n](t[i].parameters,r.parameters))}var Pn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ui(this.queryParams),this._queryParamMap}toString(){return y1.serialize(this)}},ee=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kd(this)}},jr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ui(this.parameters),this._parameterMap}toString(){return V0(this)}};function m1(t,e){return Li(t,e)&&t.every((n,r)=>Nn(n.parameters,e[r].parameters))}function Li(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function v1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===B&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==B&&(n=n.concat(e(i,r)))}),n}var fc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>new ji,providedIn:"root"})}return t})(),ji=class{parse(e){let n=new cv(e);return new Pn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Za(e.root,!0)}`,r=C1(e.queryParams),i=typeof e.fragment=="string"?`#${_1(e.fragment)}`:"";return`${n}${r}${i}`}},y1=new ji;function kd(t){return t.segments.map(e=>V0(e)).join("/")}function Za(t,e){if(!t.hasChildren())return kd(t);if(e){let n=t.children[B]?Za(t.children[B],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${Za(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=v1(t,(r,i)=>i===B?[Za(t.children[B],!1)]:[`${i}:${Za(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[B]!=null?`${kd(t)}/${n[0]}`:`${kd(t)}/(${n.join("//")})`}}function L0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xd(t){return L0(t).replace(/%3B/gi,";")}function _1(t){return encodeURI(t)}function av(t){return L0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(t){return decodeURIComponent(t)}function b0(t){return Fd(t.replace(/\+/g,"%20"))}function V0(t){return`${av(t.path)}${E1(t.parameters)}`}function E1(t){return Object.entries(t).map(([e,n])=>`;${av(e)}=${av(n)}`).join("")}function C1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xd(n)}=${xd(i)}`).join("&"):`${xd(n)}=${xd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var I1=/^[^\/()?;#]+/;function tv(t){let e=t.match(I1);return e?e[0]:""}var w1=/^[^\/()?;=#]+/;function b1(t){let e=t.match(w1);return e?e[0]:""}var D1=/^[^=?&#]+/;function T1(t){let e=t.match(D1);return e?e[0]:""}var S1=/^[^&#]+/;function A1(t){let e=t.match(S1);return e?e[0]:""}var cv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[B]=new ee(e,n)),r}parseSegment(){let e=tv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(e),new jr(Fd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=b1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=tv(this.remaining);i&&(r=i,this.capture(r))}e[Fd(n)]=Fd(r)}parseQueryParam(e){let n=T1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=A1(this.remaining);s&&(r=s,this.capture(r))}let i=b0(n),o=b0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new b(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=B);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[B]:new ee([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new b(4011,!1)}};function U0(t){return t.segments.length>0?new ee([],{[B]:t}):t}function j0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=j0(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ee(t.segments,e);return M1(n)}function M1(t){if(t.numberOfChildren===1&&t.children[B]){let e=t.children[B];return new ee(t.segments.concat(e.segments),e.children)}return t}function Br(t){return t instanceof Pn}function B0(t,e,n=null,r=null){let i=$0(t);return H0(i,e,n,r)}function $0(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ee(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=U0(r);return e??i}function H0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return nv(i,i,i,n,r);let o=R1(e);if(o.toRoot())return nv(i,i,new ee([],{}),n,r);let s=N1(o,i,t),a=s.processChildren?Xa(s.segmentGroup,s.index,o.commands):W0(s.segmentGroup,s.index,o.commands);return nv(i,s.segmentGroup,a,n,r)}function Ld(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function nc(t){return typeof t=="object"&&t!=null&&t.outlets}function nv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=z0(t,e,n);let a=U0(j0(s));return new Pn(a,o,i)}function z0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=z0(o,e,n)}),new ee(t.segments,r)}var Vd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ld(r[0]))throw new b(4003,!1);let i=r.find(nc);if(i&&i!==x0(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Vd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Vd(n,e,r)}var ts=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function N1(t,e,n){if(t.isAbsolute)return new ts(e,!0,0);if(!n)return new ts(e,!1,NaN);if(n.parent===null)return new ts(n,!0,0);let r=Ld(t.commands[0])?0:1,i=n.segments.length-1+r;return x1(n,i,t.numberOfDoubleDots)}function x1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new ts(r,!1,i-o)}function P1(t){return nc(t[0])?t[0].outlets:{[B]:t}}function W0(t,e,n){if(t??=new ee([],{}),t.segments.length===0&&t.hasChildren())return Xa(t,e,n);let r=O1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ee(t.segments.slice(0,r.pathIndex),{});return o.children[B]=new ee(t.segments.slice(r.pathIndex),t.children),Xa(o,0,i)}else return r.match&&i.length===0?new ee(t.segments,{}):r.match&&!t.hasChildren()?lv(t,e,n):r.match?Xa(t,0,i):lv(t,e,n)}function Xa(t,e,n){if(n.length===0)return new ee(t.segments,{});{let r=P1(n),i={};if(Object.keys(r).some(o=>o!==B)&&t.children[B]&&t.numberOfChildren===1&&t.children[B].segments.length===0){let o=Xa(t.children[B],e,n);return new ee(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=W0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ee(t.segments,i)}}function O1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(nc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!T0(c,l,s))return o;r+=2}else{if(!T0(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function lv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(nc(o)){let c=k1(o.outlets);return new ee(r,c)}if(i===0&&Ld(n[0])){let c=t.segments[e];r.push(new jr(c.path,D0(n[0]))),i++;continue}let s=nc(o)?o.outlets[B]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ld(a)?(r.push(new jr(s,D0(a))),i+=2):(r.push(new jr(s,{})),i++)}return new ee(r,{})}function k1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=lv(new ee([],{}),0,r))}),e}function D0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function T0(t,e,n){return t==n.path&&Nn(e,n.parameters)}var ec="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),Rt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Bi=class extends Rt{type=He.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends Rt{urlAfterRedirects;type=He.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},at=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(at||{}),rc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(rc||{}),xn=class extends Rt{reason;code;type=He.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},sr=class extends Rt{reason;code;type=He.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},rs=class extends Rt{error;target;type=He.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ic=class extends Rt{urlAfterRedirects;state;type=He.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends Rt{urlAfterRedirects;state;type=He.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends Rt{urlAfterRedirects;state;shouldActivate;type=He.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bd=class extends Rt{urlAfterRedirects;state;type=He.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends Rt{urlAfterRedirects;state;type=He.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class{route;type=He.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zd=class{route;type=He.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wd=class{snapshot;type=He.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{snapshot;type=He.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{snapshot;type=He.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yd=class{snapshot;type=He.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var oc=class{},is=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function F1(t){return!(t instanceof oc)&&!(t instanceof is)}function L1(t,e){return t.providers&&!t._injector&&(t._injector=Ma(t.providers,e,`Route: ${t.path}`)),t._injector??e}function an(t){return t.outlet||B}function V1(t,e){let n=t.filter(r=>an(r)===e);return n.push(...t.filter(r=>an(r)!==e)),n}function as(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Kd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return as(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new cs(this.rootInjector)}},cs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Kd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(x(_e))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Qd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=uv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=uv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=dv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dv(e,this._root).map(n=>n.value)}};function uv(t,e){if(t===e.value)return e;for(let n of e.children){let r=uv(t,n);if(r)return r}return null}function dv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=dv(t,n);if(r.length)return r.unshift(e),r}return[]}var Mt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function es(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var sc=class extends Qd{snapshot;constructor(e,n){super(e),this.snapshot=n,_v(this,e)}toString(){return this.snapshot.toString()}};function G0(t){let e=U1(t),n=new ke([new jr("",{})]),r=new ke({}),i=new ke({}),o=new ke({}),s=new ke(""),a=new cn(n,r,o,s,i,B,t,e.root);return a.snapshot=e.root,new sc(new Mt(a,[]),e)}function U1(t){let e={},n={},r={},i="",o=new Vi([],e,r,i,n,B,t,null,{});return new ac("",new Mt(o,[]))}var cn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(N(l=>l[dc]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(N(e=>Ui(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(N(e=>Ui(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&Y0(i)&&(r.resolve[dc]=i.title),r}var Vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dc]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ui(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ui(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ac=class extends Qd{url;constructor(e,n){super(n),this.url=e,_v(this,n)}toString(){return q0(this._root)}};function _v(t,e){e.value._routerState=t,e.children.forEach(n=>_v(t,n))}function q0(t){let e=t.children.length>0?` { ${t.children.map(q0).join(", ")} } `:"";return`${t.value}${e}`}function rv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Nn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Nn(e.params,n.params)||t.paramsSubject.next(n.params),f1(e.url,n.url)||t.urlSubject.next(n.url),Nn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fv(t,e){let n=Nn(t.params,e.params)&&m1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fv(t.parent,e.parent))}function Y0(t){return typeof t.title=="string"||t.title===null}var K0=new D(""),hc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=B;activateEvents=new me;deactivateEvents=new me;attachEvents=new me;detachEvents=new me;routerOutletData=_b(void 0);parentContexts=m(cs);location=m($o);changeDetector=m(Fr);inputBinder=m(tf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new hv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=$e({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[er]})}return t})(),hv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===cn?this.route:e===cs?this.childContexts:e===K0?this.outletData:this.parent.get(e,n)}},tf=new D("");var Ev=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=it({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&qe(0,"router-outlet")},dependencies:[hc],encapsulation:2})}return t})();function Cv(t){let e=t.children&&t.children.map(Cv),n=e?P(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=Ev),n}function j1(t,e,n){let r=cc(t,e._root,n?n._root:void 0);return new sc(r,e)}function cc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=B1(t,e,n);return new Mt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>cc(t,a)),s}}let r=$1(e.value),i=e.children.map(o=>cc(t,o));return new Mt(r,i)}}function B1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cc(t,r,i);return cc(t,r)})}function $1(t){return new cn(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var os=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Q0="ngNavigationCancelingError";function Jd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Br(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Z0(!1,at.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Z0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Q0]=!0,n.cancellationCode=e,n}function H1(t){return J0(t)&&Br(t.url)}function J0(t){return!!t&&t[Q0]}var z1=(t,e,n,r)=>N(i=>(new pv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),pv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Yd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Gd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(rv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ns=class{component;route;constructor(e,n){this.component=e,this.route=n}};function W1(t,e,n){let r=t._root,i=e?e._root:null;return Ja(r,i,n,[r.value])}function G1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ep(t)?t:e.get(t):r}function Ja(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=es(e);return t.children.forEach(s=>{q1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tc(a,n.getContext(s),i)),i}function q1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Y1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Xd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ja(t,e,a?a.children:null,r,i):Ja(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ns(a.outlet.component,s))}else s&&tc(e,a,i),i.canActivateChecks.push(new Xd(r)),o.component?Ja(t,null,a?a.children:null,r,i):Ja(t,null,n,r,i);return i}function Y1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Li(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Li(t.url,e.url)||!Nn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fv(t,e)||!Nn(t.queryParams,e.queryParams);case"paramsChange":default:return!fv(t,e)}}function tc(t,e,n){let r=es(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tc(s,e.children.getContext(o),n):tc(s,null,n):tc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ns(e.outlet.component,i)):n.canDeactivateChecks.push(new ns(null,i)):n.canDeactivateChecks.push(new ns(null,i))}function pc(t){return typeof t=="function"}function K1(t){return typeof t=="boolean"}function Q1(t){return t&&pc(t.canLoad)}function Z1(t){return t&&pc(t.canActivate)}function J1(t){return t&&pc(t.canActivateChild)}function X1(t){return t&&pc(t.canDeactivate)}function eF(t){return t&&pc(t.canMatch)}function X0(t){return t instanceof Wn||t?.name==="EmptyError"}var Pd=Symbol("INITIAL_VALUE");function ss(){return ye(t=>fi(t.map(e=>e.pipe(Qt(1),ip(Pd)))).pipe(N(e=>{for(let n of e)if(n!==!0){if(n===Pd)return Pd;if(n===!1||tF(n))return n}return!0}),pt(e=>e!==Pd),Qt(1)))}function tF(t){return Br(t)||t instanceof os}function nF(t,e){return Fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?A(P(_({},n),{guardsResult:!0})):rF(s,r,i,t).pipe(Fe(a=>a&&K1(a)?iF(r,o,t,e):A(a)),N(a=>P(_({},n),{guardsResult:a})))})}function rF(t,e,n,r){return pe(t).pipe(Fe(i=>lF(i.component,i.route,n,e,r)),Gn(i=>i!==!0,!0))}function iF(t,e,n,r){return pe(e).pipe(mr(i=>So(sF(i.route.parent,r),oF(i.route,r),cF(t,i.path,n),aF(t,i.route,n))),Gn(i=>i!==!0,!0))}function oF(t,e){return t!==null&&e&&e(new qd(t)),A(!0)}function sF(t,e){return t!==null&&e&&e(new Wd(t)),A(!0)}function aF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(o=>Qs(()=>{let s=as(e)??n,a=ls(o,s),c=Z1(a)?a.canActivate(e,t):we(s,()=>a(e,t));return ar(c).pipe(Gn())}));return A(i).pipe(ss())}function cF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>G1(s)).filter(s=>s!==null).map(s=>Qs(()=>{let a=s.guards.map(c=>{let l=as(s.node)??n,u=ls(c,l),d=J1(u)?u.canActivateChild(r,t):we(l,()=>u(r,t));return ar(d).pipe(Gn())});return A(a).pipe(ss())}));return A(o).pipe(ss())}function lF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return A(!0);let s=o.map(a=>{let c=as(e)??i,l=ls(a,c),u=X1(l)?l.canDeactivate(t,e,n,r):we(c,()=>l(t,e,n,r));return ar(u).pipe(Gn())});return A(s).pipe(ss())}function uF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return A(!0);let o=i.map(s=>{let a=ls(s,t),c=Q1(a)?a.canLoad(e,n):we(t,()=>a(e,n));return ar(c)});return A(o).pipe(ss(),eD(r))}function eD(t){return Gh(je(e=>{if(typeof e!="boolean")throw Jd(t,e)}),N(e=>e===!0))}function dF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return A(!0);let o=i.map(s=>{let a=ls(s,t),c=eF(a)?a.canMatch(e,n):we(t,()=>a(e,n));return ar(c)});return A(o).pipe(ss(),eD(r))}var lc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},uc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Xo(t){return To(new lc(t))}function fF(t){return To(new b(4e3,!1))}function hF(t){return To(Z0(!1,at.GuardRejected))}var gv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[B])return fF(`${e.redirectTo}`);i=i.children[B]}}applyRedirectCommands(e,n,r,i,o){return pF(n,i,o).pipe(N(s=>{if(s instanceof Pn)throw new uc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new uc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Pn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ee(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function pF(t,e,n){if(typeof t=="string")return A(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=e;return ar(we(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var mv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gF(t,e,n,r,i){let o=tD(t,e,n);return o.matched?(r=L1(e,r),dF(r,e,n,i).pipe(N(s=>s===!0?o:_({},mv)))):A(o)}function tD(t,e,n){if(e.path==="**")return mF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},mv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||R0)(n,t,e);if(!i)return _({},mv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mF(t){return{matched:!0,parameters:t.length>0?x0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function S0(t,e,n,r){return n.length>0&&_F(t,n,r)?{segmentGroup:new ee(e,yF(r,new ee(n,t.children))),slicedSegments:[]}:n.length===0&&EF(t,n,r)?{segmentGroup:new ee(t.segments,vF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ee(t.segments,t.children),slicedSegments:n}}function vF(t,e,n,r){let i={};for(let o of n)if(nf(t,e,o)&&!r[an(o)]){let s=new ee([],{});i[an(o)]=s}return _(_({},r),i)}function yF(t,e){let n={};n[B]=e;for(let r of t)if(r.path===""&&an(r)!==B){let i=new ee([],{});n[an(r)]=i}return n}function _F(t,e,n){return n.some(r=>nf(t,e,r)&&an(r)!==B)}function EF(t,e,n){return n.some(r=>nf(t,e,r))}function nf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CF(t,e,n){return e.length===0&&!t.children[n]}var vv=class{};function IF(t,e,n,r,i,o,s="emptyOnly"){return new yv(t,e,n,r,i,s,o).recognize()}var wF=31,yv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new gv(this.urlSerializer,this.urlTree)}noMatchError(e){return new b(4002,`'${e.segmentGroup}'`)}recognize(){let e=S0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(N(({children:n,rootSnapshot:r})=>{let i=new Mt(r,n),o=new ac("",i),s=B0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Vi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,B,n).pipe(N(r=>({children:r,rootSnapshot:n})),xt(r=>{if(r instanceof uc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(N(s=>s instanceof Mt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pe(o).pipe(mr(s=>{let a=r.children[s],c=V1(n,s);return this.processSegmentGroup(e,c,a,s,i)}),rp((s,a)=>(s.push(...a),s)),vr(null),np(),Fe(s=>{if(s===null)return Xo(r);let a=nD(s);return bF(a),A(a)}))}processSegment(e,n,r,i,o,s,a){return pe(n).pipe(mr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(xt(l=>{if(l instanceof lc)return A(null);throw l}))),Gn(c=>!!c),xt(c=>{if(X0(c))return CF(r,i,o)?A(new vv):Xo(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return an(r)!==s&&(s===B||!nf(i,o,r))?Xo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Xo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=tD(n,i,o);if(!c)return Xo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wF&&(this.allowRedirects=!1));let h=new Vi(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,A0(i),an(i),i.component??i._loadedComponent??null,i,M0(i)),g=Zd(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e).pipe(ye(y=>this.applyRedirects.lineralizeSegments(i,y)),Fe(y=>this.processSegment(e,r,n,y.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=gF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ye(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ye(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new Vi(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,A0(r),an(r),r.component??r._loadedComponent??null,r,M0(r)),C=Zd(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(C.params),g.data=Object.freeze(C.data);let{segmentGroup:y,slicedSegments:w}=S0(n,f,h,l);if(w.length===0&&y.hasChildren())return this.processChildren(u,l,y,g).pipe(N(ae=>new Mt(g,ae)));if(l.length===0&&w.length===0)return A(new Mt(g,[]));let H=an(r)===o;return this.processSegment(u,l,y,w,H?B:o,!0,g).pipe(N(ae=>new Mt(g,ae instanceof Mt?[ae]:[])))}))):Xo(n)))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?A({routes:n._loadedRoutes,injector:n._loadedInjector}):uF(e,n,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(e,n).pipe(je(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):hF(n))):A({routes:[],injector:e})}};function bF(t){t.sort((e,n)=>e.value.outlet===B?-1:n.value.outlet===B?1:e.value.outlet.localeCompare(n.value.outlet))}function DF(t){let e=t.value.routeConfig;return e&&e.path===""}function nD(t){let e=[],n=new Set;for(let r of t){if(!DF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nD(r.children);e.push(new Mt(r.value,i))}return e.filter(r=>!n.has(r))}function A0(t){return t.data||{}}function M0(t){return t.resolve||{}}function TF(t,e,n,r,i,o){return Fe(s=>IF(t,e,n,r,s.extractedUrl,i,o).pipe(N(({state:a,tree:c})=>P(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function SF(t,e){return Fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of rD(c))s.add(l);let a=0;return pe(s).pipe(mr(c=>o.has(c)?AF(c,r,t,e):(c.data=Zd(c,c.parent,t).resolve,A(void 0))),je(()=>a++),Ao(1),Fe(c=>a===s.size?A(n):ft))})}function rD(t){let e=t.children.map(n=>rD(n)).flat();return[t,...e]}function AF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Y0(i)&&(o[dc]=i.title),Qs(()=>(t.data=Zd(t,t.parent,n).resolve,MF(o,t,e,r).pipe(N(s=>(t._resolvedData=s,t.data=_(_({},t.data),s),null)))))}function MF(t,e,n,r){let i=sv(t);if(i.length===0)return A({});let o={};return pe(i).pipe(Fe(s=>RF(t[s],e,n,r).pipe(Gn(),je(a=>{if(a instanceof os)throw Jd(new ji,a);o[s]=a}))),Ao(1),N(()=>o),xt(s=>X0(s)?ft:To(s)))}function RF(t,e,n,r){let i=as(e)??r,o=ls(t,i),s=o.resolve?o.resolve(e,n):we(i,()=>o(e,n));return ar(s)}function iv(t){return ye(e=>{let n=t(e);return n?pe(n).pipe(N(()=>e)):A(e)})}var Iv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(n){return n.data[dc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(iD),providedIn:"root"})}return t})(),iD=(()=>{class t extends Iv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(x(I0))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),us=new D("",{providedIn:"root",factory:()=>({})}),gc=new D(""),oD=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=m(wm);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return A(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ar(we(n,()=>r.loadComponent())).pipe(N(aD),je(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),yr(()=>{this.componentLoaders.delete(r)})),o=new Io(i,()=>new Ae).pipe(Co());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sD(r,this.compiler,n,this.onLoadEndListener).pipe(yr(()=>{this.childrenLoaders.delete(r)})),s=new Io(o,()=>new Ae).pipe(Co());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sD(t,e,n,r){return ar(we(n,()=>t.loadChildren())).pipe(N(aD),Fe(i=>i instanceof sd||Array.isArray(i)?A(i):pe(e.compileModuleAsync(i))),N(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(gc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Cv),injector:o}}))}function NF(t){return t&&typeof t=="object"&&"default"in t}function aD(t){return NF(t)?t.default:t}var rf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(xF),providedIn:"root"})}return t})(),xF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cD=new D("");var lD=new D(""),uD=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ae;transitionAbortWithErrorSubject=new Ae;configLoader=m(oD);environmentInjector=m(_e);destroyRef=m(Zn);urlSerializer=m(fc);rootContexts=m(cs);location=m(Yo);inputBindingEnabled=m(tf,{optional:!0})!==null;titleStrategy=m(Iv);options=m(us,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=m(rf);createViewTransition=m(cD,{optional:!0});navigationErrorHandler=m(lD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>A(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Hd(i)),r=i=>this.events.next(new zd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(P(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new ke(null),this.transitions.pipe(pt(r=>r!==null),ye(r=>{let i=!1;return A(r).pipe(ye(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),ft;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?P(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new sr(o.id,this.urlSerializer.serialize(o.rawUrl),c,rc.IgnoredSameUrlNavigation)),o.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return A(o).pipe(ye(c=>(this.events.next(new Bi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ft:Promise.resolve(c))),TF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),je(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=P(_({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new ic(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new Bi(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=G0(this.rootComponentType).snapshot;return this.currentTransition=r=P(_({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:P(_({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,A(r)}else{let c="";return this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,rc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ft}}),je(o=>{let s=new Ud(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),N(o=>(this.currentTransition=r=P(_({},o),{guards:W1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),nF(this.environmentInjector,o=>this.events.next(o)),je(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Jd(this.urlSerializer,o.guardsResult);let s=new jd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),pt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",at.GuardRejected),!1)),iv(o=>{if(o.guards.canActivateChecks.length!==0)return A(o).pipe(je(s=>{let a=new Bd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ye(s=>{let a=!1;return A(s).pipe(SF(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",at.NoDataFromResolver)}}))}),je(s=>{let a=new $d(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),iv(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=as(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(je(u=>{a.component=u}),N(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return fi(s(o.targetSnapshot.root)).pipe(vr(null),Qt(1))}),iv(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?pe(a).pipe(N(()=>r)):A(r)}),N(o=>{let s=j1(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=P(_({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),je(()=>{this.events.next(new oc)}),z1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Qt(1),eu(new O(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(pt(()=>!i&&!r.targetRouterState),je(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",at.Aborted)}))),je({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new On(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),eu(this.transitionAbortWithErrorSubject.pipe(je(o=>{throw o}))),yr(()=>{i||this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),xt(o=>{if(this.destroyed)return r.resolve(!1),ft;if(i=!0,J0(o))this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),H1(o)?this.events.next(new is(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new rs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=we(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof os){let{message:c,cancellationCode:l}=Jd(this.urlSerializer,a);this.events.next(new xn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new is(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return ft}))}))}cancelNavigationTransition(n,r,i){let o=new xn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PF(t){return t!==ec}var dD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(OF),providedIn:"root"})}return t})(),ef=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},OF=(()=>{class t extends ef{static \u0275fac=(()=>{let n;return function(i){return(n||(n=xi(t)))(i||t)}})();static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fD=(()=>{class t{urlSerializer=m(fc);options=m(us,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=m(Yo);urlHandlingStrategy=m(rf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Pn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Pn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=G0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:()=>m(kF),providedIn:"root"})}return t})(),kF=(()=>{class t extends fD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Bi?this.updateStateMemento():n instanceof sr?this.commitTransition(r):n instanceof ic?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof oc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xn&&n.code!==at.SupersededByNewNavigation&&n.code!==at.Redirect?this.restoreHistory(r):n instanceof rs?this.restoreHistory(r,!0):n instanceof On&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=xi(t)))(i||t)}})();static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wv(t,e){t.events.pipe(pt(n=>n instanceof On||n instanceof xn||n instanceof rs||n instanceof sr),N(n=>n instanceof On||n instanceof sr?0:(n instanceof xn?n.code===at.Redirect||n.code===at.SupersededByNewNavigation:!1)?2:1),pt(n=>n!==2),Qt(1)).subscribe(()=>{e()})}var FF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$i=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=m(pm);stateManager=m(fD);options=m(us,{optional:!0})||{};pendingTasks=m(bn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=m(uD);urlSerializer=m(fc);location=m(Yo);urlHandlingStrategy=m(rf);injector=m(_e);_events=new Ae;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=m(dD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=m(gc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!m(tf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xn&&r.code!==at.Redirect&&r.code!==at.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof is){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||PF(i.source)},s);this.scheduleNavigation(a,ec,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}F1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(rt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Cv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=$0(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return H0(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Br(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ec,null,r)}navigate(n,r={skipLocationChange:!1}){return VF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},FF):r===!1?i=_({},LF):i=r,Br(n))return w0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return w0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return wv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new b(4008,!1)}var Ht=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=wn(null);get href(){return gt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ae;applicationErrorHandler=m(rt);options=m(us,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(m(new hd("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof On&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Br(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Br(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(R($i),R(cn),Ta("tabindex"),R(xr),R(tr),R(qo))};static \u0275dir=$e({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Z("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ho("href",i.reactiveHref(),Kg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Lr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Lr],replaceUrl:[2,"replaceUrl","replaceUrl",Lr],routerLink:"routerLink"},features:[er]})}return t})();var jF=new D("");function bv(t,...e){return Ot([{provide:gc,multi:!0,useValue:t},[],{provide:cn,useFactory:BF,deps:[$i]},{provide:ld,multi:!0,useFactory:$F},e.map(n=>n.\u0275providers)])}function BF(t){return t.routerState.root}function $F(){let t=m(Re);return e=>{let n=t.get(Or);if(e!==n.components[0])return;let r=t.get($i),i=t.get(HF);t.get(zF)===1&&r.initialNavigation(),t.get(WF,null,{optional:!0})?.setUpPreloading(),t.get(jF,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HF=new D("",{factory:()=>new Ae}),zF=new D("",{providedIn:"root",factory:()=>1});var WF=new D("");var ID=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(R(xr),R(tr))};static \u0275dir=$e({type:t})}return t})(),GF=(()=>{class t extends ID{static \u0275fac=(()=>{let n;return function(i){return(n||(n=xi(t)))(i||t)}})();static \u0275dir=$e({type:t,features:[Mn]})}return t})(),wD=new D("");var qF={provide:wD,useExisting:Qn(()=>ff),multi:!0};function YF(){let t=Bt()?Bt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var KF=new D(""),ff=(()=>{class t extends ID{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!YF())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(R(xr),R(tr),R(KF,8))};static \u0275dir=$e({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Z("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[zo([qF]),Mn]})}return t})();function QF(t){return t==null||ZF(t)===0}function ZF(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Av=new D(""),bD=new D("");function JF(t){return QF(t.value)?{required:!0}:null}function pD(t){return null}function DD(t){return t!=null}function TD(t){return nr(t)?pe(t):t}function SD(t){let e={};return t.forEach(n=>{e=n!=null?_(_({},e),n):e}),Object.keys(e).length===0?null:e}function AD(t,e){return e.map(n=>n(t))}function XF(t){return!t.validate}function MD(t){return t.map(e=>XF(e)?e:n=>e.validate(n))}function eL(t){if(!t)return null;let e=t.filter(DD);return e.length==0?null:function(n){return SD(AD(n,e))}}function Mv(t){return t!=null?eL(MD(t)):null}function tL(t){if(!t)return null;let e=t.filter(DD);return e.length==0?null:function(n){let r=AD(n,e).map(TD);return tp(r).pipe(N(SD))}}function Rv(t){return t!=null?tL(MD(t)):null}function gD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function nL(t){return t._rawValidators}function rL(t){return t._rawAsyncValidators}function Dv(t){return t?Array.isArray(t)?t:[t]:[]}function sf(t,e){return Array.isArray(t)?t.includes(e):t===e}function mD(t,e){let n=Dv(e);return Dv(t).forEach(i=>{sf(n,i)||n.push(i)}),n}function vD(t,e){return Dv(e).filter(n=>!sf(t,n))}var af=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Rv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},hs=class extends af{name;get formDirective(){return null}get path(){return null}},Cc=class extends af{_parent=null;name=null;valueAccessor=null},cf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},iL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mte=P(_({},iL),{"[class.ng-submitted]":"isSubmitted"}),RD=(()=>{class t extends cf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(R(Cc,2))};static \u0275dir=$e({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Oa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Mn]})}return t})(),ND=(()=>{class t extends cf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(R(hs,10))};static \u0275dir=$e({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Oa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Mn]})}return t})();var mc="VALID",of="INVALID",ds="PENDING",vc="DISABLED",$r=class{},lf=class extends $r{value;source;constructor(e,n){super(),this.value=e,this.source=n}},_c=class extends $r{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Ec=class extends $r{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},fs=class extends $r{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Tv=class extends $r{source;constructor(e){super(),this.source=e}},Sv=class extends $r{source;constructor(e){super(),this.source=e}};function xD(t){return(hf(t)?t.validators:t)||null}function oL(t){return Array.isArray(t)?Mv(t):t||null}function PD(t,e){return(hf(e)?e.asyncValidators:t)||null}function sL(t){return Array.isArray(t)?Rv(t):t||null}function hf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function aL(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function cL(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new b(1002,"")})}var uf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gt(this.statusReactive)}set status(e){gt(()=>this.statusReactive.set(e))}_status=Wo(()=>this.statusReactive());statusReactive=wn(void 0);get valid(){return this.status===mc}get invalid(){return this.status===of}get pending(){return this.status==ds}get disabled(){return this.status===vc}get enabled(){return this.status!==vc}errors;get pristine(){return gt(this.pristineReactive)}set pristine(e){gt(()=>this.pristineReactive.set(e))}_pristine=Wo(()=>this.pristineReactive());pristineReactive=wn(!0);get dirty(){return!this.pristine}get touched(){return gt(this.touchedReactive)}set touched(e){gt(()=>this.touchedReactive.set(e))}_touched=Wo(()=>this.touchedReactive());touchedReactive=wn(!1);get untouched(){return!this.touched}_events=new Ae;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vD(e,this._rawAsyncValidators))}hasValidator(e){return sf(this._rawValidators,e)}hasAsyncValidator(e){return sf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(P(_({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ec(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ec(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(P(_({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new _c(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new _c(!0,r))}markAsPending(e={}){this.status=ds;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(P(_({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vc,this.errors=null,this._forEachChild(i=>{i.disable(P(_({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lf(this.value,r)),this._events.next(new fs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(_({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mc,this._forEachChild(r=>{r.enable(P(_({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(_({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mc||this.status===ds)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lf(this.value,n)),this._events.next(new fs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(P(_({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vc:mc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ds,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=TD(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new me,this.statusChanges=new me}_calculateStatus(){return this._allControlsDisabled()?vc:this.errors?of:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ds)?ds:this._anyControlsHaveStatus(of)?of:mc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new _c(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ec(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=oL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sL(this._rawAsyncValidators)}},df=class extends uf{constructor(e,n,r){super(xD(n),PD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){cL(this,!0,e),Object.keys(e).forEach(r=>{aL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Nv=new D("",{providedIn:"root",factory:()=>xv}),xv="always";function lL(t,e){return[...e.path,t]}function OD(t,e,n=xv){kD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),dL(t,e),hL(t,e),fL(t,e),uL(t,e)}function yD(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function uL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function kD(t,e){let n=nL(t);e.validator!==null?t.setValidators(gD(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=rL(t);e.asyncValidator!==null?t.setAsyncValidators(gD(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();yD(e._rawValidators,i),yD(e._rawAsyncValidators,i)}function dL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&FD(t,e)})}function fL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&FD(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function FD(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function hL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function pL(t,e){t==null,kD(t,e)}function gL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function mL(t){return Object.getPrototypeOf(t.constructor)===GF}function vL(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function yL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ff?n=o:mL(o)?r=o:i=o}),i||r||n||null}var _L={provide:hs,useExisting:Qn(()=>Pv)},yc=Promise.resolve(),Pv=(()=>{class t extends hs{callSetDisabledState;get submitted(){return gt(this.submittedReactive)}_submitted=Wo(()=>this.submittedReactive());submittedReactive=wn(!1);_directives=new Set;form;ngSubmit=new me;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new df({},Mv(n),Rv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){yc.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),OD(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){yc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){yc.then(()=>{let r=this._findContainer(n.path),i=new df({});pL(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){yc.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){yc.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),vL(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Tv(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Sv(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(R(Av,10),R(bD,10),R(Nv,8))};static \u0275dir=$e({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Z("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[zo([_L]),Mn]})}return t})();function _D(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ED(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var EL=class extends uf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(xD(n),PD(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ED(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_D(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_D(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ED(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CL={provide:Cc,useExisting:Qn(()=>Ov)},CD=Promise.resolve(),Ov=(()=>{class t extends Cc{_changeDetectorRef;callSetDisabledState;control=new EL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new me;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=yL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),gL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){OD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){CD.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Lr(r);CD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?lL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(R(hs,9),R(Av,10),R(bD,10),R(wD,10),R(Fr,8),R(Nv,8))};static \u0275dir=$e({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[zo([CL]),Mn,er]})}return t})();var LD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=$e({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var IL=(()=>{class t{_validator=pD;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pD,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=$e({type:t,features:[er]})}return t})();var wL={provide:Av,useExisting:Qn(()=>kv),multi:!0};var kv=(()=>{class t extends IL{required;inputName="required";normalizeInput=Lr;createValidator=n=>JF;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=xi(t)))(i||t)}})();static \u0275dir=$e({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ho("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[zo([wL]),Mn]})}return t})();var bL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=tn({type:t});static \u0275inj=Pt({})}return t})();var ps=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Nv,useValue:n.callSetDisabledState??xv}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=tn({type:t});static \u0275inj=Pt({imports:[bL]})}return t})();var VD=()=>{};var Lv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw Hi(e)},Hi=function(t){return new Error("Firebase Database ("+Lv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var BD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},vs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Vv;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},jv=function(t){let e=BD(t);return vs.encodeByteArray(e,!0)},wc=function(t){return jv(t).replace(/\./g,"")},gs=function(t){try{return vs.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $D(t){return HD(void 0,t)}function HD(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!SL(n)||(t[n]=HD(t[n],e[n]));return t}function SL(t){return t!=="__proto__"}function zD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AL=()=>zD().__FIREBASE_DEFAULTS__,ML=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&gs(t[1]);return e&&JSON.parse(e)},Bv=()=>{try{return VD()||AL()||ML()||RL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$v=t=>{var e,n;return(n=(e=Bv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WD=t=>{let e=$v(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hv=()=>{var t;return(t=Bv())===null||t===void 0?void 0:t.config},zv=t=>{var e;return(e=Bv())===null||e===void 0?void 0:e[`_${t}`]};var zt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function gf(t){return p(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function GD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wc(JSON.stringify(n)),wc(JSON.stringify(s)),""].join(".")}var Ic={};function NL(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ic))Ic[e]?t.emulator.push(e):t.prod.push(e);return t}function xL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var UD=!1;function mf(t,e){if(typeof window>"u"||typeof document>"u"||!Hr(window.location.host)||Ic[t]===e||Ic[t]||UD)return;Ic[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=NL().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{UD=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=xL(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),C=n("learnmore"),y=document.getElementById(C)||document.createElement("a"),w=n("preprendIcon"),H=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let ae=f.element;a(ae),u(y,C);let X=l();c(H,w),ae.append(H,g,y,X),document.body.appendChild(ae)}o?(g.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function qD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KD(){let t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kn(){return Lv.NODE_CLIENT===!0||Lv.NODE_ADMIN===!0}function yf(){try{return typeof indexedDB=="object"}catch{return!1}}function QD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var PL="FirebaseError",ln=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}},un=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?OL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ln(i,a,r)}};function OL(t,e){return t.replace(kL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kL=/\{\$([^}]+)}/g;function ms(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}var ZD=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=ms(gs(o[0])||""),n=ms(gs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var JD=function(t){let e=ZD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},XD=function(t){let e=ZD(t).claims;return typeof e=="object"&&e.admin===!0};function dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Fn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(jD(o)&&jD(s)){if(!Fn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jD(t){return t!==null&&typeof t=="object"}function Wi(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ys(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function _s(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var pf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function eT(t,e){let n=new Uv(t,e);return n.subscribe.bind(n)}var Uv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fv),i.error===void 0&&(i.error=Fv),i.complete===void 0&&(i.complete=Fv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fv(){}function Sc(t,e){return`${t} failed: ${e} argument `}var tT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ac=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Cte=4*60*60*1e3;function Ve(t){return t&&t._delegate?t._delegate:t}var ct=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Gi="[DEFAULT]";var _f=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VL(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LL(t){return t===Gi?void 0:t}function VL(t){return t.instantiationMode==="EAGER"}var Mc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _f(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var UL=[],ie=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ie||{}),jL={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},BL=ie.INFO,$L={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},HL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=$L[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ln=class{constructor(e){this.name=e,this._logLevel=BL,this._logHandler=HL,this._userLogHandler=null,UL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var zL=(t,e)=>e.some(n=>t instanceof n),nT,rT;function WL(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GL(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var iT=new WeakMap,Gv=new WeakMap,oT=new WeakMap,Wv=new WeakMap,Yv=new WeakMap;function qL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Vn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&iT.set(n,t)}).catch(()=>{}),Yv.set(e,t),e}function YL(t){if(Gv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Gv.set(t,e)}var qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sT(t){qv=t(qv)}function KL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ef(this),e,...n);return oT.set(r,e.sort?e.sort():[e]),Vn(r)}:GL().includes(t)?function(...e){return t.apply(Ef(this),e),Vn(iT.get(this))}:function(...e){return Vn(t.apply(Ef(this),e))}}function QL(t){return typeof t=="function"?KL(t):(t instanceof IDBTransaction&&YL(t),zL(t,WL())?new Proxy(t,qv):t)}function Vn(t){if(t instanceof IDBRequest)return qL(t);if(Wv.has(t))return Wv.get(t);let e=QL(t);return e!==t&&(Wv.set(t,e),Yv.set(e,t)),e}var Ef=t=>Yv.get(t);function cT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Vn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Vn(s.result),c.oldVersion,c.newVersion,Vn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZL=["get","getKey","getAll","getAllKeys","count"],JL=["put","add","delete","clear"],Kv=new Map;function aT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kv.get(e))return Kv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZL.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Kv.set(e,o),o}sT(t=>P(_({},t),{get:(e,n,r)=>aT(e,n)||t.get(e,n,r),has:(e,n)=>!!aT(e,n)||t.has(e,n)}));var Zv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function XL(t){let e=t.getComponent();return e?.type==="VERSION"}var Jv="@firebase/app",lT="0.13.2";var cr=new Ln("@firebase/app"),eV="@firebase/app-compat",tV="@firebase/analytics-compat",nV="@firebase/analytics",rV="@firebase/app-check-compat",iV="@firebase/app-check",oV="@firebase/auth",sV="@firebase/auth-compat",aV="@firebase/database",cV="@firebase/data-connect",lV="@firebase/database-compat",uV="@firebase/functions",dV="@firebase/functions-compat",fV="@firebase/installations",hV="@firebase/installations-compat",pV="@firebase/messaging",gV="@firebase/messaging-compat",mV="@firebase/performance",vV="@firebase/performance-compat",yV="@firebase/remote-config",_V="@firebase/remote-config-compat",EV="@firebase/storage",CV="@firebase/storage-compat",IV="@firebase/firestore",wV="@firebase/ai",bV="@firebase/firestore-compat",DV="firebase",TV="11.10.0";var Xv="[DEFAULT]",SV={[Jv]:"fire-core",[eV]:"fire-core-compat",[nV]:"fire-analytics",[tV]:"fire-analytics-compat",[iV]:"fire-app-check",[rV]:"fire-app-check-compat",[oV]:"fire-auth",[sV]:"fire-auth-compat",[aV]:"fire-rtdb",[cV]:"fire-data-connect",[lV]:"fire-rtdb-compat",[uV]:"fire-fn",[dV]:"fire-fn-compat",[fV]:"fire-iid",[hV]:"fire-iid-compat",[pV]:"fire-fcm",[gV]:"fire-fcm-compat",[mV]:"fire-perf",[vV]:"fire-perf-compat",[yV]:"fire-rc",[_V]:"fire-rc-compat",[EV]:"fire-gcs",[CV]:"fire-gcs-compat",[IV]:"fire-fst",[bV]:"fire-fst-compat",[wV]:"fire-vertex","fire-js":"fire-js",[DV]:"fire-js-all"};var Rc=new Map,AV=new Map,ey=new Map;function uT(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fn(t){let e=t.name;if(ey.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,t);for(let n of Rc.values())uT(n,t);for(let n of AV.values())uT(n,t);return!0}function Es(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _t(t){return t==null?!1:t.settings!==void 0}var MV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new un("app","Firebase",MV);var ty=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}};var Wr=TV;function iy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Xv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw zr.create("bad-app-name",{appName:String(i)});if(n||(n=Hv()),!n)throw zr.create("no-options");let o=Rc.get(i);if(o){if(Fn(n,o.options)&&Fn(r,o.config))return o;throw zr.create("duplicate-app",{appName:i})}let s=new Mc(i);for(let c of ey.values())s.addComponent(c);let a=new ty(n,r,s);return Rc.set(i,a),a}function qi(t=Xv){let e=Rc.get(t);if(!e&&t===Xv&&Hv())return iy();if(!e)throw zr.create("no-app",{appName:t});return e}function Cf(){return Array.from(Rc.values())}function Ee(t,e,n){var r;let i=(r=SV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(a.join(" "));return}fn(new ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RV="firebase-heartbeat-database",NV=1,Nc="firebase-heartbeat-store",Qv=null;function pT(){return Qv||(Qv=cT(RV,NV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),Qv}function xV(t){return p(this,null,function*(){try{let n=(yield pT()).transaction(Nc),r=yield n.objectStore(Nc).get(gT(t));return yield n.done,r}catch(e){if(e instanceof ln)cr.warn(e.message);else{let n=zr.create("idb-get",{originalErrorMessage:e?.message});cr.warn(n.message)}}})}function dT(t,e){return p(this,null,function*(){try{let r=(yield pT()).transaction(Nc,"readwrite");yield r.objectStore(Nc).put(e,gT(t)),yield r.done}catch(n){if(n instanceof ln)cr.warn(n.message);else{let r=zr.create("idb-set",{originalErrorMessage:n?.message});cr.warn(r.message)}}})}function gT(t){return`${t.name}!${t.options.appId}`}var PV=1024,OV=30,ny=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ry(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>OV){let s=FV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cr.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=fT(),{heartbeatsToSend:r,unsentEntries:i}=kV(this._heartbeatsCache.heartbeats),o=wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return cr.warn(n),""}})}};function fT(){return new Date().toISOString().substring(0,10)}function kV(t,e=PV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),hT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ry=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return yf()?QD().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield xV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function hT(t){return wc(JSON.stringify({version:2,heartbeats:t})).length}function FV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function LV(t){fn(new ct("platform-logger",e=>new Zv(e),"PRIVATE")),fn(new ct("heartbeat",e=>new ny(e),"PRIVATE")),Ee(Jv,lT,t),Ee(Jv,lT,"esm2017"),Ee("fire-js","")}LV("");var mT="@firebase/database",vT="1.0.20";var a_="";function VV(t){a_=t}var fy=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ms(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var hy=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return dn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var KT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fy(e)}}catch{}return new hy},Ki=KT("localStorage"),py=KT("sessionStorage");var ws=new Ln("@firebase/database"),UV=function(){let t=1;return function(){return t++}}(),QT=function(t){let e=tT(t),n=new pf;n.update(e);let r=n.digest();return vs.encodeByteArray(r)},Zc=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Zc.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e},Qi=null,yT=!0,jV=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ws.logLevel=ie.VERBOSE,Qi=ws.log.bind(ws),e&&py.set("logging_enabled",!0)):typeof t=="function"?Qi=t:(Qi=null,py.remove("logging_enabled"))},Ye=function(...t){if(yT===!0&&(yT=!1,Qi===null&&py.get("logging_enabled")===!0&&jV(!0)),Qi){let e=Zc.apply(null,t);Qi(e)}},Jc=function(t){return function(...e){Ye(t,...e)}},gy=function(...t){let e="FIREBASE INTERNAL ERROR: "+Zc(...t);ws.error(e)},lr=function(...t){let e=`FIREBASE FATAL ERROR: ${Zc(...t)}`;throw ws.error(e),new Error(e)},ut=function(...t){let e="FIREBASE WARNING: "+Zc(...t);ws.warn(e)},BV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ut("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},c_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$V=function(t){if(kn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ds="[MIN_NAME]",Zi="[MAX_NAME]",eo=function(t,e){if(t===e)return 0;if(t===Ds||e===Zi)return-1;if(e===Ds||t===Zi)return 1;{let n=_T(t),r=_T(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},HV=function(t,e){return t===e?0:t<e?-1:1},xc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},l_=function(t){if(typeof t!="object"||t===null)return Oe(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=l_(t[e[r]]);return n+="}",n},ZT=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ke(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var JT=function(t){I(!c_(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},zV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},WV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function GV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var qV=new RegExp("^-?(0*)\\d{1,10}$"),YV=-2147483648,KV=2147483647,_T=function(t){if(qV.test(t)){let e=Number(t);if(e>=YV&&e<=KV)return e}return null},Ps=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ut("Exception was thrown by user callback.",n),e},Math.floor(0))}},QV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var my=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,_t(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ut(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var vy=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ut(e)}},Vc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),wf="5",XT="v",eS="s",tS="r",nS="f",rS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iS="ls",oS="p",yy="ac",sS="websocket",aS="long_polling";var bf=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ki.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ki.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function ZV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cS(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===sS)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===aS)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ZV(t)&&(n.ns=t.namespace);let i=[];return Ke(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var _y=class{constructor(){this.counters_={}}incrementCounter(e,n=1){dn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $D(this.counters_)}};var oy={},sy={};function u_(t){let e=t.toString();return oy[e]||(oy[e]=new _y),oy[e]}function JV(t,e){let n=t.toString();return sy[n]||(sy[n]=e()),sy[n]}var Ey=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ps(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var ET="start",XV="close",e2="pLPCommand",t2="pRTLPCB",lS="id",uS="pw",dS="ser",n2="cb",r2="seg",i2="ts",o2="d",s2="dframe",fS=1870,hS=30,a2=fS-hS,c2=25e3,l2=3e4,Cy=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jc(e),this.stats_=u_(n),this.urlFn=c=>(this.appCheckToken&&(c[yy]=this.appCheckToken),cS(n,aS,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ey(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(l2)),$V(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Iy((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===ET)this.id=a,this.password=c;else if(s===XV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[ET]="t",r[dS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[n2]=this.scriptTagHolder.uniqueCallbackIdentifier),r[XT]=wf,this.transportSessionId&&(r[eS]=this.transportSessionId),this.lastSessionId&&(r[iS]=this.lastSessionId),this.applicationId&&(r[oS]=this.applicationId),this.appCheckToken&&(r[yy]=this.appCheckToken),typeof location<"u"&&location.hostname&&rS.test(location.hostname)&&(r[tS]=nS);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return kn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zV()&&!WV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=jv(n),i=ZT(r,a2);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(kn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[s2]="t",r[lS]=e,r[uS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Iy=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,kn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=UV(),window[e2+this.uniqueCallbackIdentifier]=e,window[t2+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ye("frame writing exception"),a.stack&&Ye(a.stack),Ye(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ye("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[lS]=this.myID,e[uS]=this.myPW,e[dS]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hS+r.length<=fS;){let s=this.pendingSegs.shift();r=r+"&"+r2+i+"="+s.seg+"&"+i2+i+"="+s.ts+"&"+o2+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(c2)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){kn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var u2=16384,d2=45e3,Df=null;typeof MozWebSocket<"u"?Df=MozWebSocket:typeof WebSocket<"u"&&(Df=WebSocket);var Pc=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jc(this.connId),this.stats_=u_(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[XT]=wf,!kn()&&typeof location<"u"&&location.hostname&&rS.test(location.hostname)&&(a[tS]=nS),r&&(a[eS]=r),i&&(a[iS]=i),o&&(a[yy]=o),s&&(a[oS]=s),cS(n,sS,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ki.set("previous_websocket_failure",!0);try{let i;if(kn()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wf}/${a_}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Df(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Df!==null&&!t.forceDisallow_}static previouslyFailed(){return Ki.isInMemoryStorage||Ki.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ki.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ms(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Oe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=ZT(r,u2);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(d2))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),f2=(()=>{class t{static get ALL_TRANSPORTS(){return[Cy,Pc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Pc&&Pc.isAvailable(),i=r&&!Pc.previouslyFailed();if(n.webSocketOnly&&(r||ut("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pc];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),h2=6e4,p2=5e3,g2=10*1024,m2=100*1024,ay="t",CT="d",v2="s",IT="r",y2="e",wT="o",bT="a",DT="n",TT="p",_2="h",wy=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jc("c:"+this.id+":"),this.transportManager_=new f2(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>m2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>g2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ay in e){let n=e[ay];n===bT?this.upgradeIfSecondaryHealthy_():n===IT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=xc("t",e),r=xc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:TT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:bT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=xc("t",e),r=xc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=xc(ay,e);if(CT in e){let r=e[CT];if(n===_2){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===DT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===v2?this.onConnectionShutdown_(r):n===IT?this.onReset_(r):n===y2?gy("Server Error: "+r):n===wT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gy("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wf!==r&&ut("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Lc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(h2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(p2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:TT,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ki.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Tf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Sf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Af=class t extends Sf{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var ST=32,AT=768,ne=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function J(){return new ne("")}function W(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Kr(t){return t.pieces_.length-t.pieceNum_}function le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function d_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function E2(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function $c(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pS(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function Ce(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ne(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function lt(t,e){let n=W(t),r=W(e);if(n===null)return e;if(n===r)return lt(le(t),le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function C2(t,e){let n=$c(t,0),r=$c(e,0);for(let i=0;i<n.length&&i<r.length;i++){let o=eo(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function f_(t,e){if(Kr(t)!==Kr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Wt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Kr(t)>Kr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var by=class{constructor(e,n){this.errorPrefix_=n,this.parts_=$c(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ac(this.parts_[r]);gS(this)}};function I2(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ac(e),gS(t)}function w2(t){let e=t.parts_.pop();t.byteLength_-=Ac(e),t.parts_.length>0&&(t.byteLength_-=1)}function gS(t){if(t.byteLength_>AT)throw new Error(t.errorPrefix_+"has a key path longer than "+AT+" bytes ("+t.byteLength_+").");if(t.parts_.length>ST)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ST+") or object contains a cycle "+Yi(t))}function Yi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Dy=class t extends Sf{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var Oc=1e3,b2=60*5*1e3,MT=30*1e3,D2=1.3,T2=3e4,S2="server_kill",RT=3,h_=(()=>{class t extends Tf{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Jc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oc,this.maxReconnectDelay_=b2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!kn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Dy.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Af.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Oe(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new zt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&dn(n,"w")){let i=zi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ut(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||XD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=JD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Oe(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):gy("Unrecognized action received from server: "+Oe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>T2&&(this.reconnectDelay_=Oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*D2)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ye("getToken() completed but was canceled"):(Ye("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new wy(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{ut(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(S2)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ut(f),l())}}})}interrupt(n){Ye("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ye("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Dc(this.interruptReasons_)&&(this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>l_(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ne(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Ye("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=RT&&(this.reconnectDelay_=MT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ye("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=RT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";kn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+a_.replace(/\./g,"-")]=1,bc()?n["framework.cordova"]=1:vf()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Af.getInstance().currentlyOnline();return Dc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),G=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ts=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new G(Ds,e),i=new G(Ds,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var If,Mf=class extends Ts{static get __EMPTY_NODE(){return If}static set __EMPTY_NODE(e){If=e}compare(e,n){return eo(e.name,n.name)}isDefinedOn(e){throw Hi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return G.MIN}maxPost(){return new G(Zi,If)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,If)}toString(){return".key"}},bs=new Mf;var Is=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},hn=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Gt.EMPTY_NODE,this.right=s??Gt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Ty=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new hn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Gt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,hn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Is(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Is(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Is(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Is(this.root_,null,this.comparator_,!0,e)}};Gt.EMPTY_NODE=new Ty;function A2(t,e){return eo(t.name,e.name)}function p_(t,e){return eo(t,e)}var Sy;function M2(t){Sy=t}var mS=function(t){return typeof t=="number"?"number:"+JT(t):"string:"+t},vS=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&dn(e,".sv"),"Priority must be a string or number.")}else I(t===Sy||t.isEmpty(),"priority of unexpected type.");I(t===Sy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var NT,Ss=(()=>{class t{static set __childrenNodeConstructor(n){NT=n}static get __childrenNodeConstructor(){return NT}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),vS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Y(n)?this:W(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=W(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||Kr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+mS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=JT(this.value_):n+=this.value_,this.lazyHash_=QT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return I(o>=0,"Unknown leaf type: "+r),I(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),yS,_S;function R2(t){yS=t}function N2(t){_S=t}var Ay=class extends Ts{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?eo(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(Zi,new Ss("[PRIORITY-POST]",_S))}makePost(e,n){let r=yS(e);return new G(n,new Ss("[PRIORITY-POST]",r))}toString(){return".priority"}},Ie=new Ay;var x2=Math.log(2),My=class{constructor(e){let n=o=>parseInt(Math.log(o)/x2,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Rf=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new hn(f,d.node,hn.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),C=i(h+1,l);return d=t[h],f=n?n(d):d,new hn(f,d.node,hn.BLACK,g,C)}},o=function(c){let l=null,u=null,d=t.length,f=function(g,C){let y=d-g,w=d;d-=g;let H=i(y+1,w),ae=t[y],X=n?n(ae):ae;h(new hn(X,ae.node,C,null,H))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let C=c.nextBitIsOne(),y=Math.pow(2,c.count-(g+1));C?f(y,hn.BLACK):(f(y,hn.BLACK),f(y,hn.RED))}return u},s=new My(t.length),a=o(s);return new Gt(r||e,a)};var cy,Cs={},As=class t{static get Default(){return I(Cs&&Ie,"ChildrenNode.ts has not been loaded"),cy=cy||new t({".priority":Cs},{".priority":Ie}),cy}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=zi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gt?n:null}hasIndex(e){return dn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Rf(r,e.getCompare()):a=Cs;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Tc(this.indexes_,(i,o)=>{let s=zi(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),i===Cs)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Rf(a,s.getCompare())}else return Cs;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new G(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Tc(this.indexes_,i=>{if(i===Cs)return i;{let o=n.get(e.name);return o?i.remove(new G(e.name,o)):i}});return new t(r,this.indexSet_)}};var kc,$=(()=>{class t{static get EMPTY_NODE(){return kc||(kc=new t(new Gt(p_),null,As.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&vS(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?kc:r}}getChild(n){let r=W(n);return r===null?this:this.getImmediateChild(r).getChild(le(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?kc:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=W(n);if(i===null)return r;{I(W(n)!==".priority"||Kr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(le(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Ie,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+mS(this.getPriority().val())+":"),this.forEachChild(Ie,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":QT(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Xc?-1:0}withIndex(n){if(n===bs||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===bs||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ie),o=r.getIterator(Ie),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===bs?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Ry=class extends ${constructor(){super(new Gt(p_),$.EMPTY_NODE,As.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $.EMPTY_NODE}isEmpty(){return!1}},Xc=new Ry;Object.defineProperties(G,{MIN:{value:new G(Ds,$.EMPTY_NODE)},MAX:{value:new G(Zi,Xc)}});Mf.__EMPTY_NODE=$.EMPTY_NODE;Ss.__childrenNodeConstructor=$;M2(Xc);N2(Xc);var P2=!0;function Ue(t,e=null){if(t===null)return $.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ss(n,Ue(e))}if(!(t instanceof Array)&&P2){let n=[],r=!1;if(Ke(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ue(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return $.EMPTY_NODE;let o=Rf(n,A2,s=>s.name,p_);if(r){let s=Rf(n,Ie.getCompare());return new $(o,Ue(e),new As({".priority":s},{".priority":Ie}))}else return new $(o,Ue(e),As.Default)}else{let n=$.EMPTY_NODE;return Ke(t,(r,i)=>{if(dn(t,r)&&r.substring(0,1)!=="."){let o=Ue(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ue(e))}}R2(Ue);var Ny=class extends Ts{constructor(e){super(),this.indexPath_=e,I(!Y(e)&&W(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?eo(e.name,n.name):o}makePost(e,n){let r=Ue(e),i=$.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let e=$.EMPTY_NODE.updateChild(this.indexPath_,Xc);return new G(Zi,e)}toString(){return $c(this.indexPath_,0).join("/")}};var xy=class extends Ts{compare(e,n){let r=e.node.compareTo(n.node);return r===0?eo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,n){let r=Ue(e);return new G(n,r)}toString(){return".value"}},O2=new xy;function ES(t){return{type:"value",snapshotNode:t}}function Ms(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Hc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function zc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function k2(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Wc=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Hc(n,a)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ms(n,r)):s.trackChildChange(zc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ie,(i,o)=>{n.hasChild(i)||r.trackChildChange(Hc(i,o))}),n.isLeafNode()||n.forEachChild(Ie,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(zc(i,o,s))}else r.trackChildChange(Ms(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?$.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Nf=class t{constructor(e){this.indexedFilter_=new Wc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new G(n,r))||(r=$.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=$.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority($.EMPTY_NODE);let o=this;return n.forEachChild(Ie,(s,a)=>{o.matches(new G(s,a))||(i=i.updateImmediateChild(s,$.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Py=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Nf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new G(n,r))||(r=$.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=$.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=$.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority($.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,$.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;I(a.numChildren()===this.limit_,"");let c=new G(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(zc(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Hc(n,d));let C=a.updateImmediateChild(n,$.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Ms(f.name,f.node)),C.updateImmediateChild(f.name,f.node)):C}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Hc(l.name,l.node)),o.trackChildChange(Ms(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,$.EMPTY_NODE)):e}};var Oy=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ds}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function F2(t){return t.loadsAllData()?new Wc(t.getIndex()):t.hasLimit()?new Py(t):new Nf(t)}function xT(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Ie?n="$priority":t.index_===O2?n="$value":t.index_===bs?n="$key":(I(t.index_ instanceof Ny,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function PT(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ie&&(e.i=t.index_.toString()),e}var ky=class t extends Tf{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Jc("p:rest:"),this.listens_={}}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=xT(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),zi(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=xT(e._queryParams),r=e._path.toString(),i=new zt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wi(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ms(a.responseText)}catch{ut("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ut("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Fy=class{constructor(){this.rootNode_=$.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function xf(){return{value:null,children:new Map}}function CS(t,e,n){if(Y(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=W(e);t.children.has(r)||t.children.set(r,xf());let i=t.children.get(r);e=le(e),CS(i,e,n)}}function Ly(t,e,n){t.value!==null?n(e,t.value):L2(t,(r,i)=>{let o=new ne(e.toString()+"/"+r);Ly(i,o,n)})}function L2(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Vy=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ke(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var OT=10*1e3,V2=30*1e3,U2=5*60*1e3,Uy=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Vy(e);let r=OT+(V2-OT)*Math.random();Lc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Ke(e,(i,o)=>{o>0&&dn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Lc(this.reportStats_.bind(this),Math.floor(Math.random()*2*U2))}};var Un=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Un||{});function g_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function m_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function v_(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var jy=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Un.ACK_USER_WRITE,this.source=g_()}operationForChild(e){if(Y(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ne(e));return new t(J(),n,this.revert)}}else return I(W(this.path)===e,"operationForChild called for unrelated child."),new t(le(this.path),this.affectedTree,this.revert)}};var Pf=class t{constructor(e,n){this.source=e,this.path=n,this.type=Un.LISTEN_COMPLETE}operationForChild(e){return Y(this.path)?new t(this.source,J()):new t(this.source,le(this.path))}};var Rs=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Un.OVERWRITE}operationForChild(e){return Y(this.path)?new t(this.source,J(),this.snap.getImmediateChild(e)):new t(this.source,le(this.path),this.snap)}};var Gc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Un.MERGE}operationForChild(e){if(Y(this.path)){let n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new Rs(this.source,J(),n.value):new t(this.source,J(),n)}else return I(W(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;let n=W(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var By=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function j2(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(k2(s.childName,s.snapshotNode))}),Fc(t,i,"child_removed",e,r,n),Fc(t,i,"child_added",e,r,n),Fc(t,i,"child_moved",o,r,n),Fc(t,i,"child_changed",e,r,n),Fc(t,i,"value",e,r,n),i}function Fc(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>$2(t,a,c)),s.forEach(a=>{let c=B2(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function B2(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function $2(t,e,n){if(e.childName==null||n.childName==null)throw Hi("Should only compare child_ events.");let r=new G(e.childName,e.snapshotNode),i=new G(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function qf(t,e){return{eventCache:t,serverCache:e}}function Uc(t,e,n,r){return qf(new jn(e,n,r),t.serverCache)}function IS(t,e,n,r){return qf(t.eventCache,new jn(e,n,r))}function Of(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ji(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var ly,H2=()=>(ly||(ly=new Gt(HV)),ly),dt=class t{static fromObject(e){let n=new t(null);return Ke(e,(r,i)=>{n=n.set(new ne(r),i)}),n}constructor(e,n=H2()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:J(),value:this.value};if(Y(e))return null;{let r=W(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(le(e),n);return o!=null?{path:Ce(new ne(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Y(e))return this;{let n=W(e),r=this.children.get(n);return r!==null?r.subtree(le(e)):new t(null)}}set(e,n){if(Y(e))return new t(n,this.children);{let r=W(e),o=(this.children.get(r)||new t(null)).set(le(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=W(e),r=this.children.get(n);if(r){let i=r.remove(le(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(Y(e))return this.value;{let n=W(e),r=this.children.get(n);return r?r.get(le(e)):null}}setTree(e,n){if(Y(e))return n;{let r=W(e),o=(this.children.get(r)||new t(null)).setTree(le(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(J(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ce(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,J(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Y(e))return null;{let o=W(e),s=this.children.get(o);return s?s.findOnPath_(le(e),Ce(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,J(),n)}foreachOnPath_(e,n,r){if(Y(e))return this;{this.value&&r(n,this.value);let i=W(e),o=this.children.get(i);return o?o.foreachOnPath_(le(e),Ce(n,i),r):new t(null)}}foreach(e){this.foreach_(J(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ce(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var pn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new dt(null))}};function jc(t,e,n){if(Y(e))return new pn(new dt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=lt(i,e);return o=o.updateChild(s,n),new pn(t.writeTree_.set(i,o))}else{let i=new dt(n),o=t.writeTree_.setTree(e,i);return new pn(o)}}}function $y(t,e,n){let r=t;return Ke(n,(i,o)=>{r=jc(r,Ce(e,i),o)}),r}function kT(t,e){if(Y(e))return pn.empty();{let n=t.writeTree_.setTree(e,new dt(null));return new pn(n)}}function Hy(t,e){return to(t,e)!=null}function to(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(lt(n.path,e)):null}function FT(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ie,(r,i)=>{e.push(new G(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new G(r,i.value))}),e}function qr(t,e){if(Y(e))return t;{let n=to(t,e);return n!=null?new pn(new dt(n)):new pn(t.writeTree_.subtree(e))}}function zy(t){return t.writeTree_.isEmpty()}function Ns(t,e){return wS(J(),t.writeTree_,e)}function wS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(I(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=wS(Ce(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ce(t,".priority"),r)),n}}function Yf(t,e){return SS(e,t)}function z2(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=jc(t.visibleWrites,e,n)),t.lastWriteId=r}function W2(t,e,n,r){I(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=$y(t.visibleWrites,e,n),t.lastWriteId=r}function G2(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function q2(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&Y2(a,r.path)?i=!1:Wt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return K2(t),!0;if(r.snap)t.visibleWrites=kT(t.visibleWrites,r.path);else{let a=r.children;Ke(a,c=>{t.visibleWrites=kT(t.visibleWrites,Ce(r.path,c))})}return!0}else return!1}function Y2(t,e){if(t.snap)return Wt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Wt(Ce(t.path,n),e))return!0;return!1}function K2(t){t.visibleWrites=bS(t.allWrites,Q2,J()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Q2(t){return t.visible}function bS(t,e,n){let r=pn.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Wt(n,s)?(a=lt(n,s),r=jc(r,a,o.snap)):Wt(s,n)&&(a=lt(s,n),r=jc(r,J(),o.snap.getChild(a)));else if(o.children){if(Wt(n,s))a=lt(n,s),r=$y(r,a,o.children);else if(Wt(s,n))if(a=lt(s,n),Y(a))r=$y(r,J(),o.children);else{let c=zi(o.children,W(a));if(c){let l=c.getChild(le(a));r=jc(r,J(),l)}}}else throw Hi("WriteRecord should have .snap or .children")}}return r}function DS(t,e,n,r,i){if(!r&&!i){let o=to(t.visibleWrites,e);if(o!=null)return o;{let s=qr(t.visibleWrites,e);if(zy(s))return n;if(n==null&&!Hy(s,J()))return null;{let a=n||$.EMPTY_NODE;return Ns(s,a)}}}else{let o=qr(t.visibleWrites,e);if(!i&&zy(o))return n;if(!i&&n==null&&!Hy(o,J()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Wt(l.path,e)||Wt(e,l.path))},a=bS(t.allWrites,s,e),c=n||$.EMPTY_NODE;return Ns(a,c)}}}function Z2(t,e,n){let r=$.EMPTY_NODE,i=to(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ie,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=qr(t.visibleWrites,e);return n.forEachChild(Ie,(s,a)=>{let c=Ns(qr(o,new ne(s)),a);r=r.updateImmediateChild(s,c)}),FT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=qr(t.visibleWrites,e);return FT(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function J2(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Ce(e,n);if(Hy(t.visibleWrites,o))return null;{let s=qr(t.visibleWrites,o);return zy(s)?i.getChild(n):Ns(s,i.getChild(n))}}function X2(t,e,n,r){let i=Ce(e,n),o=to(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=qr(t.visibleWrites,i);return Ns(s,r.getNode().getImmediateChild(n))}else return null}function eU(t,e){return to(t.visibleWrites,e)}function tU(t,e,n,r,i,o,s){let a,c=qr(t.visibleWrites,e),l=to(c,J());if(l!=null)a=l;else if(n!=null)a=Ns(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function nU(){return{visibleWrites:pn.empty(),allWrites:[],lastWriteId:-1}}function kf(t,e,n,r){return DS(t.writeTree,t.treePath,e,n,r)}function y_(t,e){return Z2(t.writeTree,t.treePath,e)}function LT(t,e,n,r){return J2(t.writeTree,t.treePath,e,n,r)}function Ff(t,e){return eU(t.writeTree,Ce(t.treePath,e))}function rU(t,e,n,r,i,o){return tU(t.writeTree,t.treePath,e,n,r,i,o)}function __(t,e,n){return X2(t.writeTree,t.treePath,e,n)}function TS(t,e){return SS(Ce(t.treePath,e),t.writeTree)}function SS(t,e){return{treePath:t,writeTree:e}}var Wy=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,zc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Hc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Ms(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,zc(r,e.snapshotNode,i.oldSnap));else throw Hi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Gy=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},AS=new Gy,qc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return __(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ji(this.viewCache_),o=rU(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function iU(t){return{filter:t}}function oU(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function sU(t,e,n,r,i){let o=new Wy,s,a;if(n.type===Un.OVERWRITE){let l=n;l.source.fromUser?s=qy(t,e,l.path,l.snap,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Y(l.path),s=Lf(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Un.MERGE){let l=n;l.source.fromUser?s=cU(t,e,l.path,l.children,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Yy(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Un.ACK_USER_WRITE){let l=n;l.revert?s=dU(t,e,l.path,r,i,o):s=lU(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Un.LISTEN_COMPLETE)s=uU(t,e,n.path,r,o);else throw Hi("Unknown operation type: "+n.type);let c=o.getChanges();return aU(e,s,c),{viewCache:s,changes:c}}function aU(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Of(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ES(Of(e)))}}function MS(t,e,n,r,i,o){let s=e.eventCache;if(Ff(r,n)!=null)return e;{let a,c;if(Y(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ji(e),u=l instanceof $?l:$.EMPTY_NODE,d=y_(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=kf(r,Ji(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=W(n);if(l===".priority"){I(Kr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=LT(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=le(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=LT(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=__(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Uc(e,a,s.isFullyInitialized()||Y(n),t.filter.filtersNodes())}}function Lf(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(Y(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=W(n);if(!c.isCompleteForPath(n)&&Kr(n)>1)return e;let g=le(n),y=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),h,y,g,AS,null)}let d=IS(e,l,c.isFullyInitialized()||Y(n),u.filtersNodes()),f=new qc(i,d,o);return MS(t,d,n,i,f,a)}function qy(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new qc(i,e,o);if(Y(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Uc(e,l,!0,t.filter.filtersNodes());else{let d=W(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Uc(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=le(n),h=a.getNode().getImmediateChild(d),g;if(Y(f))g=r;else{let C=u.getCompleteChild(d);C!=null?d_(f)===".priority"&&C.getChild(pS(f)).isEmpty()?g=C:g=C.updateChild(f,r):g=$.EMPTY_NODE}if(h.equals(g))c=e;else{let C=t.filter.updateChild(a.getNode(),d,g,f,u,s);c=Uc(e,C,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function VT(t,e){return t.eventCache.isCompleteForChild(e)}function cU(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Ce(n,c);VT(e,W(u))&&(a=qy(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Ce(n,c);VT(e,W(u))||(a=qy(t,a,u,l,i,o,s))}),a}function UT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Yy(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Y(n)?l=r:l=new dt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),g=UT(t,h,f);c=Lf(t,c,new ne(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=e.serverCache.getNode().getImmediateChild(d),C=UT(t,g,f);c=Lf(t,c,new ne(d),C,i,o,s,a)}}),c}function lU(t,e,n,r,i,o,s){if(Ff(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Y(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Lf(t,e,n,c.getNode().getChild(n),i,o,a,s);if(Y(n)){let l=new dt(null);return c.getNode().forEachChild(bs,(u,d)=>{l=l.set(new ne(u),d)}),Yy(t,e,n,l,i,o,a,s)}else return e}else{let l=new dt(null);return r.foreach((u,d)=>{let f=Ce(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Yy(t,e,n,l,i,o,a,s)}}function uU(t,e,n,r,i){let o=e.serverCache,s=IS(e,o.getNode(),o.isFullyInitialized()||Y(n),o.isFiltered());return MS(t,s,n,r,AS,i)}function dU(t,e,n,r,i,o){let s;if(Ff(r,n)!=null)return e;{let a=new qc(r,e,i),c=e.eventCache.getNode(),l;if(Y(n)||W(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=kf(r,Ji(e));else{let d=e.serverCache.getNode();I(d instanceof $,"serverChildren would be complete if leaf node"),u=y_(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=W(n),d=__(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,le(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,$.EMPTY_NODE,le(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=kf(r,Ji(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Ff(r,J())!=null,Uc(e,l,s,t.filter.filtersNodes())}}var Ky=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Wc(r.getIndex()),o=F2(r);this.processor_=iU(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode($.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode($.EMPTY_NODE,a.getNode(),null),u=new jn(c,s.isFullyInitialized(),i.filtersNodes()),d=new jn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=qf(d,u),this.eventGenerator_=new By(this.query_)}get query(){return this.query_}};function fU(t){return t.viewCache_.serverCache.getNode()}function hU(t){return Of(t.viewCache_)}function pU(t,e){let n=Ji(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Y(e)&&!n.getImmediateChild(W(e)).isEmpty())?n.getChild(e):null}function jT(t){return t.eventRegistrations_.length===0}function gU(t,e){t.eventRegistrations_.push(e)}function BT(t,e,n){let r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function $T(t,e,n,r){e.type===Un.MERGE&&e.source.queryId!==null&&(I(Ji(t.viewCache_),"We should always have a full cache before handling merges"),I(Of(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=sU(t.processor_,i,e,n,r);return oU(t.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,RS(t,o.changes,o.viewCache.eventCache.getNode(),null)}function mU(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ie,(o,s)=>{r.push(Ms(o,s))}),n.isFullyInitialized()&&r.push(ES(n.getNode())),RS(t,r,n.getNode(),e)}function RS(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return j2(t.eventGenerator_,e,n,i)}var Vf,Uf=class{constructor(){this.views=new Map}};function vU(t){I(!Vf,"__referenceConstructor has already been defined"),Vf=t}function yU(){return I(Vf,"Reference.ts has not been loaded"),Vf}function _U(t){return t.views.size===0}function E_(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return I(o!=null,"SyncTree gave us an op for an invalid query."),$T(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat($T(s,e,n,r));return o}}function NS(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=kf(n,i?r:null),c=!1;a?c=!0:r instanceof $?(a=y_(n,r),c=!1):(a=$.EMPTY_NODE,c=!1);let l=qf(new jn(a,c,!1),new jn(r,i,!1));return new Ky(e,l)}return s}function EU(t,e,n,r,i,o){let s=NS(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),gU(s,n),mU(s,n)}function CU(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Qr(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(BT(l,n,r)),jT(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(BT(c,n,r)),jT(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Qr(t)&&o.push(new(yU())(e._repo,e._path)),{removed:o,events:s}}function xS(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yr(t,e){let n=null;for(let r of t.views.values())n=n||pU(r,e);return n}function PS(t,e){if(e._queryParams.loadsAllData())return Kf(t);{let r=e._queryIdentifier;return t.views.get(r)}}function OS(t,e){return PS(t,e)!=null}function Qr(t){return Kf(t)!=null}function Kf(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var jf;function IU(t){I(!jf,"__referenceConstructor has already been defined"),jf=t}function wU(){return I(jf,"Reference.ts has not been loaded"),jf}var bU=1,Bf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=nU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function kS(t,e,n,r,i){return z2(t.pendingWriteTree_,e,n,r,i),i?Os(t,new Rs(g_(),e,n)):[]}function DU(t,e,n,r){W2(t.pendingWriteTree_,e,n,r);let i=dt.fromObject(n);return Os(t,new Gc(g_(),e,i))}function Gr(t,e,n=!1){let r=G2(t.pendingWriteTree_,e);if(q2(t.pendingWriteTree_,e)){let o=new dt(null);return r.snap!=null?o=o.set(J(),!0):Ke(r.children,s=>{o=o.set(new ne(s),!0)}),Os(t,new jy(r.path,o,n))}else return[]}function el(t,e,n){return Os(t,new Rs(m_(),e,n))}function TU(t,e,n){let r=dt.fromObject(n);return Os(t,new Gc(m_(),e,r))}function SU(t,e){return Os(t,new Pf(m_(),e))}function AU(t,e,n){let r=I_(t,n);if(r){let i=w_(r),o=i.path,s=i.queryId,a=lt(o,e),c=new Pf(v_(s),a);return b_(t,o,c)}else return[]}function $f(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||OS(s,e))){let c=CU(s,e,n,r);_U(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Qr(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=NU(f);for(let g=0;g<h.length;++g){let C=h[g],y=C.query,w=US(t,C);t.listenProvider_.startListening(Bc(y),Yc(t,y),w.hashFn,w.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Bc(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Qf(f));t.listenProvider_.stopListening(Bc(f),h)}))}xU(t,l)}return a}function FS(t,e,n,r){let i=I_(t,r);if(i!=null){let o=w_(i),s=o.path,a=o.queryId,c=lt(s,e),l=new Rs(v_(a),c,n);return b_(t,s,l)}else return[]}function MU(t,e,n,r){let i=I_(t,r);if(i){let o=w_(i),s=o.path,a=o.queryId,c=lt(s,e),l=dt.fromObject(n),u=new Gc(v_(a),c,l);return b_(t,s,u)}else return[]}function Qy(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=lt(f,i);o=o||Yr(h,g),s=s||Qr(h)});let a=t.syncPointTree_.get(i);a?(s=s||Qr(a),o=o||Yr(a,J())):(a=new Uf,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=$.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,g)=>{let C=Yr(g,J());C&&(o=o.updateImmediateChild(h,C))}));let l=OS(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Qf(e);I(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=PU();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Yf(t.pendingWriteTree_,i),d=EU(a,e,n,u,o,c);if(!l&&!s&&!r){let f=PS(a,e);d=d.concat(OU(t,e,f))}return d}function C_(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=lt(s,e),l=Yr(a,c);if(l)return l});return DS(i,e,o,n,!0)}function RU(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=lt(l,n);r=r||Yr(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Yr(i,J()):(i=new Uf,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new jn(r,!0,!1):null,a=Yf(t.pendingWriteTree_,e._path),c=NS(i,e,a,o?s.getNode():$.EMPTY_NODE,o);return hU(c)}function Os(t,e){return LS(e,t.syncPointTree_,null,Yf(t.pendingWriteTree_,J()))}function LS(t,e,n,r){if(Y(t.path))return VS(t,e,n,r);{let i=e.get(J());n==null&&i!=null&&(n=Yr(i,J()));let o=[],s=W(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=TS(r,s);o=o.concat(LS(a,c,l,u))}return i&&(o=o.concat(E_(i,t,r,n))),o}}function VS(t,e,n,r){let i=e.get(J());n==null&&i!=null&&(n=Yr(i,J()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=TS(r,s),u=t.operationForChild(s);u&&(o=o.concat(VS(u,a,c,l)))}),i&&(o=o.concat(E_(i,t,r,n))),o}function US(t,e){let n=e.query,r=Yc(t,n);return{hashFn:()=>(fU(e)||$.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?AU(t,n._path,r):SU(t,n._path);{let o=GV(i,n);return $f(t,n,null,o)}}}}function Yc(t,e){let n=Qf(e);return t.queryToTagMap.get(n)}function Qf(t){return t._path.toString()+"$"+t._queryIdentifier}function I_(t,e){return t.tagToQueryMap.get(e)}function w_(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function b_(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=Yf(t.pendingWriteTree_,e);return E_(r,n,i,null)}function NU(t){return t.fold((e,n,r)=>{if(n&&Qr(n))return[Kf(n)];{let i=[];return n&&(i=xS(n)),Ke(r,(o,s)=>{i=i.concat(s)}),i}})}function Bc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(wU())(t._repo,t._path):t}function xU(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Qf(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function PU(){return bU++}function OU(t,e,n){let r=e._path,i=Yc(t,e),o=US(t,n),s=t.listenProvider_.startListening(Bc(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)I(!Qr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!Y(l)&&u&&Qr(u))return[Kf(u).query];{let f=[];return u&&(f=f.concat(xS(u).map(h=>h.query))),Ke(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Bc(u),Yc(t,u))}}return s}var Zy=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Jy=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Ce(this.path_,e);return new t(this.syncTree_,n)}node(){return C_(this.syncTree_,this.path_)}},kU=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},HT=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return FU(t[".sv"],e,n);if(typeof t[".sv"]=="object")return LU(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},FU=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},LU=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},jS=function(t,e,n,r){return D_(e,new Jy(n,t),r)},BS=function(t,e,n){return D_(t,new Zy(e),n)};function D_(t,e,n){let r=t.getPriority().val(),i=HT(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=HT(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Ss(a,Ue(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Ss(i))),s.forEachChild(Ie,(a,c)=>{let l=D_(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Kc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function T_(t,e){let n=e instanceof ne?e:new ne(e),r=t,i=W(n);for(;i!==null;){let o=zi(r.node.children,i)||{children:{},childCount:0};r=new Kc(i,r,o),n=le(n),i=W(n)}return r}function ks(t){return t.node.value}function $S(t,e){t.node.value=e,Xy(t)}function HS(t){return t.node.childCount>0}function VU(t){return ks(t)===void 0&&!HS(t)}function Zf(t,e){Ke(t.node.children,(n,r)=>{e(new Kc(n,t,r))})}function zS(t,e,n,r){n&&!r&&e(t),Zf(t,i=>{zS(i,e,!0,r)}),n&&r&&e(t)}function UU(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function tl(t){return new ne(t.parent===null?t.name:tl(t.parent)+"/"+t.name)}function Xy(t){t.parent!==null&&jU(t.parent,t.name,t)}function jU(t,e,n){let r=VU(n),i=dn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Xy(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Xy(t))}var BU=/[\[\].#$\/\u0000-\u001F\u007F]/,$U=/[\[\].#$\u0000-\u001F\u007F]/,uy=10*1024*1024,S_=function(t){return typeof t=="string"&&t.length!==0&&!BU.test(t)},WS=function(t){return typeof t=="string"&&t.length!==0&&!$U.test(t)},HU=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),WS(t)},zU=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!c_(t)||t&&typeof t=="object"&&dn(t,".sv")},GS=function(t,e,n,r){r&&e===void 0||Jf(Sc(t,"value"),e,n)},Jf=function(t,e,n){let r=n instanceof ne?new by(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Yi(r)+" with contents = "+e.toString());if(c_(e))throw new Error(t+"contains "+e.toString()+" "+Yi(r));if(typeof e=="string"&&e.length>uy/3&&Ac(e)>uy)throw new Error(t+"contains a string greater than "+uy+" utf8 bytes "+Yi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Ke(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!S_(s)))throw new Error(t+" contains an invalid key ("+s+") "+Yi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);I2(r,s),Jf(t,a,r),w2(r)}),i&&o)throw new Error(t+' contains ".value" child '+Yi(r)+" in addition to actual children.")}},WU=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let o=$c(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!S_(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(C2);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Wt(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},GU=function(t,e,n,r){if(r&&e===void 0)return;let i=Sc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Ke(e,(s,a)=>{let c=new ne(s);if(Jf(i,a,Ce(n,c)),d_(c)===".priority"&&!zU(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),WU(i,o)};var qS=function(t,e,n,r){if(!(r&&n===void 0)&&!WS(n))throw new Error(Sc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qU=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qS(t,e,n,r)},A_=function(t,e){if(W(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},YU=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!S_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HU(n))throw new Error(Sc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var e_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Xf(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!f_(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function YS(t,e,n){Xf(t,n),KS(t,r=>f_(r,e))}function qt(t,e,n){Xf(t,n),KS(t,r=>Wt(r,e)||Wt(e,r))}function KS(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(KU(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function KU(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Qi&&Ye("event: "+n.toString()),Ps(r)}}}var QU="repo_interrupt",ZU=25,t_=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new e_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xf(),this.transactionQueueTree_=new Kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function JU(t,e,n){if(t.stats_=u_(t.repoInfo_),t.forceRestClient_||QV())t.server_=new ky(t.repoInfo_,(r,i,o,s)=>{zT(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>WT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new h_(t.repoInfo_,e,(r,i,o,s)=>{zT(t,r,i,o,s)},r=>{WT(t,r)},r=>{XU(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=JV(t.repoInfo_,()=>new Uy(t.stats_,t.server_)),t.infoData_=new Fy,t.infoSyncTree_=new Bf({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=el(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),M_(t,"connected",!1),t.serverSyncTree_=new Bf({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);qt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function QS(t){let n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function eh(t){return kU({timestamp:QS(t)})}function zT(t,e,n,r,i){t.dataUpdateCount++;let o=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Tc(n,l=>Ue(l));s=MU(t.serverSyncTree_,o,c,i)}else{let c=Ue(n);s=FS(t.serverSyncTree_,o,c,i)}else if(r){let c=Tc(n,l=>Ue(l));s=TU(t.serverSyncTree_,o,c)}else{let c=Ue(n);s=el(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=xs(t,o)),qt(t.eventQueue_,a,s)}function WT(t,e){M_(t,"connected",e),e===!1&&rj(t)}function XU(t,e){Ke(e,(n,r)=>{M_(t,n,r)})}function M_(t,e,n){let r=new ne("/.info/"+e),i=Ue(n);t.infoData_.updateSnapshot(r,i);let o=el(t.infoSyncTree_,r,i);qt(t.eventQueue_,r,o)}function R_(t){return t.nextWriteId_++}function ej(t,e,n){let r=RU(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=Ue(i).withIndex(e._queryParams.getIndex());Qy(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=el(t.serverSyncTree_,e._path,o);else{let a=Yc(t.serverSyncTree_,e);s=FS(t.serverSyncTree_,e._path,o,a)}return qt(t.eventQueue_,e._path,s),$f(t.serverSyncTree_,e,n,null,!0),o},i=>(nl(t,"get for query "+Oe(e)+" failed: "+i),Promise.reject(new Error(i))))}function tj(t,e,n,r,i){nl(t,"set",{path:e.toString(),value:n,priority:r});let o=eh(t),s=Ue(n,r),a=C_(t.serverSyncTree_,e),c=BS(s,a,o),l=R_(t),u=kS(t.serverSyncTree_,e,c,l,!0);Xf(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||ut("set at "+e+" failed: "+f);let C=Gr(t.serverSyncTree_,l,!g);qt(t.eventQueue_,e,C),n_(t,i,f,h)});let d=x_(t,e);xs(t,d),qt(t.eventQueue_,d,[])}function nj(t,e,n,r){nl(t,"update",{path:e.toString(),value:n});let i=!0,o=eh(t),s={};if(Ke(n,(a,c)=>{i=!1,s[a]=jS(Ce(e,a),Ue(c),t.serverSyncTree_,o)}),i)Ye("update() called with empty data.  Don't do anything."),n_(t,r,"ok",void 0);else{let a=R_(t),c=DU(t.serverSyncTree_,e,s,a);Xf(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||ut("update at "+e+" failed: "+l);let f=Gr(t.serverSyncTree_,a,!d),h=f.length>0?xs(t,e):e;qt(t.eventQueue_,h,f),n_(t,r,l,u)}),Ke(n,l=>{let u=x_(t,Ce(e,l));xs(t,u)}),qt(t.eventQueue_,e,[])}}function rj(t){nl(t,"onDisconnectEvents");let e=eh(t),n=xf();Ly(t.onDisconnect_,J(),(i,o)=>{let s=jS(i,o,t.serverSyncTree_,e);CS(n,i,s)});let r=[];Ly(n,J(),(i,o)=>{r=r.concat(el(t.serverSyncTree_,i,o));let s=x_(t,i);xs(t,s)}),t.onDisconnect_=xf(),qt(t.eventQueue_,J(),r)}function ij(t,e,n){let r;W(e._path)===".info"?r=Qy(t.infoSyncTree_,e,n):r=Qy(t.serverSyncTree_,e,n),YS(t.eventQueue_,e._path,r)}function GT(t,e,n){let r;W(e._path)===".info"?r=$f(t.infoSyncTree_,e,n):r=$f(t.serverSyncTree_,e,n),YS(t.eventQueue_,e._path,r)}function oj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(QU)}function nl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ye(n,...e)}function n_(t,e,n,r){e&&Ps(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function ZS(t,e,n){return C_(t.serverSyncTree_,e,n)||$.EMPTY_NODE}function N_(t,e=t.transactionQueueTree_){if(e||th(t,e),ks(e)){let n=XS(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&sj(t,tl(e),n)}else HS(e)&&Zf(e,n=>{N_(t,n)})}function sj(t,e,n){let r=n.map(l=>l.currentWriteId),i=ZS(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];I(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=lt(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{nl(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Gr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();th(t,T_(t.transactionQueueTree_,e)),N_(t,t.transactionQueueTree_),qt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ps(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ut("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}xs(t,e)}},s)}function xs(t,e){let n=JS(t,e),r=tl(n),i=XS(t,n);return aj(t,i,r),r}function aj(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=lt(n,c.path),u=!1,d;if(I(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Gr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=ZU)u=!0,d="maxretry",i=i.concat(Gr(t.serverSyncTree_,c.currentWriteId,!0));else{let f=ZS(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Jf("transaction failed: Data returned ",h,c.path);let g=Ue(h);typeof h=="object"&&h!=null&&dn(h,".priority")||(g=g.updatePriority(f.getPriority()));let y=c.currentWriteId,w=eh(t),H=BS(g,f,w);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=H,c.currentWriteId=R_(t),s.splice(s.indexOf(y),1),i=i.concat(kS(t.serverSyncTree_,c.path,H,c.currentWriteId,c.applyLocally)),i=i.concat(Gr(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(Gr(t.serverSyncTree_,c.currentWriteId,!0))}qt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}th(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ps(r[a]);N_(t,t.transactionQueueTree_)}function JS(t,e){let n,r=t.transactionQueueTree_;for(n=W(e);n!==null&&ks(r)===void 0;)r=T_(r,n),e=le(e),n=W(e);return r}function XS(t,e){let n=[];return eA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function eA(t,e,n){let r=ks(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Zf(e,i=>{eA(t,i,n)})}function th(t,e){let n=ks(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,$S(e,n.length>0?n:void 0)}Zf(e,r=>{th(t,r)})}function x_(t,e){let n=tl(JS(t,e)),r=T_(t.transactionQueueTree_,e);return UU(r,i=>{dy(t,i)}),dy(t,r),zS(r,i=>{dy(t,i)}),n}function dy(t,e){let n=ks(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Gr(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?$S(e,void 0):n.length=o+1,qt(t.eventQueue_,tl(e),i);for(let s=0;s<r.length;s++)Ps(r[s])}}function cj(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function lj(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ut(`Invalid query segment '${n}' in query '${t}'`)}return e}var qT=function(t,e){let n=uj(t),r=n.namespace;n.domain==="firebase.com"&&lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||BV();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ne(n.pathString)}},uj=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=cj(t.substring(u,d)));let f=lj(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var YT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dj=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=YT.charAt(n%64),n=Math.floor(n/64);I(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=YT.charAt(e[i]);return I(s.length===20,"nextPushId: Length should be 20."),s}}();var Hf=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}},zf=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Wf=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var r_=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Y(this._path)?null:d_(this._path)}get ref(){return new Bn(this._repo,this._path)}get _queryIdentifier(){let e=PT(this._queryParams),n=l_(e);return n==="{}"?"default":n}get _queryObject(){return PT(this._queryParams)}isEqual(e){if(e=Ve(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=f_(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+E2(this._path)}};var Bn=class t extends r_{constructor(e,n){super(e,n,new Oy,!1)}get parent(){let e=pS(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Qc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ne(e),r=Xi(this.ref,e);return new t(this._node.getChild(n),r,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Xi(this.ref,r),Ie)))}hasChild(e){let n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Et(t,e){return t=Ve(t),t._checkNotDeleted("ref"),e!==void 0?Xi(t._root,e):t._root}function Xi(t,e){return t=Ve(t),W(t._path)===null?qU("child","path",e,!1):qS("child","path",e,!1),new Bn(t._repo,Ce(t._path,e))}function rl(t,e){t=Ve(t),A_("push",t._path),GS("push",e,t._path,!0);let n=QS(t._repo),r=dj(n),i=Xi(t,r),o=Xi(t,r),s;return e!=null?s=Fs(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function P_(t){return A_("remove",t._path),Fs(t,null)}function Fs(t,e){t=Ve(t),A_("set",t._path),GS("set",e,t._path,!1);let n=new zt;return tj(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function O_(t,e){GU("update",e,t._path,!1);let n=new zt;return nj(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ls(t){t=Ve(t);let e=new Wf(()=>{}),n=new Gf(e);return ej(t._repo,t,n).then(r=>new Qc(r,new Bn(t._repo,t._path),t._queryParams.getIndex()))}var Gf=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Hf("value",this,new Qc(e.snapshotNode,new Bn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zf(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},i_=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zf(this,e,n):null}createEvent(e,n){I(e.childName!=null,"Child events should have a childName.");let r=Xi(new Bn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Hf(e.type,this,new Qc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function fj(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{GT(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Wf(n,o||void 0),a=e==="value"?new Gf(s):new i_(e,s);return ij(t._repo,t,a),()=>GT(t._repo,t,a)}function no(t,e,n,r){return fj(t,"value",e,n,r)}vU(Bn);IU(Bn);var hj="FIREBASE_DATABASE_EMULATOR_HOST",o_={},pj=!1;function gj(t,e,n,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=Hr(o);t.repoInfo_=new bf(e,s,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function mj(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ye("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=qT(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[hj]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=qT(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Vc(Vc.OWNER):new vy(t.name,t.options,e);YU("Invalid Firebase Database URL",s),Y(s.path)||lr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=yj(a,t,u,new my(t,n));return new s_(d,t)}function vj(t,e){let n=o_[e];(!n||n[t.key]!==t)&&lr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),oj(t),delete n[t.key]}function yj(t,e,n,r){let i=o_[e.name];i||(i={},o_[e.name]=i);let o=i[t.toURLString()];return o&&lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new t_(t,pj,n,r),i[t.toURLString()]=o,o}var s_=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bn(this._repo,J())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&lr("Cannot call "+e+" on a deleted database.")}};function Vs(t=qi(),e){let n=Es(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=WD("database");r&&tA(n,...r)}return n}function tA(t,e,n,r={}){t=Ve(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Fn(r,o.repoInfo_.emulatorOptions))return;lr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vc(Vc.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:GD(r.mockUserToken,t.app.options.projectId);s=new Vc(a)}Hr(e)&&(gf(e),mf("Database",!0)),gj(o,i,r,s)}function _j(t){VV(Wr),fn(new ct("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return mj(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Ee(mT,vT,t),Ee(mT,vT,"esm2017")}h_.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};h_.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};_j();var Ej="firebase",Cj="11.10.0";Ee(Ej,Cj,"app");function nA(t){t===void 0&&(t=m(Re));let e=t.get(Jn);return n=>new O(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Zr=new Pi("ANGULARFIRE2_VERSION");function il(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var js=(t,e)=>{let n=e?[e]:Cf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Us=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Us||{}),rA=Tm()&&typeof Zone<"u"?Us.WARN:Us.SILENT;var nh=class{zone;delegate;constructor(e,n=Jh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Jr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=m(re);this.outsideAngular=n.runOutsideAngular(()=>new nh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new nh(typeof Zone>"u"?void 0:Zone.current,Zh))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iA=!1;function Ij(t,e){!iA&&(rA>Us.SILENT||Tm())&&(iA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),rA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function wj(t){let e=m(re,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ro(t){let e=m(re,{optional:!0});return e?e.run(()=>t()):t()}var bj=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),we(n,()=>ro(()=>t.apply(void 0,r)))),gn=(t,e,n)=>(n||=e?Us.WARN:Us.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=m(Jr),s=m(Jn),a=m(_e)}catch{return Ij(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ro(()=>s.add())),i[l]=bj(i[l],r,a));let c=wj(()=>t.apply(this,i));return e?c instanceof O?c.pipe(gr(o.outsideAngular),pr(o.insideAngular),nA(a)):c instanceof Promise?ro(()=>{let l=s.add();return new Promise((u,d)=>{c.then(f=>we(a,()=>ro(()=>u(f))),f=>we(a,()=>ro(()=>d(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ro(()=>c):c instanceof O?c.pipe(gr(o.outsideAngular),pr(o.insideAngular)):ro(()=>c)});var Nt=class{constructor(e){return e}},io=class{constructor(){return Cf()}};function Dj(t){return t&&t.length===1?t[0]:new Nt(qi())}var k_=new D("angularfire2._apps"),Tj={provide:Nt,useFactory:Dj,deps:[[new Tt,k_]]},Sj={provide:io,deps:[[new Tt,k_]]};function Aj(t){return(e,n)=>{let r=n.get(Rr);Ee("angularfire",Zr.full,"core"),Ee("angularfire",Zr.full,"app"),Ee("angular",Eb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Nt(i)}}function oA(t,...e){return Ot([Tj,Sj,{provide:k_,useFactory:Aj(t),multi:!0,deps:[re,Re,Jr,...e]}])}var sA=gn(iy,!0);var Bs=class t{constructor(e){this.app=e;this.db=Vs(this.app)}db;getPizzasFromDb(){let e=Et(this.db,"pizzas");return new O(n=>{no(e,r=>{let i=[];r.forEach(o=>{let s=o.val();i.push(P(_({id:o.key||""},s),{tipo:"pizza"}))}),n.next(i)},r=>{n.error(r)})})}getBebidasFromDb(){let e=Et(this.db,"bebidas");return new O(n=>{no(e,r=>{let i=[];r.forEach(o=>{let s=o.val();i.push(_({id:o.key||""},s))}),n.next(i)},r=>{n.error(r)})})}getProducts(){return fi([this.getPizzasFromDb(),this.getBebidasFromDb()]).pipe(N(([e,n])=>[...e,...n]))}getProductById(e){let n=Et(this.db,`pizzas/${e}`),r=Et(this.db,`bebidas/${e}`),i=new O(s=>{Ls(n).then(a=>{let c=a.val();c?s.next(P(_({},c),{id:a.key||"",tipo:"pizza"})):s.next(void 0),s.complete()}).catch(a=>s.error(a))}),o=new O(s=>{Ls(r).then(a=>{let c=a.val();c?s.next(P(_({},c),{id:a.key||""})):s.next(void 0),s.complete()}).catch(a=>s.error(a))});return fi([i,o]).pipe(N(([s,a])=>s||a))}addReserva(e){let n=Et(this.db,"reservas");return Promise.resolve(rl(n,e))}static \u0275fac=function(n){return new(n||t)(x(Nt))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var Mj=new Map,Rj={activated:!1,tokenObservers:[]},Nj={initialized:!1,enabled:!1};function mn(t){return Mj.get(t)||Object.assign({},Rj)}function fA(){return Nj}var xj="https://content-firebaseappcheck.googleapis.com/v1";var Pj="exchangeDebugToken",lA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Vne=24*60*60*1e3;var V_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return p(this,null,function*(){this.stop();try{this.pending=new zt,this.pending.promise.catch(n=>{}),yield Oj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new zt,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Oj(t){return new Promise(e=>{setTimeout(e,t)})}var kj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Xr=new un("appCheck","AppCheck",kj);function hA(t){if(!mn(t).activated)throw Xr.create("use-before-activation",{appName:t.name})}function pA(r,i){return p(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(h){throw Xr.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw Xr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw Xr.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Xr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function gA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${xj}/projects/${n}/apps/${r}:${Pj}?key=${i}`,body:{debug_token:e}}}var Fj="firebase-app-check-database",Lj=1,U_="firebase-app-check-store";var rh=null;function Vj(){return rh||(rh=new Promise((t,e)=>{try{let n=indexedDB.open(Fj,Lj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Xr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(U_,{keyPath:"compositeKey"})}}}catch(n){e(Xr.create("storage-open",{originalErrorMessage:n?.message}))}}),rh)}function Uj(t,e){return jj(Bj(t),e)}function jj(t,e){return p(this,null,function*(){let r=(yield Vj()).transaction(U_,"readwrite"),o=r.objectStore(U_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Xr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Bj(t){return`${t.options.appId}-${t.name}`}var ol=new Ln("@firebase/app-check");function F_(t,e){return yf()?Uj(t,e).catch(n=>{ol.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function mA(){return fA().enabled}function vA(){return p(this,null,function*(){let t=fA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $j={error:"UNKNOWN_ERROR"};function Hj(t){return vs.encodeString(JSON.stringify(t),!1)}function j_(t,e=!1,n=!1){return p(this,null,function*(){let r=t.app;hA(r);let i=mn(r),o=i.token,s;if(o&&!sl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(sl(l)?o=l:yield F_(r,void 0))}if(!e&&o&&sl(o))return{token:o.token};let a=!1;if(mA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=pA(gA(r,yield vA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield F_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ol.warn(l.message):n&&ol.error(l),L_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield mn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ol.warn(l.message):n&&ol.error(l),s=l}let c;return o?s?sl(o)?c={token:o.token,internalError:s}:c=L_(s):(c={token:o.token},i.token=o,yield F_(r,o)):c=L_(s),a&&qj(r,c),c})}function zj(t){return p(this,null,function*(){let e=t.app;hA(e);let{provider:n}=mn(e);if(mA()){let r=yield vA(),{token:i}=yield pA(gA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Wj(t,e,n,r){let{app:i}=t,o=mn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sl(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),uA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uA(t))}function yA(t,e){let n=mn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function uA(t){let{app:e}=t,n=mn(e),r=n.tokenRefresher;r||(r=Gj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Gj(t){let{app:e}=t;return new V_(()=>p(null,null,function*(){let n=mn(e),r;if(n.token?r=yield j_(t,!0):r=yield j_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=mn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},lA.RETRIAL_MIN_WAIT,lA.RETRIAL_MAX_WAIT)}function qj(t,e){let n=mn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function sl(t){return t.expireTimeMillis-Date.now()>0}function L_(t){return{token:Hj($j),error:t}}var B_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=mn(this.app);for(let n of e)yA(this.app,n.next);return Promise.resolve()}};function Yj(t,e){return new B_(t,e)}function Kj(t){return{getToken:e=>j_(t,e),getLimitedUseToken:()=>zj(t),addTokenListener:e=>Wj(t,"INTERNAL",e),removeTokenListener:e=>yA(t.app,e)}}var Qj="@firebase/app-check",Zj="0.10.1";var Jj="app-check",dA="app-check-internal";function Xj(){fn(new ct(Jj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Yj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(dA).initialize()})),fn(new ct(dA,t=>{let e=t.getProvider("app-check").getImmediate();return Kj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ee(Qj,Zj)}Xj();var eB="app-check";var $s=class{constructor(){return js(eB)}};var tB=["localhost","0.0.0.0","127.0.0.1"],Zne=typeof window<"u"&&tB.includes(window.location.hostname);function OA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kA=OA,FA=new un("auth","Firebase",OA());var lh=new Ln("@firebase/auth");function nB(t,...e){lh.logLevel<=ie.WARN&&lh.warn(`Auth (${Wr}): ${t}`,...e)}function oh(t,...e){lh.logLevel<=ie.ERROR&&lh.error(`Auth (${Wr}): ${t}`,...e)}function Hn(t,...e){throw fE(t,...e)}function oo(t,...e){return fE(t,...e)}function LA(t,e,n){let r=Object.assign(Object.assign({},kA()),{[e]:n});return new un("auth","Firebase",r).create(e,{appName:t.name})}function fr(t){return LA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FA.create(t,...e)}function k(t,e,...n){if(!t)throw fE(e,...n)}function ur(t){let e="INTERNAL ASSERTION FAILED: "+t;throw oh(e),new Error(e)}function ni(t,e){t||ur(e)}function W_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rB(){return _A()==="http:"||_A()==="https:"}function _A(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function iB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rB()||YD()||"connection"in navigator)?navigator.onLine:!0}function oB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var so=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=bc()||vf()}get(){return iB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hE(t,e){ni(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var uh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cB=new so(3e4,6e4);function ri(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ii(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return VA(t,i,()=>p(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Wi(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let h=Object.assign({method:e,headers:f},l);return qD()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(h.credentials="include"),uh.fetch()(yield UA(t,t.config.apiHost,n,d),h)}))})}function VA(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sB),e);try{let i=new G_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ih(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw ih(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw ih(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw LA(t,u,l);Hn(t,u)}}catch(i){if(i instanceof ln)throw i;Hn(t,"network-request-failed",{message:String(i)})}})}function gl(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield ii(t,e,n,r,i);return"mfaPendingCredential"in l&&Hn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function UA(t,e,n,r){return p(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?hE(t.config,i):`${t.config.apiScheme}://${i}`;return aB.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function lB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var G_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oo(this.auth,"network-request-failed")),cB.get())})}};function ih(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=oo(t,e,r);return i.customData._tokenResponse=n,i}function EA(t){return t!==void 0&&t.enterprise!==void 0}var q_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function uB(t,e){return p(this,null,function*(){return ii(t,"GET","/v2/recaptchaConfig",ri(t,e))})}function dB(t,e){return p(this,null,function*(){return ii(t,"POST","/v1/accounts:delete",e)})}function dh(t,e){return p(this,null,function*(){return ii(t,"POST","/v1/accounts:lookup",e)})}function cl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function pE(t,e=!1){return p(this,null,function*(){let n=Ve(t),r=yield n.getIdToken(e),i=gE(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cl($_(i.auth_time)),issuedAtTime:cl($_(i.iat)),expirationTime:cl($_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $_(t){return Number(t)*1e3}function gE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{let i=gs(n);return i?JSON.parse(i):(oh("Failed to decode base64 JWT payload"),null)}catch(i){return oh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function CA(t){let e=gE(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ul(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ln&&fB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function fB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Y_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function fh(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ul(t,dh(n,{idToken:r}));k(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?jA(o.providerUserInfo):[],a=hB(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dl(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function mE(t){return p(this,null,function*(){let e=Ve(t);yield fh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jA(t){return t.map(e=>{var{providerId:n}=e,r=Xh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function pB(t,e){return p(this,null,function*(){let n=yield VA(t,{},()=>p(null,null,function*(){let r=Wi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield UA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(c.credentials="include"),uh.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function gB(t,e){return p(this,null,function*(){return ii(t,"POST","/v2/accounts:revokeToken",ri(t,e))})}var ll=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){k(e.length!==0,"internal-error");let n=CA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield pB(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(k(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(k(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(k(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ur("not implemented")}};function ei(t,e){k(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ti=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Xh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield ul(this,this.stsTokenManager.getToken(this.auth,e));return k(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return pE(this,e)}reload(){return mE(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield fh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(_t(this.auth.app))return Promise.reject(fr(this.auth));let e=yield this.getIdToken();return yield ul(this,dB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ae,emailVerified:X,isAnonymous:zn,providerData:Ws,stsTokenManager:yl}=n;k(ae&&yl,e,"internal-error");let AM=ll.fromJSON(this.name,yl);k(typeof ae=="string",e,"internal-error"),ei(d,e.name),ei(f,e.name),k(typeof X=="boolean",e,"internal-error"),k(typeof zn=="boolean",e,"internal-error"),ei(h,e.name),ei(g,e.name),ei(C,e.name),ei(y,e.name),ei(w,e.name),ei(H,e.name);let xh=new t({uid:ae,auth:e,email:f,emailVerified:X,displayName:d,isAnonymous:zn,photoURL:g,phoneNumber:h,tenantId:C,stsTokenManager:AM,createdAt:w,lastLoginAt:H});return Ws&&Array.isArray(Ws)&&(xh.providerData=Ws.map(MM=>Object.assign({},MM))),y&&(xh._redirectEventId=y),xh}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new ll;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield fh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];k(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?jA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ll;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var IA=new Map;function dr(t){ni(t instanceof Function,"Expected a class definition");let e=IA.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IA.set(t,e),e)}var mB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),K_=mB;function sh(t,e,n){return`firebase:${t}:${e}:${n}`}var hh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=sh(this.userKey,i.apiKey,o),this.fullPersistenceKey=sh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield dh(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(dr(K_),e,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||dr(K_),s=sh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield dh(e,{idToken:u}).catch(()=>{});if(!f)break;d=yield ti._fromGetAccountInfoResponse(e,f,u)}else d=ti._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function wA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GA(e))return"Blackberry";if(qA(e))return"Webos";if($A(e))return"Safari";if((e.includes("chrome/")||HA(e))&&!e.includes("edge/"))return"Chrome";if(WA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function BA(t=et()){return/firefox\//i.test(t)}function $A(t=et()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HA(t=et()){return/crios\//i.test(t)}function zA(t=et()){return/iemobile/i.test(t)}function WA(t=et()){return/android/i.test(t)}function GA(t=et()){return/blackberry/i.test(t)}function qA(t=et()){return/webos/i.test(t)}function vE(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vB(t=et()){var e;return vE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yB(){return KD()&&document.documentMode===10}function YA(t=et()){return vE(t)||WA(t)||qA(t)||GA(t)||/windows phone/i.test(t)||zA(t)}function KA(t,e=[]){let n;switch(t){case"Browser":n=wA(et());break;case"Worker":n=`${wA(et())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}var Q_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _B(n){return p(this,arguments,function*(t,e={}){return ii(t,"GET","/v2/passwordPolicy",ri(t,e))})}var EB=6,Z_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:EB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var J_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ph(this),this.idTokenSubscription=new ph(this),this.beforeStateQueue=new Q_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield hh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield dh(this,{idToken:e}),r=yield ti._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(_t(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield fh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oB()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(_t(this.app))return Promise.reject(fr(this));let n=e?Ve(e):null;return n&&k(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return _t(this.app)?Promise.reject(fr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _t(this.app)?Promise.reject(fr(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(dr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield _B(this),n=new Z_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield gB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&dr(e)||this._popupRedirectResolver;k(n,this,"argument-error"),this.redirectPersistenceManager=yield hh.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&nB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function co(t){return Ve(t)}var ph=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=eT(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ch={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CB(t){Ch=t}function QA(t){return Ch.loadJS(t)}function IB(){return Ch.recaptchaEnterpriseScript}function wB(){return Ch.gapiScript}function ZA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var X_=class{constructor(){this.enterprise=new eE}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},eE=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var bB="recaptcha-enterprise",JA="NO_RECAPTCHA",tE=class{constructor(e){this.type=bB,this.auth=co(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(o){return p(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>p(null,null,function*(){uB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new q_(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;EA(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(JA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&EA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=IB();c.length!==0&&(c+=a),QA(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function al(t,e,n,r=!1,i=!1){return p(this,null,function*(){let o=new tE(t),s;if(i)s=JA;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function nE(t,e,n,r,i){return p(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield al(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>p(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield al(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield al(t,e,n);return r(t,a).catch(c=>p(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let u=yield al(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)}))}else{let a=yield al(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function yE(t,e){let n=Es(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Fn(o,e??{}))return i;Hn(i,"already-initialized")}return n.initialize({options:e})}function DB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(dr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _E(t,e,n){let r=co(t);k(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=XA(e),{host:s,port:a}=TB(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){k(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),k(Fn(l,r.config.emulator)&&Fn(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Hr(s)?(gf(`${o}//${s}${c}`),mf("Auth",!0)):i||SB()}function XA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TB(t){let e=XA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:bA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:bA(s)}}}function bA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function SB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var fl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}};function AB(t,e){return p(this,null,function*(){return ii(t,"POST","/v1/accounts:signUp",e)})}function MB(t,e){return p(this,null,function*(){return gl(t,"POST","/v1/accounts:signInWithPassword",ri(t,e))})}function RB(t,e){return p(this,null,function*(){return gl(t,"POST","/v1/accounts:signInWithEmailLink",ri(t,e))})}function NB(t,e){return p(this,null,function*(){return gl(t,"POST","/v1/accounts:signInWithEmailLink",ri(t,e))})}var hl=class t extends fl{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nE(e,n,"signInWithPassword",MB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return RB(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nE(e,r,"signUpPassword",AB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return NB(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function H_(t,e){return p(this,null,function*(){return gl(t,"POST","/v1/accounts:signInWithIdp",ri(t,e))})}function xB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PB(t){let e=ys(_s(t)).link,n=e?ys(_s(e)).deep_link_id:null,r=ys(_s(t)).deep_link_id;return(r?ys(_s(r)).link:null)||r||n||e||t}var gh=class t{constructor(e){var n,r,i,o,s,a;let c=ys(_s(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=xB((i=c.mode)!==null&&i!==void 0?i:null);k(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=PB(e);try{return new t(n)}catch{return null}}};var eM=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return hl._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=gh.parseLink(r);return k(i,"argument-error"),hl._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),mh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rE=class extends mh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function OB(t,e){return p(this,null,function*(){return gl(t,"POST","/v1/accounts:signUp",ri(t,e))})}var Hs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let o=yield ti._fromIdTokenResponse(e,r,i),s=DA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=DA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function DA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var iE=class t extends ln{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function tM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?iE._fromErrorAndOperation(t,o,e,r):o})}function kB(t,e,n=!1){return p(this,null,function*(){let r=yield ul(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Hs._forOperation(t,"link",r)})}function FB(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(_t(r.app))return Promise.reject(fr(r));let i="reauthenticate";try{let o=yield ul(t,tM(r,i,e,t),n);k(o.idToken,r,"internal-error");let s=gE(o.idToken);k(s,r,"internal-error");let{sub:a}=s;return k(t.uid===a,r,"user-mismatch"),Hs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Hn(r,"user-mismatch"),o}})}function nM(t,e,n=!1){return p(this,null,function*(){if(_t(t.app))return Promise.reject(fr(t));let r="signIn",i=yield tM(t,r,e),o=yield Hs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function EE(t,e){return p(this,null,function*(){return nM(co(t),e)})}function rM(t){return p(this,null,function*(){let e=co(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function CE(t,e,n){return p(this,null,function*(){if(_t(t.app))return Promise.reject(fr(t));let r=co(t),s=yield nE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OB,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&rM(t),c}),a=yield Hs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function IE(t,e,n){return _t(t.app)?Promise.reject(fr(t)):EE(Ve(t),eM.credential(e,n)).catch(r=>p(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&rM(t),r}))}function Ih(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function wE(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function wh(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function bE(t){return Ve(t).signOut()}var vh="__sak";var yh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var LB=1e3,VB=10,UB=(()=>{class t extends yh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);yB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,VB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},LB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield oi(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield oi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield oi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),iM=UB;var jB=(()=>{class t extends yh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),DE=jB;function BB(t){return Promise.all(t.map(e=>p(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var $B=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield BB(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function oM(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var oE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=oM("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function $n(){return window}function HB(t){$n().location.href=t}function sM(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}function zB(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function WB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GB(){return sM()?self:null}var aM="firebaseLocalStorageDb",qB=1,_h="firebaseLocalStorage",cM="fbase_key",ao=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function bh(t,e){return t.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function YB(){let t=indexedDB.deleteDatabase(aM);return new ao(t).toPromise()}function sE(){let t=indexedDB.open(aM,qB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(_h,{keyPath:cM})}catch(i){n(i)}}),t.addEventListener("success",()=>p(null,null,function*(){let r=t.result;r.objectStoreNames.contains(_h)?e(r):(r.close(),yield YB(),e(yield sE()))}))})}function TA(t,e,n){return p(this,null,function*(){let r=bh(t,!0).put({[cM]:e,value:n});return new ao(r).toPromise()})}function KB(t,e){return p(this,null,function*(){let n=bh(t,!1).get(e),r=yield new ao(n).toPromise();return r===void 0?null:r.value})}function SA(t,e){let n=bh(t,!0).delete(e);return new ao(n).toPromise()}var QB=800,ZB=3,JB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield sE(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>ZB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return sM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=$B._getInstance(GB()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield zB(),!this.activeServiceWorker)return;this.sender=new oE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||WB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield sE();return yield TA(n,vh,"1"),yield SA(n,vh),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>TA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>KB(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>SA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=bh(o,!1).getAll();return new ao(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),QB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),lM=JB;var ore=ZA("rcb"),sre=new so(3e4,6e4);function XB(t,e){return e?dr(e):(k(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pl=class extends fl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return H_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return H_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return H_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function e$(t){return nM(t.auth,new pl(t),t.bypassAuthState)}function t$(t){let{auth:e,user:n}=t;return k(n,e,"internal-error"),FB(n,new pl(t),t.bypassAuthState)}function n$(t){return p(this,null,function*(){let{auth:e,user:n}=t;return k(n,e,"internal-error"),kB(n,new pl(t),t.bypassAuthState)})}var aE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e$;case"linkViaPopup":case"linkViaRedirect":return n$;case"reauthViaPopup":case"reauthViaRedirect":return t$;default:Hn(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var are=new so(2e3,1e4);var r$="pendingRedirect",ah=new Map,cE=class t extends aE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=ah.get(this.auth._key());if(!e){try{let r=(yield i$(this.resolver,this.auth))?yield oi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return oi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,oi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function i$(t,e){return p(this,null,function*(){let n=a$(e),r=s$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function o$(t,e){ah.set(t._key(),e)}function s$(t){return dr(t._redirectPersistence)}function a$(t){return sh(r$,t.config.apiKey,t.name)}function c$(t,e,n=!1){return p(this,null,function*(){if(_t(t.app))return Promise.reject(fr(t));let r=co(t),i=XB(r,e),s=yield new cE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var l$=10*60*1e3,lE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oo(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l$&&this.cachedEventUids.clear(),this.cachedEventUids.has(AA(e))}saveEventToCache(e){this.cachedEventUids.add(AA(e)),this.lastProcessedEventTime=Date.now()}};function AA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function u$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uM(t);default:return!1}}function d$(n){return p(this,arguments,function*(t,e={}){return ii(t,"GET","/v1/projects",e)})}var f$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h$=/^https?/;function p$(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield d$(t);for(let n of e)try{if(g$(n))return}catch{}Hn(t,"unauthorized-domain")})}function g$(t){let e=W_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!h$.test(n))return!1;if(f$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var m$=new so(3e4,6e4);function MA(){let t=$n().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function v$(t){return new Promise((e,n)=>{var r,i,o;function s(){MA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MA(),n(oo(t,"network-request-failed"))},timeout:m$.get()})}if(!((i=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=$n().gapi)===null||o===void 0)&&o.load)s();else{let a=ZA("iframefcb");return $n()[a]=()=>{gapi.load?s():n(oo(t,"network-request-failed"))},QA(`${wB()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ch=null,e})}var ch=null;function y$(t){return ch=ch||v$(t),ch}var _$=new so(5e3,15e3),E$="__/auth/iframe",C$="emulator/auth/iframe",I$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b$(t){let e=t.config;k(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?hE(e,C$):`https://${t.config.authDomain}/${E$}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},i=w$.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Wi(r).slice(1)}`}function D$(t){return p(this,null,function*(){let e=yield y$(t),n=$n().gapi;return k(n,t,"internal-error"),e.open({where:document.body,url:b$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I$,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=oo(t,"network-request-failed"),a=$n().setTimeout(()=>{o(s)},_$.get());function c(){$n().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var T$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S$=500,A$=600,M$="_blank",R$="http://localhost",Eh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function N$(t,e,n,r=S$,i=A$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},T$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=et().toLowerCase();n&&(a=HA(l)?M$:n),BA(l)&&(e=e||R$,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(vB(l)&&a!=="_self")return x$(e||"",a),new Eh(null);let d=window.open(e||"",a,u);k(d,t,"popup-blocked");try{d.focus()}catch{}return new Eh(d)}function x$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var P$="__/auth/handler",O$="emulator/auth/handler",k$=encodeURIComponent("fac");function RA(t,e,n,r,i,o){return p(this,null,function*(){k(t.config.authDomain,t,"auth-domain-config-required"),k(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:i};if(e instanceof mh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Dc(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof rE){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${k$}=${encodeURIComponent(c)}`:"";return`${F$(t)}?${Wi(a).slice(1)}${l}`})}function F$({config:t}){return t.emulator?hE(t,O$):`https://${t.authDomain}/${P$}`}var z_="webStorageSupport",uE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=c$,this._overrideRedirectResult=o$}_openPopup(e,n,r,i){return p(this,null,function*(){var o;ni((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield RA(e,n,r,W_(),i);return N$(e,s,oM())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let o=yield RA(e,n,r,W_(),i);return HB(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ni(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield D$(e),r=new lE(e);return n.register("authEvent",i=>(k(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z_,{type:z_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[z_];s!==void 0&&n(!!s),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YA()||$A()||vE()}},dM=uE;var NA="@firebase/auth",xA="1.10.8";var dE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function L$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V$(t){fn(new ct("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;k(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KA(t)},l=new J_(r,i,o,c);return DB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new ct("auth-internal",e=>{let n=co(e.getProvider("auth").getImmediate());return(r=>new dE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ee(NA,xA,L$(t)),Ee(NA,xA,"esm2017")}var U$=5*60,j$=zv("authIdTokenMaxAge")||U$,PA=null,B$=t=>e=>p(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>j$)return;let i=n?.token;PA!==i&&(PA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function TE(t=qi()){let e=Es(t,"auth");if(e.isInitialized())return e.getImmediate();let n=yE(t,{popupRedirectResolver:dM,persistence:[lM,iM,DE]}),r=zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=B$(o.toString());wE(n,s,()=>s(n.currentUser)),Ih(n,a=>s(a))}}let i=$v("auth");return i&&_E(n,`http://${i}`),n}function $$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=oo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",$$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V$("Browser");function hM(t){return new O(function(e){var n=wh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var pM="auth",lo=class{constructor(e){return e}},ml=class{constructor(){return js(pM)}};var SE=new D("angularfire2.auth-instances");function MH(t,e){let n=il(pM,t,e);return n&&new lo(n)}function RH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new lo(r)}}var NH={provide:ml,deps:[[new Tt,SE]]},xH={provide:lo,useFactory:MH,deps:[[new Tt,SE],Nt]};function gM(t,...e){return Ee("angularfire",Zr.full,"auth"),Ot([xH,NH,{provide:SE,useFactory:RH(t),multi:!0,deps:[re,Re,Jr,io,[new Tt,$s],...e]}])}var mM=gn(hM,!0);var vM=gn(CE,!0,2);var yM=gn(TE,!0);var _M=gn(IE,!0,2);var EM=gn(bE,!0,2);var Ct=class t{constructor(e){this.auth=e;this.user$=mM(this.auth)}user$;register(e,n){return vM(this.auth,e,n)}login(e,n){return _M(this.auth,e,n)}logout(){return EM(this.auth)}static \u0275fac=function(n){return new(n||t)(x(lo))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var Yt=class t{constructor(e){this.app=e;this.db=Vs(this.app)}db;userId=null;getCart(e){if(!e)return A([]);let n=Et(this.db,`carts/${e}/items`);return new O(r=>({unsubscribe:no(n,o=>{let s=[];o.forEach(a=>{s.push(a.val())}),r.next(s)},o=>{r.error(o)})}))}addItemToCart(e,n,r){let i=Et(this.db,`carts/${e}/items/${n.id}`);return Ls(i).then(o=>{let s=o.val(),a=s?s.cantidad+r:r,c=P(_({},n),{cantidad:a});return Fs(i,c)})}updateItemQuantity(e,n,r){let i=Et(this.db,`carts/${e}/items/${n}`);return O_(i,{cantidad:r})}removeItemFromCart(e,n){let r=Et(this.db,`carts/${e}/items/${n}`);return P_(r)}registerPurchase(e,n,r){if(!e)throw new Error("No hay usuario logueado para registrar la compra.");let i=Et(this.db,`purchases/${e}`),o=rl(i),s={purchaseId:o.key||"",userId:e,items:n,total:r,timestamp:new Date().toISOString()};return Fs(o,s)}getPurchaseHistory(e){if(!e)return A([]);let n=Et(this.db,`purchases/${e}`);return new O(r=>({unsubscribe:no(n,o=>{let s=[];o.forEach(a=>{let c=a.val();s.push(_({purchaseId:a.key||""},c))}),r.next(s)},o=>{r.error(o)})}))}static \u0275fac=function(n){return new(n||t)(x(Nt))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var OH=t=>["/product",t],kH=(t,e)=>e.id;function FH(t,e){t&1&&(v(0,"div",4)(1,"p"),T(2,"Cargando el men\xFA de productos..."),E()())}function LH(t,e){if(t&1&&(v(0,"div",4)(1,"p"),T(2),E()()),t&2){let n=j(2);M(2),he(n.errorMessage)}}function VH(t,e){if(t&1&&(v(0,"span",22),T(1),E()),t&2){let n=e.$implicit;M(),st(" ",n," ")}}function UH(t,e){if(t&1&&(v(0,"div",15),nn(1,VH,2,1,"span",22,xa),E()),t&2){let n=j().$implicit;M(),rn(n.sabores)}}function jH(t,e){if(t&1){let n=At();v(0,"div",7)(1,"a",8),qe(2,"div",9),v(3,"div",10)(4,"h2",11),T(5),E(),v(6,"p",12),T(7),E(),v(8,"div",13)(9,"span",14),T(10),xe(11,"currency"),E(),Te(12,UH,3,0,"div",15),E()()(),v(13,"div",16)(14,"div",17)(15,"button",18),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.decrementQuantity(i))}),T(16,"-"),E(),v(17,"input",19),Z("input",function(i){let o=ue(n).$implicit,s=j(3);return de(s.onQuantityInputChange(o,i))}),E(),v(18,"button",20),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.incrementQuantity(i))}),T(19,"+"),E()(),v(20,"button",21),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.addToCart(i,i.selectedQuantity||0))}),T(21,"Agregar al Carrito"),E()()()}if(t&2){let n=e.$implicit,r=j(3);M(),Je("routerLink",_m(13,OH,n.id)),M(),ud("background-image","url("+(n.imagenUrl||"https://placehold.co/600x400/FF5733/FFFFFF?text="+r.encodeURIComponent(n.nombre||"Producto"))+")"),M(3),he(n.nombre),M(2),st(" ",n.descripcion," "),M(3),st(" ",jt(11,8,n.precio,"UYU","$","1.2-2")," "),M(2),Se(r.isPizza(n)&&n.sabores.length?12:-1),M(5),Je("value",n.selectedQuantity||0)}}function BH(t,e){if(t&1&&(v(0,"div",5),nn(1,jH,22,15,"div",7,kH),E()),t&2){let n=j();M(),rn(n)}}function $H(t,e){t&1&&(v(0,"div",6)(1,"p"),T(2,"Lo sentimos, no hay productos disponibles en este momento."),E()())}function HH(t,e){if(t&1&&(v(0,"div",3),Te(1,FH,3,0,"div",4)(2,LH,3,1,"div",4)(3,BH,3,0,"div",5)(4,$H,3,0,"div",6),E()),t&2){let n=j();M(),Se(n.loading?1:n.errorMessage?2:e.length>0?3:4)}}function zH(t,e){t&1&&(v(0,"div",4)(1,"p"),T(2,"Cargando el men\xFA de productos..."),E()())}var Th=class t{constructor(e,n,r){this.productService=e;this.authService=n;this.cartService=r}products$;userSubscription;userId=null;loading=!0;errorMessage=null;ngOnInit(){this.products$=this.authService.user$.pipe(ye(e=>(this.userId=e?e.uid:null,console.log("User ID en ProductList:",this.userId),this.loading=!0,this.productService.getProducts())),N(e=>(console.log("Datos de productos recibidos:",e),this.loading=!1,e.map(n=>P(_({},n),{selectedQuantity:0})))),xt(e=>(console.error("Error al cargar los productos:",e),this.loading=!1,this.errorMessage="No se pudieron cargar los productos. Por favor, intenta de nuevo m\xE1s tarde.",A([])))),this.userSubscription=this.products$.subscribe()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}incrementQuantity(e){e.selectedQuantity===void 0&&(e.selectedQuantity=0),e.selectedQuantity++}decrementQuantity(e){e.selectedQuantity===void 0&&(e.selectedQuantity=0),e.selectedQuantity>0&&e.selectedQuantity--}onQuantityInputChange(e,n){let r=n.target,i=parseInt(r.value,10);!isNaN(i)&&i>=0?e.selectedQuantity=i:(e.selectedQuantity=0,r.value="0")}addToCart(e,n){return p(this,null,function*(){if(!this.userId){alert("Debes iniciar sesi\xF3n para a\xF1adir productos al carrito.");return}if(n<=0){alert("Por favor, selecciona una cantidad mayor que 0 para a\xF1adir al carrito.");return}try{yield this.cartService.addItemToCart(this.userId,e,n),alert(`"${e.nombre}" x${n} a\xF1adido(s) al carrito.`),e.selectedQuantity=0}catch(r){console.error("Error al a\xF1adir al carrito:",r),alert("Ocurri\xF3 un error al a\xF1adir al carrito. Por favor, int\xE9ntalo de nuevo.")}})}encodeURIComponent(e){return encodeURIComponent(e)}isPizza(e){return e.tipo==="pizza"||e.sabores!==void 0}static \u0275fac=function(n){return new(n||t)(R(Bs),R(Ct),R(Yt))};static \u0275cmp=it({type:t,selectors:[["app-product-list"]],decls:7,vars:3,consts:[[1,"main-container"],[1,"content-wrapper"],[1,"menu-header"],[1,"pizza-grid-container","relative"],[1,"loading-message"],[1,"pizza-grid"],[1,"no-pizzas-message"],[1,"pizza-card-3d"],[1,"pizza-card-link-content",3,"routerLink"],[1,"pizza-image"],[1,"pizza-details"],[1,"pizza-name"],[1,"pizza-description"],[1,"pizza-footer"],[1,"pizza-price"],[1,"pizza-flavors"],[1,"add-to-cart-section"],[1,"quantity-controls"],[1,"quantity-button","minus-button",3,"click"],["type","number","min","0",1,"quantity-input",3,"input","value"],[1,"quantity-button","plus-button",3,"click"],[1,"add-to-cart-button",3,"click"],[1,"pizza-flavor-tag"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"div",1)(2,"header",2),T(3," Menu Piedraviva "),E(),Te(4,HH,5,1,"div",3),xe(5,"async"),St(6,zH,3,0,"div",4),E()()),n&2){let i;M(4),Se((i=Ut(5,1,r.products$))?4:6,i)}},dependencies:[yt,Ht,ps,sn,ir],styles:['@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6K6MmTpA.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6D6MmTpA.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6I6MmTpA.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6J6MmTpA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6H6Mk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#ece9cd;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.content-wrapper[_ngcontent-%COMP%]{max-width:1280px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden}.menu-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1.5rem;text-align:center;font-size:3.5rem;font-weight:400;letter-spacing:.05em;text-transform:none;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;margin-bottom:2rem;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.pizza-grid-container[_ngcontent-%COMP%]{perspective:1500px;padding:2rem}.pizza-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;justify-items:center}.pizza-card-3d[_ngcontent-%COMP%]{position:relative;transform-style:preserve-3d;transition:transform .5s cubic-bezier(.25,.8,.25,1),box-shadow .5s ease;border:2px solid #4a5568;box-shadow:0 10px 20px #0000004d;display:flex;flex-direction:column;background-color:#2d3748;border-radius:.75rem;overflow:hidden;width:100%;max-width:320px;padding-bottom:11rem}.pizza-card-3d[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 40px #0009;z-index:10}.pizza-card-link-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit;padding-bottom:1rem}.pizza-image[_ngcontent-%COMP%]{border-top-left-radius:.75rem;border-top-right-radius:.75rem;background-size:cover;background-position:center;display:block;min-height:192px;width:100%}.pizza-details[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem;line-height:1.2}.pizza-description[_ngcontent-%COMP%]{color:#a0aec0;margin-bottom:1rem;font-size:.875rem;flex-grow:1;height:4rem;overflow:hidden}.pizza-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:1rem;border-top:1px solid #4a5568}.pizza-price[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:800;color:#f6e05e}.pizza-flavors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:flex-end}.pizza-flavor-tag[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px;box-shadow:0 1px 2px #0000000d;white-space:nowrap}.add-to-cart-section[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;display:flex;flex-direction:column;align-items:center;padding:.75rem 1.5rem;background-color:#2d3748;border-top:1px solid #4a5568;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;box-shadow:0 -2px 10px #0003;transform:translateZ(1px);gap:.75rem;box-sizing:border-box}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem;width:100%;justify-content:center}.quantity-button[_ngcontent-%COMP%]{background-color:#4a5568;color:#fff;border:1px solid #4a5568;width:35px;height:35px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.quantity-button.minus-button[_ngcontent-%COMP%]{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.quantity-button.plus-button[_ngcontent-%COMP%]{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.quantity-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:1px solid #4a5568;border-radius:0;background-color:#1a202c;color:#e2e8f0;font-size:1rem;text-align:center;appearance:textfield;-moz-appearance:textfield;box-sizing:border-box}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.add-to-cart-button[_ngcontent-%COMP%]{width:100%;background-color:#f6e05e;color:#1a202c;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1.125rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a;box-sizing:border-box}.add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateZ(5px)}.add-to-cart-button[_ngcontent-%COMP%]:active{transform:translateZ(0) scale(.98)}.loading-message[_ngcontent-%COMP%], .no-pizzas-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:50vh;background-color:#2d3748;color:#a0aec0;font-size:1.25rem}@media (max-width: 768px){.menu-header[_ngcontent-%COMP%]{font-size:2.8rem}.pizza-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.pizza-card-3d[_ngcontent-%COMP%]{margin:0 auto;max-width:350px}.add-to-cart-section[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.quantity-button[_ngcontent-%COMP%], .quantity-input[_ngcontent-%COMP%]{flex-shrink:0}.add-to-cart-button[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0}}@media (max-width: 480px){.menu-header[_ngcontent-%COMP%]{font-size:2.2rem}.content-wrapper[_ngcontent-%COMP%], .pizza-details[_ngcontent-%COMP%]{padding:1rem}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem}.pizza-price[_ngcontent-%COMP%]{font-size:1.2rem}.add-to-cart-button[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem 1rem}}']})};var WH=(t,e)=>e.id;function GH(t,e){if(t&1){let n=At();v(0,"div",9),qe(1,"img",14),v(2,"div",15)(3,"h2",16),T(4),E(),v(5,"p",17),T(6),xe(7,"currency"),E()(),v(8,"div",18)(9,"button",19),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.decrementQuantity(i))}),T(10,"-"),E(),v(11,"input",20),Z("input",function(i){let o=ue(n).$implicit,s=j(3);return de(s.onQuantityChange(o,i))})("blur",function(i){let o=ue(n).$implicit,s=j(3);return de(s.onQuantityBlur(o,i))}),E(),v(12,"button",21),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.incrementQuantity(i))}),T(13,"+"),E(),v(14,"button",22),Z("click",function(){let i=ue(n).$implicit,o=j(3);return de(o.removeItem(i))}),T(15,"Eliminar"),E()(),v(16,"span",23),T(17),xe(18,"currency"),E()()}if(t&2){let n=e.$implicit;M(),Je("src",n.imagenUrl||"https://placehold.co/100x100/FF5733/FFFFFF?text=Producto",Nr)("alt",n.nombre),M(3),he(n.nombre),M(2),he(jt(7,6,n.precio,"UYU","$","1.2-2")),M(5),Je("value",n.cantidad===0?"":n.cantidad),M(6),he(jt(18,11,n.precio*n.cantidad,"UYU","$","1.2-2"))}}function qH(t,e){if(t&1){let n=At();v(0,"div",8),nn(1,GH,19,16,"div",9,WH),E(),v(3,"div",10)(4,"div",11)(5,"span"),T(6,"Total:"),E(),v(7,"span",12),T(8),xe(9,"async"),xe(10,"currency"),E()(),v(11,"button",13),Z("click",function(){ue(n);let i=j(2);return de(i.checkout())}),T(12,"Comprar Ahora"),E()()}if(t&2){let n=j(),r=j();M(),rn(n),M(7),he(jt(10,3,Ut(9,1,r.totalAmount$),"UYU","$","1.2-2"))}}function YH(t,e){t&1&&(v(0,"div",7)(1,"p"),T(2,"Tu carrito est\xE1 vac\xEDo. \xA1Agrega algunos productos deliciosos!"),E(),v(3,"a",24),T(4,"Ver Men\xFA"),E()())}function KH(t,e){t&1&&Te(0,qH,13,8)(1,YH,5,0,"div",7),t&2&&Se(e.length>0?0:1)}function QH(t,e){t&1&&(v(0,"div",5)(1,"p"),T(2,"Cargando tu carrito..."),E()())}function ZH(t,e){if(t&1){let n=At();v(0,"div",6)(1,"button",25),Z("click",function(){ue(n);let i=j();return de(i.viewPurchaseHistory())}),T(2,"Ver Historial de Compras"),E()()}}var Sh=class t{constructor(e,n,r,i){this.cartService=e;this.authService=n;this.router=r;this.http=i;this.totalAmount$=this.cartItems$.pipe(N(o=>{let s=this.calculateTotal(o);return console.log("ShoppingCartComponent: Items being passed to calculateTotal (from totalAmount$ pipe):",o),console.log("ShoppingCartComponent: Calculated total (from totalAmount$ pipe):",s),s}))}cartItems$=new ke([]);totalAmount$;currentUserSubscription;userId=null;showPurchaseHistoryButton=!1;editedQuantities=new Map;mercadoPagoBackendUrl="https://piedraviva-app-backend.onrender.com/create_preference";ngOnInit(){this.currentUserSubscription=this.authService.user$.pipe(ye(e=>(this.userId=e?e.uid:null,console.log("ShoppingCartComponent: User ID after auth state change:",this.userId),this.userId?(this.checkPurchaseHistory(this.userId),this.cartService.getCart(this.userId)):(this.showPurchaseHistoryButton=!1,A([])))),N(e=>(this.editedQuantities.clear(),console.log("ShoppingCartComponent: Carrito recibido (items crudos) del servicio y procesado:",e),e))).subscribe(e=>{this.cartItems$.next(e)})}ngOnDestroy(){this.currentUserSubscription&&this.currentUserSubscription.unsubscribe(),this.cartItems$.complete()}checkPurchaseHistory(e){this.cartService.getPurchaseHistory(e).pipe(Qt(1),N(n=>(console.log("ShoppingCartComponent: Historial de compras para checkPurchaseHistory:",n),n.length>0))).subscribe(n=>{this.showPurchaseHistoryButton=n,console.log("ShoppingCartComponent: \xBFTiene historial de compras?",n)})}calculateTotal(e){return console.log("calculateTotal: Recibiendo items para sumar:",e),e.reduce((n,r)=>{console.log(`calculateTotal: Sumando item: ${r.nombre}, Precio: ${r.precio}, Cantidad: ${r.cantidad}`);let i=typeof r.precio=="number"?r.precio:parseFloat(r.precio)||0,o=typeof r.cantidad=="number"?r.cantidad:parseInt(r.cantidad,10)||0,s=i*o;return console.log(`calculateTotal: Subtotal para ${r.nombre}: ${s}`),n+s},0)}onQuantityChange(e,n){let r=n.target,i=r.value.trim(),o;if(i==="")o=0;else{let c=parseInt(i,10);if(isNaN(c)||c<0){console.warn(`ShoppingCartComponent: Invalid entry for "${e.nombre}". Restored to ${e.cantidad}.`),r.value=String(e.cantidad);return}o=c}this.editedQuantities.set(e.id,o),console.log(`ShoppingCartComponent: Cantidad de "${e.nombre}" editada a ${o} (localmente).`);let s=this.cartItems$.getValue(),a=s.findIndex(c=>c.id===e.id);if(a>-1){let c=[...s];c[a]=P(_({},c[a]),{cantidad:o}),this.cartItems$.next(c)}}onQuantityBlur(e,n){let r=n.target,i=r.value.trim(),o=parseInt(i,10);if(isNaN(o)||o<0)o=1,this.editedQuantities.set(e.id,o),r.value=String(o),console.log(`ShoppingCartComponent: Invalid input for "${e.nombre}" on blur. Restored to 1.`);else if(o===0){this.removeItem(e),this.editedQuantities.delete(e.id);return}this.hasEditedQuantity(e)?(console.log(`ShoppingCartComponent: onQuantityBlur triggered for "${e.nombre}". Saving quantity.`),this.saveQuantity(e)):o===e.cantidad&&this.editedQuantities.has(e.id)&&this.editedQuantities.delete(e.id)}incrementQuantity(e){let n=this.editedQuantities.get(e.id);n===void 0&&(n=e.cantidad);let r=n+1;this.editedQuantities.set(e.id,r);let i=this.cartItems$.getValue(),o=i.findIndex(s=>s.id===e.id);if(o>-1){let s=[...i];s[o]=P(_({},s[o]),{cantidad:r}),this.cartItems$.next(s),this.saveQuantity(s[o])}console.log(`ShoppingCartComponent: Quantity of "${e.nombre}" incremented to ${r} (locally).`)}decrementQuantity(e){let n=this.editedQuantities.get(e.id);if(n===void 0&&(n=e.cantidad),n>0){let r=n-1;this.editedQuantities.set(e.id,r);let i=this.cartItems$.getValue(),o=i.findIndex(s=>s.id===e.id);if(o>-1){let s=[...i];s[o]=P(_({},s[o]),{cantidad:r}),this.cartItems$.next(s),r===0?this.removeItem(s[o]):this.saveQuantity(s[o])}console.log(`ShoppingCartComponent: Quantity of "${e.nombre}" decremented to ${r} (locally).`)}else console.log(`ShoppingCartComponent: Quantity of "${e.nombre}" is already 0, cannot decrement further.`)}hasEditedQuantity(e){let n=this.editedQuantities.get(e.id);return n!==void 0&&n!==e.cantidad}saveQuantity(e){return p(this,null,function*(){if(!this.userId||!e.id){alert("Error: No se pudo identificar al usuario o al producto.");return}let n=this.editedQuantities.get(e.id);if(n===void 0){console.log(`ShoppingCartComponent: No quantity change for "${e.nombre}" to save.`);return}if(n===0){this.removeItem(e),this.editedQuantities.delete(e.id);return}if(isNaN(n)||n<0){alert("Por favor, ingresa una cantidad v\xE1lida (mayor o igual a cero)."),this.editedQuantities.delete(e.id);let r=this.cartItems$.getValue(),i=r.find(o=>o.id===e.id);if(i){let o=r.map(s=>s.id===e.id?P(_({},s),{cantidad:i.cantidad}):s);this.cartItems$.next(o)}return}try{yield this.cartService.updateItemQuantity(this.userId,e.id,n),console.log(`ShoppingCartComponent: Cantidad de "${e.nombre}" actualizada a ${n} en Firebase.`),this.editedQuantities.delete(e.id)}catch(r){console.error("ShoppingCartComponent: Error al actualizar la cantidad en Firebase:",r),alert("Error al actualizar la cantidad. Por favor, int\xE9ntalo de nuevo.")}})}removeItem(e){return p(this,null,function*(){if(!this.userId||!e.id){alert("Error: No se pudo identificar al usuario o al producto para eliminar.");return}if(confirm(`\xBFEst\xE1s seguro de que quieres eliminar "${e.nombre}" del carrito?`))try{yield this.cartService.removeItemFromCart(this.userId,e.id),alert(`"${e.nombre}" eliminado del carrito.`),console.log(`ShoppingCartComponent: "${e.nombre}" eliminado del carrito en Firebase.`),this.editedQuantities.delete(e.id)}catch(n){console.error("ShoppingCartComponent: Error al eliminar el item del carrito en Firebase:",n),alert("Error al eliminar el item del carrito. Por favor, int\xE9ntalo de nuevo.")}})}checkout(){return p(this,null,function*(){if(!this.userId){alert("Debes iniciar sesi\xF3n para completar la compra.");return}let e=this.cartItems$.getValue();if(e.length===0){alert("Tu carrito est\xE1 vac\xEDo. Agrega productos antes de comprar.");return}let n=e.map(r=>({title:r.nombre,quantity:r.cantidad,unit_price:r.precio}));try{let r=yield this.http.post(this.mercadoPagoBackendUrl,{items:n}).toPromise();r&&r.init_point?(console.log("Mercado Pago Preference created:",r.id),console.log("Redirecting to:",r.init_point),window.location.href=r.init_point):(alert("Error al iniciar el pago con Mercado Pago: No se recibi\xF3 un punto de inicio v\xE1lido."),console.error("Mercado Pago Backend response missing init_point:",r))}catch(r){console.error("Error al crear la preferencia de Mercado Pago:",r),alert("Ocurri\xF3 un error al procesar tu pago con Mercado Pago. Por favor, int\xE9ntalo de nuevo.")}})}viewPurchaseHistory(){this.router.navigate(["/purchase-history"])}static \u0275fac=function(n){return new(n||t)(R(Yt),R(Ct),R($i),R(Rd))};static \u0275cmp=it({type:t,selectors:[["app-shopping-cart"]],decls:11,vars:4,consts:[[1,"cart-main-container"],[1,"cart-content-wrapper"],[1,"back-button-container"],["routerLink","/",1,"back-button"],[1,"cart-title"],[1,"loading-message-cart"],[1,"purchase-history-button-container"],[1,"empty-cart-message"],[1,"cart-items-grid"],[1,"cart-item-card"],[1,"cart-summary"],[1,"total-section"],[1,"total-amount"],[1,"checkout-button",3,"click"],[1,"cart-item-image",3,"src","alt"],[1,"item-details"],[1,"item-name"],[1,"item-price"],[1,"item-controls"],[1,"quantity-button","minus-button",3,"click"],["type","number","min","0",1,"item-quantity-input",3,"input","blur","value"],[1,"quantity-button","plus-button",3,"click"],[1,"remove-item-button",3,"click"],[1,"item-subtotal"],["routerLink","/",1,"back-to-menu-button"],[1,"view-history-button",3,"click"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),T(4,"\u2190 Seguir Comprando"),E()(),v(5,"h1",4),T(6,"Tu Carrito de Compras"),E(),Te(7,KH,2,1),xe(8,"async"),St(9,QH,3,0,"div",5),Te(10,ZH,3,0,"div",6),E()()),n&2){let i;M(7),Se((i=Ut(8,2,r.cartItems$))?7:9,i),M(3),Se(r.showPurchaseHistoryButton?10:-1)}},dependencies:[yt,Ht,ev,sn,ir],styles:[".cart-main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#1a202c;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.cart-content-wrapper[_ngcontent-%COMP%]{max-width:800px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden;padding:2rem;position:relative}.back-button-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-button[_ngcontent-%COMP%]{display:inline-block;background-color:#4a5568;color:#e2e8f0;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#64748b}.company-logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.company-logo[_ngcontent-%COMP%]{max-width:150px;height:auto;display:inline-block}.cart-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;text-align:center;margin-bottom:2rem;color:#f6e05e;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.cart-items-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;margin-bottom:2rem}.cart-item-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#1a202c;border-radius:.5rem;box-shadow:0 5px 15px #0003;padding:1rem;gap:1rem;flex-wrap:wrap}.cart-item-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:.375rem;object-fit:cover;flex-shrink:0}.item-details[_ngcontent-%COMP%]{flex-grow:1}.item-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff;margin-bottom:.25rem}.item-price[_ngcontent-%COMP%]{font-size:1rem;color:#a0aec0}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;margin-top:.5rem;width:100%;justify-content:center;border:1px solid #4a5568;border-radius:.375rem;overflow:hidden}@media (min-width: 640px){.item-controls[_ngcontent-%COMP%]{width:auto;margin-top:0;justify-content:flex-start}}.quantity-button[_ngcontent-%COMP%]{background-color:#4a5568;color:#fff;border:none;width:35px;height:35px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.quantity-button[_ngcontent-%COMP%]:hover{background-color:#64748b}.quantity-button.minus-button[_ngcontent-%COMP%]{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem;border-top-right-radius:0;border-bottom-right-radius:0}.quantity-button.plus-button[_ngcontent-%COMP%]{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem;border-top-left-radius:0;border-bottom-left-radius:0}.item-quantity-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:none;border-radius:0;background-color:#1a202c;color:#e2e8f0;font-size:1rem;text-align:center;appearance:textfield;-moz-appearance:textfield;box-sizing:border-box}.item-quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .item-quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.remove-item-button[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;padding:.5rem 1rem;border:none;border-radius:.375rem;font-size:.9rem;font-weight:600;cursor:pointer;transition:background-color .2s ease;margin-left:.75rem}.remove-item-button[_ngcontent-%COMP%]:hover{background-color:#c53030}.item-subtotal[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#f6e05e;flex-shrink:0;margin-left:auto}@media (max-width: 639px){.cart-item-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.item-details[_ngcontent-%COMP%]{width:100%}.item-subtotal[_ngcontent-%COMP%]{margin-left:0;width:100%;text-align:right;margin-top:.5rem}}.cart-summary[_ngcontent-%COMP%]{background-color:#1a202c;border-radius:.5rem;padding:1.5rem;box-shadow:0 5px 15px #0003;display:flex;flex-direction:column;gap:1.5rem}.total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:1.5rem;font-weight:700;color:#fff}.total-amount[_ngcontent-%COMP%]{color:#f6e05e;font-size:2rem}.checkout-button[_ngcontent-%COMP%]{width:100%;background-color:#48bb78;color:#1a202c;padding:1rem 2rem;border:none;border-radius:.5rem;font-size:1.25rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 4px 6px #0000001a}.checkout-button[_ngcontent-%COMP%]:hover{background-color:#38a169;transform:translateY(-2px)}.checkout-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}.empty-cart-message[_ngcontent-%COMP%], .loading-message-cart[_ngcontent-%COMP%]{text-align:center;padding:3rem;font-size:1.25rem;color:#a0aec0}.back-to-menu-button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;background-color:#c53030;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-to-menu-button[_ngcontent-%COMP%]:hover{background-color:#a02020}.purchase-history-button-container[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.view-history-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a}.view-history-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-1px)}.view-history-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #0000001a}"]})};var JH=(t,e)=>e.purchaseId,XH=(t,e)=>e.id;function ez(t,e){t&1&&(v(0,"div",7)(1,"p"),T(2,"Cargando tu historial de compras..."),E()())}function tz(t,e){if(t&1&&(v(0,"div",16),qe(1,"img",19),v(2,"div",20)(3,"span",21),T(4),E(),v(5,"span",22),T(6),E(),v(7,"span",23),T(8),xe(9,"currency"),E()()()),t&2){let n=e.$implicit;M(),Je("src",n.imagenUrl||"https://placehold.co/50x50/FF5733/FFFFFF?text=Producto",Nr)("alt",n.nombre),M(3),he(n.nombre),M(2),st("x",n.cantidad),M(2),he(jt(9,5,n.precio*n.cantidad,"UYU","$","1.2-2"))}}function nz(t,e){if(t&1&&(v(0,"div",11)(1,"div",12)(2,"span",13),T(3),E(),v(4,"span",14),T(5),xe(6,"date"),E()(),v(7,"div",15),nn(8,tz,10,10,"div",16,XH),E(),v(10,"div",17)(11,"span"),T(12,"Total de la Compra:"),E(),v(13,"span",18),T(14),xe(15,"currency"),E()()()),t&2){let n=e.$implicit;M(3),st("Compra ID: ",n.purchaseId.substring(0,8),"..."),M(2),he(Cm(6,3,n.timestamp,"short")),M(3),rn(n.items),M(6),he(jt(15,6,n.total,"UYU","$","1.2-2"))}}function rz(t,e){if(t&1&&(v(0,"div",9),nn(1,nz,16,11,"div",11,JH),E()),t&2){let n=j();M(),rn(n)}}function iz(t,e){t&1&&(v(0,"div",10)(1,"p"),T(2,"No tienes compras registradas a\xFAn."),E(),v(3,"a",24),T(4,"Explorar Men\xFA"),E()())}function oz(t,e){t&1&&Te(0,rz,3,0,"div",9)(1,iz,5,0,"div",10),t&2&&Se(e.length>0?0:1)}function sz(t,e){t&1&&(v(0,"div",8)(1,"p"),T(2,"Ocurri\xF3 un error al cargar el historial de compras."),E()())}function az(t,e){if(t&1&&(Te(0,oz,2,1),xe(1,"async"),St(2,sz,3,0,"div",8)),t&2){let n,r=j();Se((n=Ut(1,1,r.purchases$))?0:2,n)}}var Ah=class t{constructor(e,n){this.authService=e;this.cartService=n;this.purchases$=A([])}purchases$;currentUserSubscription;userId=null;loading=!0;ngOnInit(){this.currentUserSubscription=this.authService.user$.pipe(ye(e=>(this.userId=e?e.uid:null,this.userId?(this.loading=!0,this.cartService.getPurchaseHistory(this.userId)):(this.loading=!1,A([])))),N(e=>(this.loading=!1,console.log("Historial de compras cargado:",e),e.sort((n,r)=>new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime())))).subscribe(e=>this.purchases$=A(e),e=>{console.error("Error al cargar el historial de compras:",e),this.loading=!1,this.purchases$=A([])})}ngOnDestroy(){this.currentUserSubscription&&this.currentUserSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)(R(Ct),R(Yt))};static \u0275cmp=it({type:t,selectors:[["app-purchase-history"]],decls:11,vars:1,consts:[[1,"history-main-container"],[1,"history-content-wrapper"],[1,"back-button-container"],["routerLink","/cart",1,"back-button"],[1,"company-logo-container"],["src","https://placehold.co/150x50/FFDDC1/000000?text=Tu+Logo","alt","Logo de la Empresa",1,"company-logo"],[1,"history-title"],[1,"loading-message-history"],[1,"error-loading-history"],[1,"purchases-grid"],[1,"empty-history-message"],[1,"purchase-card"],[1,"purchase-header"],[1,"purchase-id"],[1,"purchase-date"],[1,"purchase-items-list"],[1,"purchase-item"],[1,"purchase-total"],[1,"total-amount"],[1,"purchase-item-image",3,"src","alt"],[1,"purchase-item-details"],[1,"purchase-item-name"],[1,"purchase-item-quantity"],[1,"purchase-item-price"],["routerLink","/",1,"back-to-menu-button"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),T(4,"\u2190 Volver al Carrito"),E()(),v(5,"div",4),qe(6,"img",5),E(),v(7,"h1",6),T(8,"Historial de Compras"),E(),Te(9,ez,3,0,"div",7)(10,az,3,3),E()()),n&2&&(M(9),Se(r.loading?9:10))},dependencies:[yt,Ht,sn,ir,Um],styles:[".history-main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#1a202c;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.history-content-wrapper[_ngcontent-%COMP%]{max-width:800px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden;padding:2rem;position:relative}.back-button-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-button[_ngcontent-%COMP%]{display:inline-block;background-color:#4a5568;color:#e2e8f0;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#64748b}.history-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;text-align:center;margin-bottom:2rem;color:#f6e05e;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.loading-message-history[_ngcontent-%COMP%], .empty-history-message[_ngcontent-%COMP%], .error-loading-history[_ngcontent-%COMP%]{text-align:center;padding:3rem;font-size:1.25rem;color:#a0aec0}.back-to-menu-button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;background-color:#c53030;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-to-menu-button[_ngcontent-%COMP%]:hover{background-color:#a02020}.purchases-grid[_ngcontent-%COMP%]{display:grid;gap:2rem}.purchase-card[_ngcontent-%COMP%]{background-color:#1a202c;border-radius:.5rem;box-shadow:0 5px 15px #0003;padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.purchase-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #4a5568;padding-bottom:.75rem;margin-bottom:.75rem}.purchase-id[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#a0aec0}.purchase-date[_ngcontent-%COMP%]{font-size:.9rem;color:#a0aec0}.purchase-items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.purchase-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background-color:#2d3748;padding:.75rem;border-radius:.375rem;box-shadow:inset 0 1px 3px #0000001a}.purchase-item-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:.25rem;object-fit:cover;flex-shrink:0}.purchase-item-details[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.purchase-item-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex-basis:100%}@media (min-width: 640px){.purchase-item-name[_ngcontent-%COMP%]{flex-basis:auto}}.purchase-item-quantity[_ngcontent-%COMP%]{font-size:.875rem;color:#a0aec0;margin-left:auto}.purchase-item-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#f6e05e;margin-left:.5rem}.purchase-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-top:1px solid #4a5568;padding-top:1rem;margin-top:1rem;font-size:1.25rem;font-weight:700;color:#fff}.purchase-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:#f6e05e;font-size:1.5rem}"]})};function cz(t,e){t&1&&(v(0,"div",4)(1,"p"),T(2,"Cargando detalles del producto..."),E()())}function lz(t,e){if(t&1&&(v(0,"div",5)(1,"p"),T(2),E()()),t&2){let n=j();M(2),he(n.errorMessage)}}function uz(t,e){if(t&1&&(v(0,"span",19),T(1),E()),t&2){let n=e.$implicit;M(),he(n)}}function dz(t,e){if(t&1&&(v(0,"div",12),nn(1,uz,2,1,"span",19,xa),E()),t&2){let n=j(2);M(),rn(n.sabores)}}function fz(t,e){if(t&1){let n=At();v(0,"div",6)(1,"div",7),qe(2,"img",8),E(),v(3,"div",9)(4,"h2",10),T(5),E(),v(6,"p",11),T(7),E(),Te(8,dz,3,0,"div",12),v(9,"div",13)(10,"span",14),T(11),xe(12,"currency"),E(),v(13,"div",15)(14,"button",16),Z("click",function(){ue(n);let i=j(3);return de(i.decrementQuantity())}),T(15,"-"),E(),v(16,"input",17),Z("input",function(i){ue(n);let o=j(3);return de(o.onQuantityInputChange(i))}),E(),v(17,"button",16),Z("click",function(){ue(n);let i=j(3);return de(i.incrementQuantity())}),T(18,"+"),E(),v(19,"button",18),Z("click",function(){ue(n);let i=j(),o=j(2);return de(o.addToCart(i))}),T(20,"Agregar al Carrito"),E()()()()()}if(t&2){let n=j(),r=j(2);M(2),Je("alt",ym("Imagen de ",n.nombre))("src",n.imagenUrl||"https://placehold.co/600x400/FF5733/FFFFFF?text="+r.encodeURIComponent(n.nombre||"Producto"),Nr),M(3),he(n.nombre),M(2),he(n.descripcion),M(),Se(r.isPizza(n)?8:-1),M(3),he(jt(12,8,n.precio,"UYU","$","1.2-2")),M(5),Je("value",r.selectedQuantity)}}function hz(t,e){t&1&&(v(0,"div",5)(1,"p"),T(2,"Producto no encontrado."),E()())}function pz(t,e){t&1&&Te(0,fz,21,13,"div",6)(1,hz,3,0,"div",5),t&2&&Se(e?0:1)}function gz(t,e){t&1&&(v(0,"div",5)(1,"p"),T(2,"Producto no encontrado o error desconocido en el flujo de datos."),E()())}function mz(t,e){if(t&1&&(Te(0,pz,2,1),xe(1,"async"),St(2,gz,3,0,"div",5)),t&2){let n,r=j();Se((n=Ut(1,1,r.product$))?0:2,n)}}var Mh=class t{constructor(e,n,r,i){this.route=e;this.productService=n;this.cartService=r;this.authService=i;this.product$=this.route.paramMap.pipe(N(o=>o.get("id")),ye(o=>(this.loading=!0,this.errorMessage=null,o?this.productService.getProductById(o).pipe(N(s=>(this.loading=!1,s&&(this.selectedQuantity=1),s)),xt(s=>(this.loading=!1,this.errorMessage="Error al cargar el producto. Por favor, int\xE9ntelo de nuevo m\xE1s tarde.",console.error("Error al cargar el producto:",s),A(void 0)))):(this.loading=!1,this.errorMessage="ID de producto no proporcionado.",A(void 0)))))}product$;loading=!0;errorMessage=null;selectedQuantity=0;userId=null;userSubscription;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.userId=e?e.uid:null})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}onQuantityInputChange(e){let n=e.target,r=parseInt(n.value,10);!isNaN(r)&&r>=0&&(this.selectedQuantity=r)}incrementQuantity(){this.selectedQuantity++}decrementQuantity(){this.selectedQuantity>0&&this.selectedQuantity--}addToCart(e){return p(this,null,function*(){if(!this.userId){alert("Debes iniciar sesi\xF3n para a\xF1adir productos al carrito.");return}if(this.selectedQuantity<=0){alert("Por favor, selecciona una cantidad mayor que 0 para a\xF1adir al carrito.");return}try{yield this.cartService.addItemToCart(this.userId,e,this.selectedQuantity),alert(`"${e.nombre}" x${this.selectedQuantity} a\xF1adido(s) al carrito.`),this.selectedQuantity=1}catch(n){console.error("Error al a\xF1adir al carrito:",n),alert("Ocurri\xF3 un error al a\xF1adir al carrito. Por favor, int\xE9ntalo de nuevo.")}})}isPizza(e){return e.tipo==="pizza"||e.sabores!==void 0}encodeURIComponent(e){return encodeURIComponent(e)}static \u0275fac=function(n){return new(n||t)(R(cn),R(Bs),R(Yt),R(Ct))};static \u0275cmp=it({type:t,selectors:[["app-product-detail"]],decls:8,vars:1,consts:[[1,"detail-main-container"],[1,"detail-content-wrapper"],[1,"back-button-container"],["routerLink","/",1,"back-button"],[1,"loading-message-detail"],[1,"not-found-message"],[1,"product-detail-card"],[1,"product-detail-image-container"],[1,"product-detail-image",3,"src","alt"],[1,"product-detail-info"],[1,"product-detail-name"],[1,"product-detail-description"],[1,"product-flavor-tags"],[1,"product-detail-price-section"],[1,"product-detail-price"],[1,"add-to-cart-controls"],[1,"quantity-button",3,"click"],["type","number","min","1",1,"quantity-input",3,"input","value"],[1,"add-button",3,"click"],[1,"product-flavor-tag-detail"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),T(4,"\u2190 Volver al Men\xFA"),E()(),Te(5,cz,3,0,"div",4)(6,lz,3,1,"div",5)(7,mz,3,3),E()()),n&2&&(M(5),Se(r.loading?5:r.errorMessage?6:7))},dependencies:[yt,Ht,ps,sn,ir],styles:['@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6K6MmTpA.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6D6MmTpA.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6I6MmTpA.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6J6MmTpA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6H6Mk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#ece9cd;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.content-wrapper[_ngcontent-%COMP%]{max-width:1280px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden}.menu-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1.5rem;text-align:center;font-size:3.5rem;font-weight:400;letter-spacing:.05em;text-transform:none;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;margin-bottom:2rem;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.pizza-grid-container[_ngcontent-%COMP%]{perspective:1500px;padding:2rem}.pizza-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;justify-items:center}.pizza-card-3d[_ngcontent-%COMP%]{position:relative;transform-style:preserve-3d;transition:transform .5s cubic-bezier(.25,.8,.25,1),box-shadow .5s ease;border:2px solid #4a5568;box-shadow:0 10px 20px #0000004d;display:flex;flex-direction:column;background-color:#2d3748;border-radius:.75rem;overflow:hidden;width:100%;max-width:320px;padding-bottom:11rem}.pizza-card-3d[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 40px #0009;z-index:10}.pizza-card-link-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit;padding-bottom:1rem}.pizza-image[_ngcontent-%COMP%]{border-top-left-radius:.75rem;border-top-right-radius:.75rem;background-size:cover;background-position:center;display:block;min-height:192px;width:100%}.pizza-details[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem;line-height:1.2}.pizza-description[_ngcontent-%COMP%]{color:#a0aec0;margin-bottom:1rem;font-size:.875rem;flex-grow:1;height:4rem;overflow:hidden}.pizza-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:1rem;border-top:1px solid #4a5568}.pizza-price[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:800;color:#f6e05e}.pizza-flavors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:flex-end}.pizza-flavor-tag[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px;box-shadow:0 1px 2px #0000000d;white-space:nowrap}.add-to-cart-section[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;display:flex;flex-direction:column;align-items:center;padding:.75rem 1.5rem;background-color:#2d3748;border-top:1px solid #4a5568;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;box-shadow:0 -2px 10px #0003;transform:translateZ(1px);gap:.75rem;box-sizing:border-box}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem;width:100%;justify-content:center}.quantity-button[_ngcontent-%COMP%]{background-color:#4a5568;color:#fff;border:1px solid #4a5568;width:35px;height:35px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.quantity-button.minus-button[_ngcontent-%COMP%]{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.quantity-button.plus-button[_ngcontent-%COMP%]{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.quantity-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:1px solid #4a5568;border-radius:0;background-color:#1a202c;color:#e2e8f0;font-size:1rem;text-align:center;appearance:textfield;-moz-appearance:textfield;box-sizing:border-box}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.add-to-cart-button[_ngcontent-%COMP%]{width:100%;background-color:#f6e05e;color:#1a202c;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1.125rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a;box-sizing:border-box}.add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateZ(5px)}.add-to-cart-button[_ngcontent-%COMP%]:active{transform:translateZ(0) scale(.98)}.loading-message[_ngcontent-%COMP%], .no-pizzas-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:50vh;background-color:#2d3748;color:#a0aec0;font-size:1.25rem}@media (max-width: 768px){.menu-header[_ngcontent-%COMP%]{font-size:2.8rem}.pizza-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.pizza-card-3d[_ngcontent-%COMP%]{margin:0 auto;max-width:350px}.add-to-cart-section[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.quantity-button[_ngcontent-%COMP%], .quantity-input[_ngcontent-%COMP%]{flex-shrink:0}.add-to-cart-button[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0}}@media (max-width: 480px){.menu-header[_ngcontent-%COMP%]{font-size:2.2rem}.content-wrapper[_ngcontent-%COMP%], .pizza-details[_ngcontent-%COMP%]{padding:1rem}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem}.pizza-price[_ngcontent-%COMP%]{font-size:1.2rem}.add-to-cart-button[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem 1rem}}']})};var CM=[{path:"",component:Th},{path:"cart",component:Sh},{path:"purchase-history",component:Ah},{path:"product/:id",component:Mh},{path:"**",redirectTo:""}];var vl=class{constructor(e){return e}},IM="database",AE=class{constructor(){return js(IM)}};var ME=new D("angularfire2.database-instances");function vz(t,e){let n=il(IM,t,e);return n&&new vl(n)}function yz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new vl(r)}}var _z={provide:AE,deps:[[new Tt,ME]]},Ez={provide:vl,useFactory:vz,deps:[[new Tt,ME],Nt]};function wM(t,...e){return Ee("angularfire",Zr.full,"rtdb"),Ot([Ez,_z,{provide:ME,useFactory:yz(t),multi:!0,deps:[re,Re,Jr,io,[new Tt,ml],[new Tt,$s],...e]}])}var bM=gn(Vs,!0);var DM={production:!0,backendUrl:"https://piedraviva-app-backend.onrender.com",firebaseConfig:{apiKey:"AIzaSyBwe-SvSjOdCdBfKG_Nv8hjJ4IE8Q-vS1g",authDomain:"piedraviva-20327.firebaseapp.com",projectId:"piedraviva-20327",storageBucket:"piedraviva-20327.firebasestorage.app",messagingSenderId:"895243777977",appId:"1:895243777977:web:8dff1a8e88b23df2c82868",measurementId:"G-HLK1QHRRQ8"}};function Cz(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:i===0&&n!==0&&n%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var TM=["es-UY",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["d","l","m","m","j","v","s"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Set.","Oct.","Nov.","Dic."],["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]],[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}","{1} {0}","{1}, {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","\xA4\xA0#,##0.00","#E0"],"UYU","$","peso uruguayo",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:["US$","$"],UYU:["$"],UYW:["UP"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",Cz];Zb(TM);var SM={providers:[bv(CM),Nd(),oA(()=>sA(DM.firebaseConfig)),wM(()=>bM()),gM(()=>yM()),Yt,{provide:kr,useValue:"es-UY"}]};function Iz(t,e){if(t&1&&(v(0,"p",14),T(1),E()),t&2){let n=j();M(),he(n.errorMessage)}}var Rh=class t{constructor(e){this.authService=e}close=new me;loggedIn=new me;isLoginMode=!0;email="";password="";errorMessage=null;loading=!1;toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=null}onSubmit(){return p(this,null,function*(){this.errorMessage=null,this.loading=!0;try{this.isLoginMode?(yield this.authService.login(this.email,this.password),console.log("Inicio de sesi\xF3n exitoso")):(yield this.authService.register(this.email,this.password),console.log("Registro exitoso")),this.loggedIn.emit(),this.close.emit()}catch(e){switch(console.error("Error de autenticaci\xF3n:",e),e.code){case"auth/email-already-in-use":this.errorMessage="El email ya est\xE1 en uso. Intenta iniciar sesi\xF3n.";break;case"auth/invalid-email":this.errorMessage="El formato del email no es v\xE1lido.";break;case"auth/weak-password":this.errorMessage="La contrase\xF1a debe tener al menos 6 caracteres.";break;case"auth/user-not-found":case"auth/wrong-password":this.errorMessage="Email o contrase\xF1a incorrectos.";break;case"auth/too-many-requests":this.errorMessage="Demasiados intentos fallidos. Intenta de nuevo m\xE1s tarde.";break;default:this.errorMessage="Ocurri\xF3 un error. Por favor, int\xE9ntalo de nuevo.";break}}finally{this.loading=!1}})}onClose(){this.close.emit()}static \u0275fac=function(n){return new(n||t)(R(Ct))};static \u0275cmp=it({type:t,selectors:[["app-login-register-modal"]],outputs:{close:"close",loggedIn:"loggedIn"},decls:23,vars:8,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-button",3,"click"],[1,"modal-title"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","autocomplete","email","placeholder","tu@email.com",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[1,"toggle-mode-section"],[1,"toggle-link",3,"click"],[1,"error-message"]],template:function(n,r){n&1&&(v(0,"div",0),Z("click",function(){return r.onClose()}),v(1,"div",1),Z("click",function(o){return o.stopPropagation()}),v(2,"button",2),Z("click",function(){return r.onClose()}),T(3,"\xD7"),E(),v(4,"h2",3),T(5),E(),v(6,"form",4),Z("ngSubmit",function(){return r.onSubmit()}),v(7,"div",5)(8,"label",6),T(9,"Email"),E(),v(10,"input",7),Fa("ngModelChange",function(o){return dd(r.email,o)||(r.email=o),o}),E()(),v(11,"div",5)(12,"label",8),T(13,"Contrase\xF1a"),E(),v(14,"input",9),Fa("ngModelChange",function(o){return dd(r.password,o)||(r.password=o),o}),E()(),ad(15,Iz,2,1,"p",10),v(16,"button",11),T(17),E()(),v(18,"div",12)(19,"p"),T(20),v(21,"a",13),Z("click",function(){return r.toggleMode()}),T(22),E()()()()()),n&2&&(M(5),st(" ",r.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),M(5),ka("ngModel",r.email),M(4),ka("ngModel",r.password),M(),Je("ngIf",r.errorMessage),M(),Je("disabled",r.loading),M(),st(" ",r.loading?"Cargando...":r.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),M(3),st(" ",r.isLoginMode?"\xBFNo tienes una cuenta?":"\xBFYa tienes una cuenta?"," "),M(2),st(" ",r.isLoginMode?"Reg\xEDstrate aqu\xED":"Inicia sesi\xF3n aqu\xED"," "))},dependencies:[yt,Lm,ps,LD,ff,RD,ND,kv,Ov,Pv],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background-color:#2d3748;color:#e2e8f0;padding:2.5rem;border-radius:.75rem;box-shadow:0 10px 25px #00000080;position:relative;width:90%;max-width:450px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.8rem;color:#a0aec0;cursor:pointer;transition:color .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#fff}.modal-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-align:center;margin-bottom:2rem;color:#f6e05e}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;margin-bottom:.5rem;color:#a0aec0}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #4a5568;border-radius:.5rem;background-color:#1a202c;color:#e2e8f0;font-size:1rem;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f6e05e;box-shadow:0 0 0 3px #f6e05e4d}.error-message[_ngcontent-%COMP%]{color:#fc8181;font-size:.875rem;margin-top:1rem;text-align:center}.submit-button[_ngcontent-%COMP%]{width:100%;background-color:#c53030;color:#fff;padding:.85rem 1.5rem;border:none;border-radius:.5rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;margin-top:1.5rem}.submit-button[_ngcontent-%COMP%]:hover{background-color:#a02020;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.toggle-mode-section[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.9rem;color:#a0aec0}.toggle-link[_ngcontent-%COMP%]{color:#f6e05e;cursor:pointer;text-decoration:underline;margin-left:.25rem}.toggle-link[_ngcontent-%COMP%]:hover{color:#ecc94b}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};function wz(t,e){if(t&1){let n=At();v(0,"span",10),T(1),E(),v(2,"a",11),qe(3,"i",12),E(),v(4,"button",13),Z("click",function(){ue(n);let i=j();return de(i.logout())}),T(5,"Cerrar Sesi\xF3n"),E()}t&2&&(M(),he(e.email))}function bz(t,e){if(t&1){let n=At();v(0,"button",14),Z("click",function(){ue(n);let i=j();return de(i.openLoginModal())}),T(1,"Iniciar Sesi\xF3n / Registrarse"),E()}}function Dz(t,e){if(t&1){let n=At();v(0,"app-login-register-modal",15),Z("close",function(){ue(n);let i=j();return de(i.closeLoginModal())})("loggedIn",function(){ue(n);let i=j();return de(i.closeLoginModal())}),E()}}var Nh=class t{constructor(e){this.authService=e;this.currentUser$=this.authService.user$}title="pizza-reservation-app";showLoginModal=!1;currentUser$;ngOnInit(){}openLoginModal(){this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}logout(){return p(this,null,function*(){try{yield this.authService.logout(),console.log("Sesi\xF3n cerrada exitosamente")}catch(e){console.error("Error al cerrar sesi\xF3n:",e),alert("Error al cerrar sesi\xF3n. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(n){return new(n||t)(R(Ct))};static \u0275cmp=it({type:t,selectors:[["app-root"]],decls:18,vars:4,consts:[[1,"app-header"],[1,"header-content"],[1,"app-title"],[1,"main-nav"],["routerLink","/",1,"nav-link"],[1,"auth-section"],[1,"login-button"],["src","piedraviva.png","alt","Logo de la Empresa",1,"header-logo-fixed"],[1,"app-main-content"],[1,"app-footer"],[1,"user-email"],["routerLink","/cart",1,"cart-icon-link"],[1,"fas","fa-shopping-cart"],[1,"logout-button",3,"click"],[1,"login-button",3,"click"],[3,"close","loggedIn"]],template:function(n,r){if(n&1&&(v(0,"header",0)(1,"div",1)(2,"h1",2),T(3," \u{1F355} Men\xFA Piedraviva "),E(),v(4,"nav",3)(5,"a",4),T(6,"Inicio"),E()(),v(7,"div",5),Te(8,wz,6,1),xe(9,"async"),St(10,bz,2,0,"button",6),E()()(),qe(11,"img",7),v(12,"main",8),qe(13,"router-outlet"),E(),Te(14,Dz,1,0,"app-login-register-modal"),v(15,"footer",9)(16,"p"),T(17,"\xA9 2025 Men\xFA Piedraviva. Todos los derechos reservados."),E()()),n&2){let i;M(8),Se((i=Ut(9,2,r.currentUser$))?8:10,i),M(6),Se(r.showLoginModal?14:-1)}},dependencies:[yt,hc,Ht,Rh,sn],styles:[".app-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a;font-family:sans-serif;position:relative;z-index:999}.header-content[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.app-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0;flex-shrink:0}.header-logo-fixed[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;height:200px;width:auto;z-index:1000;border-radius:50%;box-shadow:0 4px 8px #0000004d;transition:transform .2s ease-in-out}.header-logo-fixed[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.main-nav[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;transition:color .2s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#fbd38d}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-email[_ngcontent-%COMP%]{font-weight:600;color:#f6e05e}.cart-icon-link[_ngcontent-%COMP%]{color:#fff;font-size:2rem;transition:color .2s ease,transform .2s ease;padding:.5rem;border-radius:.25rem}.cart-icon-link[_ngcontent-%COMP%]:hover{color:#fbd38d;transform:scale(1.1)}.login-button[_ngcontent-%COMP%], .logout-button[_ngcontent-%COMP%]{background-color:#f6e05e;color:#1a202c;padding:.75rem 1.25rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a}.login-button[_ngcontent-%COMP%]:hover, .logout-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateY(-1px)}.login-button[_ngcontent-%COMP%]:active, .logout-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #0000001a}.app-main-content[_ngcontent-%COMP%]{flex-grow:1;padding-top:80px}.app-footer[_ngcontent-%COMP%]{background-color:#1a202c;color:#a0aec0;text-align:center;padding:1.5rem 2rem;font-size:.9rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.main-nav[_ngcontent-%COMP%], .auth-section[_ngcontent-%COMP%]{width:100%;justify-content:center;margin-top:1rem}.app-title[_ngcontent-%COMP%]{text-align:center;width:100%}.header-logo-fixed[_ngcontent-%COMP%]{height:50px;top:10px;left:10px}.app-main-content[_ngcontent-%COMP%]{padding-top:100px}}"]})};Ym(Nh,SM).catch(t=>console.error(t));
