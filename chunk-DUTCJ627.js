import{g as v,p as d,q as D,r as z,s as P,t as g}from"./chunk-XFMXKC7R.js";import{S as l,W as h,a as c,b,g as p,w as f,x as m}from"./chunk-G5SB7B44.js";var y=class u{constructor(r){this.app=r;this.db=g(this.app)}db;getPizzasFromDb(){let r=d(this.db,"pizzas");return new p(t=>{P(r,i=>{let o=[];i.forEach(s=>{let e=s.val();o.push(b(c({id:s.key||""},e),{tipo:"pizza"}))}),t.next(o)},i=>{t.error(i)})})}getBebidasFromDb(){let r=d(this.db,"bebidas");return new p(t=>{P(r,i=>{let o=[];i.forEach(s=>{let e=s.val();o.push(c({id:s.key||""},e))}),t.next(o)},i=>{t.error(i)})})}getProducts(){return m([this.getPizzasFromDb(),this.getBebidasFromDb()]).pipe(f(([r,t])=>[...r,...t]))}getProductById(r){let t=d(this.db,`pizzas/${r}`),i=d(this.db,`bebidas/${r}`),o=new p(e=>{z(t).then(a=>{let n=a.val();n?e.next(b(c({},n),{id:a.key||"",tipo:"pizza"})):e.next(void 0),e.complete()}).catch(a=>e.error(a))}),s=new p(e=>{z(i).then(a=>{let n=a.val();n?e.next(b(c({},n),{id:a.key||""})):e.next(void 0),e.complete()}).catch(a=>e.error(a))});return m([o,s]).pipe(f(([e,a])=>e||a))}addReserva(r){let t=d(this.db,"reservas");return Promise.resolve(D(t,r))}static \u0275fac=function(t){return new(t||u)(h(v))};static \u0275prov=l({token:u,factory:u.\u0275fac,providedIn:"root"})};export{y as a};
