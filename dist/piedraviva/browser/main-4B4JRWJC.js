var mM=Object.defineProperty,vM=Object.defineProperties;var yM=Object.getOwnPropertyDescriptors;var hE=Object.getOwnPropertySymbols,_M=Object.getPrototypeOf,EM=Object.prototype.hasOwnProperty,CM=Object.prototype.propertyIsEnumerable,IM=Reflect.get;var pE=(t,e,n)=>e in t?mM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})EM.call(e,n)&&pE(t,n,e[n]);if(hE)for(var n of hE(e))CM.call(e,n)&&pE(t,n,e[n]);return t},F=(t,e)=>vM(t,yM(e));var ei=(t,e,n)=>IM(_M(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var bh;function ll(){return bh}function sn(t){let e=bh;return bh=t,e}var gE=Symbol("NotFound");function so(t){return t===gE||t?.name==="\u0275NotFound"}function pl(t,e){return Object.is(t,e)}var He=null,ul=!1,Dh=1,wM=null,ze=Symbol("SIGNAL");function L(t){let e=He;return He=t,e}function gl(){return He}var ti={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ao(t){if(ul)throw new Error("");if(He===null)return;He.consumerOnSignalRead(t);let e=He.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=He.recomputing;if(r&&(n=e!==void 0?e.nextProducer:He.producers,n!==void 0&&n.producer===t)){He.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===He&&(!r||DM(i,He)))return;let o=lo(He),s={producer:t,consumer:He,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};He.producersTail=s,e!==void 0?e.nextProducer=s:He.producers=s,o&&vE(t,s)}function mE(){Dh++}function ml(t){if(!(lo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Dh)){if(!t.producerMustRecompute(t)&&!Ls(t)){hl(t);return}t.producerRecomputeValue(t),hl(t)}}function Th(t){if(t.consumers===void 0)return;let e=ul;ul=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||bM(r)}}finally{ul=e}}function Sh(){return He?.consumerAllowSignalWrites!==!1}function bM(t){t.dirty=!0,Th(t),t.consumerMarkedDirty?.(t)}function hl(t){t.dirty=!1,t.lastCleanEpoch=Dh}function ni(t){return t&&(t.producersTail=void 0,t.recomputing=!0),L(t)}function co(t,e){if(L(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(lo(t))do r=Ah(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function Ls(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ml(n),r!==n.version))return!0}return!1}function vl(t){if(lo(t)){let e=t.producers;for(;e!==void 0;)e=Ah(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function vE(t,e){let n=t.consumersTail,r=lo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)vE(i.producer,i)}function Ah(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!lo(e)){let o=e.producers;for(;o!==void 0;)o=Ah(o)}return n}function lo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function yl(t){wM?.(t)}function DM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function _l(t,e){let n=Object.create(TM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ml(n),ao(n),n.value===Fs)throw n.error;return n.value};return r[ze]=n,yl(n),r}var dl=Symbol("UNSET"),fl=Symbol("COMPUTING"),Fs=Symbol("ERRORED"),TM=F(_({},ti),{value:dl,dirty:!0,error:null,equal:pl,kind:"computed",producerMustRecompute(t){return t.value===dl||t.value===fl},producerRecomputeValue(t){if(t.value===fl)throw new Error("");let e=t.value;t.value=fl;let n=ni(t),r,i=!1;try{r=t.computation(),L(null),i=e!==dl&&e!==Fs&&r!==Fs&&t.equal(e,r)}catch(o){r=Fs,t.error=o}finally{co(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function SM(){throw new Error}var yE=SM;function _E(t){yE(t)}function Mh(t){yE=t}var AM=null;function Rh(t,e){let n=Object.create(El);n.value=t,e!==void 0&&(n.equal=e);let r=()=>EE(n);return r[ze]=n,yl(n),[r,s=>uo(n,s),s=>Nh(n,s)]}function EE(t){return ao(t),t.value}function uo(t,e){Sh()||_E(t),t.equal(t.value,e)||(t.value=e,MM(t))}function Nh(t,e){Sh()||_E(t),uo(t,e(t.value))}var El=F(_({},ti),{equal:pl,value:void 0,kind:"signal"});function MM(t){t.version++,mE(),Th(t),AM?.(t)}function V(t){return typeof t=="function"}function fo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Cl=fo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ri(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(V(r))try{r()}catch(o){e=o instanceof Cl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{CE(o)}catch(s){e=e??[],s instanceof Cl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Cl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)CE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ri(n,e)}remove(e){let{_finalizers:n}=this;n&&ri(n,e),e instanceof t&&e._removeParent(this)}};pe.EMPTY=(()=>{let t=new pe;return t.closed=!0,t})();var Ph=pe.EMPTY;function Il(t){return t instanceof pe||t&&"closed"in t&&V(t.remove)&&V(t.add)&&V(t.unsubscribe)}function CE(t){V(t)?t():t.unsubscribe()}var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ho={setTimeout(t,e,...n){let{delegate:r}=ho;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ho;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function wl(t){ho.setTimeout(()=>{let{onUnhandledError:e}=jt;if(e)e(t);else throw t})}function Vs(){}var IE=Oh("C",void 0,void 0);function wE(t){return Oh("E",void 0,t)}function bE(t){return Oh("N",t,void 0)}function Oh(t,e,n){return{kind:t,value:e,error:n}}var ii=null;function po(t){if(jt.useDeprecatedSynchronousErrorHandling){let e=!ii;if(e&&(ii={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ii;if(ii=null,n)throw r}}else t()}function DE(t){jt.useDeprecatedSynchronousErrorHandling&&ii&&(ii.errorThrown=!0,ii.error=t)}var oi=class extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Il(e)&&e.add(this)):this.destination=PM}static create(e,n,r){return new go(e,n,r)}next(e){this.isStopped?kh(bE(e),this):this._next(e)}error(e){this.isStopped?kh(wE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kh(IE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},RM=Function.prototype.bind;function xh(t,e){return RM.call(t,e)}var Fh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){bl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){bl(r)}else bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bl(n)}}},go=class extends oi{constructor(e,n,r){super();let i;if(V(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xh(e.next,o),error:e.error&&xh(e.error,o),complete:e.complete&&xh(e.complete,o)}):i=e}this.destination=new Fh(i)}};function bl(t){jt.useDeprecatedSynchronousErrorHandling?DE(t):wl(t)}function NM(t){throw t}function kh(t,e){let{onStoppedNotification:n}=jt;n&&ho.setTimeout(()=>n(t,e))}var PM={closed:!0,next:Vs,error:NM,complete:Vs};var mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(t){return t}function Lh(...t){return Vh(t)}function Vh(t){return t.length===0?yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var N=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=xM(n)?n:new go(n,r,i);return po(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=TE(r),new r((i,o)=>{let s=new go({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mo](){return this}pipe(...n){return Vh(n)(this)}toPromise(n){return n=TE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function TE(t){var e;return(e=t??jt.Promise)!==null&&e!==void 0?e:Promise}function OM(t){return t&&V(t.next)&&V(t.error)&&V(t.complete)}function xM(t){return t&&t instanceof oi||OM(t)&&Il(t)}function jh(t){return V(t?.lift)}function K(t){return e=>{if(jh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new Uh(t,e,n,r,i)}var Uh=class extends oi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vo(){return K((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var yo=class extends N{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,jh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return vo()(this)}};var SE=fo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class t extends N{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Dl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new SE}next(n){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){po(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ph:(this.currentObservers=null,o.push(n),new pe(()=>{this.currentObservers=null,ri(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new N;return n.source=this,n}}return t.create=(e,n)=>new Dl(e,n),t})(),Dl=class extends Ce{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ph}};var Ve=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Bh={now(){return(Bh.delegate||Date).now()},delegate:void 0};var Tl=class extends pe{constructor(e,n){super()}schedule(e,n=0){return this}};var js={setInterval(t,e,...n){let{delegate:r}=js;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=js;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _o=class extends Tl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return js.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&js.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ri(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Eo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Eo.now=Bh.now;var Co=class extends Eo{constructor(e,n=Eo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var $h=new Co(_o);var Sl=class extends _o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Al=class extends Co{};var Hh=new Al(Sl);var at=new N(t=>t.complete());function AE(t){return t&&V(t.schedule)}function ME(t){return t[t.length-1]}function Ml(t){return V(ME(t))?t.pop():void 0}function lr(t){return AE(ME(t))?t.pop():void 0}function zh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function NE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function RE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function si(t){return this instanceof si?(this.v=t,this):new si(t)}function PE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(y){return new Promise(function(v,C){o.push([h,y,v,C])>1||c(h,y)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(r[h](g))}catch(y){f(o[0][3],y)}}function l(h){h.value instanceof si?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function OE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RE=="function"?RE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Rl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Nl(t){return V(t?.then)}function Pl(t){return V(t[mo])}function Ol(t){return Symbol.asyncIterator&&V(t?.[Symbol.asyncIterator])}function xl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kl=kM();function Fl(t){return V(t?.[kl])}function Ll(t){return PE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield si(n.read());if(i)return yield si(void 0);yield yield si(r)}}finally{n.releaseLock()}})}function Vl(t){return V(t?.getReader)}function Ie(t){if(t instanceof N)return t;if(t!=null){if(Pl(t))return FM(t);if(Rl(t))return LM(t);if(Nl(t))return VM(t);if(Ol(t))return xE(t);if(Fl(t))return jM(t);if(Vl(t))return UM(t)}throw xl(t)}function FM(t){return new N(e=>{let n=t[mo]();if(V(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LM(t){return new N(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function VM(t){return new N(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,wl)})}function jM(t){return new N(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function xE(t){return new N(e=>{BM(t,e).catch(n=>e.error(n))})}function UM(t){return xE(Ll(t))}function BM(t,e){var n,r,i,o;return NE(this,void 0,void 0,function*(){try{for(n=OE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ct(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function ur(t,e=0){return K((n,r)=>{n.subscribe(Y(r,i=>ct(r,t,()=>r.next(i),e),()=>ct(r,t,()=>r.complete(),e),i=>ct(r,t,()=>r.error(i),e)))})}function dr(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function kE(t,e){return Ie(t).pipe(dr(e),ur(e))}function FE(t,e){return Ie(t).pipe(dr(e),ur(e))}function LE(t,e){return new N(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function VE(t,e){return new N(n=>{let r;return ct(n,e,()=>{r=t[kl](),ct(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}function jl(t,e){if(!t)throw new Error("Iterable cannot be null");return new N(n=>{ct(n,e,()=>{let r=t[Symbol.asyncIterator]();ct(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function jE(t,e){return jl(Ll(t),e)}function UE(t,e){if(t!=null){if(Pl(t))return kE(t,e);if(Rl(t))return LE(t,e);if(Nl(t))return FE(t,e);if(Ol(t))return jl(t,e);if(Fl(t))return VE(t,e);if(Vl(t))return jE(t,e)}throw xl(t)}function de(t,e){return e?UE(t,e):Ie(t)}function S(...t){let e=lr(t);return de(t,e)}function Io(t,e){let n=V(t)?t:()=>t,r=i=>i.error(n());return new N(e?i=>e.schedule(r,0,i):r)}function Wh(t){return!!t&&(t instanceof N||V(t.lift)&&V(t.subscribe))}var Bn=fo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function P(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:$M}=Array;function HM(t,e){return $M(e)?t(...e):t(e)}function Ul(t){return P(e=>HM(t,e))}var{isArray:zM}=Array,{getPrototypeOf:WM,prototype:GM,keys:qM}=Object;function Bl(t){if(t.length===1){let e=t[0];if(zM(e))return{args:e,keys:null};if(YM(e)){let n=qM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function YM(t){return t&&typeof t=="object"&&WM(t)===GM}function $l(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Hl(...t){let e=lr(t),n=Ml(t),{args:r,keys:i}=Bl(t);if(r.length===0)return de([],e);let o=new N(KM(r,e,i?s=>$l(i,s):yt));return n?o.pipe(Ul(n)):o}function KM(t,e,n=yt){return r=>{BE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)BE(e,()=>{let l=de(t[c],e),u=!1;l.subscribe(Y(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function BE(t,e,n){t?ct(n,t,e):e()}function $E(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=y=>l<r?g(y):c.push(y),g=y=>{o&&e.next(y),l++;let v=!1;Ie(n(y,u++)).subscribe(Y(e,C=>{i?.(C),o?h(C):e.next(C)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){let C=c.shift();s?ct(e,s,()=>g(C)):g(C)}f()}catch(C){e.error(C)}}))};return t.subscribe(Y(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Se(t,e,n=1/0){return V(e)?Se((r,i)=>P((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>$E(r,i,t,n)))}function HE(t=1/0){return Se(yt,t)}function zE(){return HE(1)}function wo(...t){return zE()(de(t,lr(t)))}function Us(t){return new N(e=>{Ie(t()).subscribe(e)})}function Gh(...t){let e=Ml(t),{args:n,keys:r}=Bl(t),i=new N(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(Y(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?$l(r,a):a),o.complete())}))}});return e?i.pipe(Ul(e)):i}function lt(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function fr(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Ie(t(s,fr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function WE(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Y(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function hr(t,e){return V(e)?Se(t,e,1):Se(t,1)}function pr(t){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ut(t){return t<=0?()=>at:K((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function zl(t=QM){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function QM(){return new Bn}function ai(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Bt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?lt((i,o)=>t(i,o,r)):yt,Ut(1),n?pr(e):zl(()=>new Bn))}function bo(t){return t<=0?()=>at:K((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?lt((i,o)=>t(i,o,r)):yt,bo(1),n?pr(e):zl(()=>new Bn))}function Yh(t,e){return K(WE(t,e,arguments.length>=2,!0))}function Kh(...t){let e=lr(t);return K((n,r)=>{(e?wo(t,n,e):wo(t,n)).subscribe(r)})}function Re(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let l=0,u=o++;Ie(t(c,u)).subscribe(i=Y(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wl(t){return K((e,n)=>{Ie(t).subscribe(Y(n,()=>n.complete(),Vs)),!n.closed&&e.subscribe(n)})}function Ne(t,e,n){let r=V(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yt}function GE(t){let e=L(null);try{return t()}finally{L(e)}}var Ql="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",I=class extends Error{code;constructor(e,n){super(fi(e,n)),this.code=e}};function ZM(t){return`NG0${Math.abs(t)}`}function fi(t,e){return`${ZM(t)}${e?": "+e:""}`}var zn=globalThis;function X(t){for(let e in t)if(t[e]===X)return e;throw Error("")}function KE(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Hn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Hn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function cp(t,e){return t?e?`${t} ${e}`:t:e||""}var JM=X({__forward_ref__:X});function Wn(t){return t.__forward_ref__=Wn,t.toString=function(){return Hn(this())},t}function je(t){return lp(t)?t():t}function lp(t){return typeof t=="function"&&t.hasOwnProperty(JM)&&t.__forward_ref__===Wn}function QE(t,e){t==null&&up(e,t,null,"!=")}function up(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $t(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ws(t){return XM(t,Zl)}function dp(t){return Ws(t)!==null}function XM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function eR(t){let e=t?.[Zl]??null;return e||null}function Zh(t){return t&&t.hasOwnProperty(ql)?t[ql]:null}var Zl=X({\u0275prov:X}),ql=X({\u0275inj:X}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fp(t){return t&&!!t.\u0275providers}var hp=X({\u0275cmp:X}),pp=X({\u0275dir:X}),gp=X({\u0275pipe:X}),mp=X({\u0275mod:X}),Hs=X({\u0275fac:X}),hi=X({__NG_ELEMENT_ID__:X}),qE=X({__NG_ENV_ID__:X});function Gs(t){return typeof t=="string"?t:t==null?"":String(t)}function Yl(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gs(t)}var vp=X({ngErrorCode:X}),ZE=X({ngErrorMessage:X}),$s=X({ngTokenPath:X});function yp(t,e){return JE("",-200,e)}function Jl(t,e){throw new I(-201,!1)}function tR(t,e){t[$s]??=[];let n=t[$s],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(QE(e.provide,"Token with multi: true should have a provide property"),r=Yl(e.provide)):r=Yl(e),n[0]!==r&&t[$s].unshift(r)}function nR(t,e){let n=t[$s],r=t[vp],i=t[ZE]||t.message;return t.message=iR(i,r,n,e),t}function JE(t,e,n){let r=new I(e,t);return r[vp]=e,r[ZE]=t,n&&(r[$s]=n),r}function rR(t){return t[vp]}function iR(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return fi(e,`${t}${o}${i}`)}var Jh;function XE(){return Jh}function Xe(t){let e=Jh;return Jh=t,e}function _p(t,e,n){let r=Ws(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Jl(t,"Injector")}var oR={},ci=oR,Xh="__NG_DI_FLAG__",ep=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=li(n)||0;try{return this.injector.get(e,r&8?null:ci,r)}catch(i){if(so(i))return i;throw i}}};function sR(t,e=0){let n=ll();if(n===void 0)throw new I(-203,!1);if(n===null)return _p(t,void 0,e);{let r=aR(e),i=n.retrieve(t,r);if(so(i)){if(r.optional)return null;throw i}return i}}function A(t,e=0){return(XE()||sR)(je(t),e)}function m(t,e){return A(t,li(e))}function li(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function aR(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function tp(t){let e=[];for(let n=0;n<t.length;n++){let r=je(t[n]);if(Array.isArray(r)){if(r.length===0)throw new I(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=cR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(A(i,o))}else e.push(A(r))}return e}function eC(t,e){return t[Xh]=e,t.prototype[Xh]=e,t}function cR(t){return t[Xh]}function gr(t,e){let n=t.hasOwnProperty(Hs);return n?t[Hs]:null}function Xl(t,e){t.forEach(n=>Array.isArray(n)?Xl(n,e):e(n))}function Ep(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function tC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function nC(t,e,n){let r=To(t,e);return r>=0?t[r|1]=n:(r=~r,tC(t,r,e,n)),r}function eu(t,e){let n=To(t,e);if(n>=0)return t[n|1]}function To(t,e){return lR(t,e,1)}function lR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var yr={},_t=[],_r=new D(""),Cp=new D("",-1),Ip=new D(""),zs=class{get(e,n=ci){if(n===ci){let i=JE("",-201);throw i.name="\u0275NotFound",i}return n}};function wp(t){return t[mp]||null}function Er(t){return t[hp]||null}function bp(t){return t[pp]||null}function rC(t){return t[gp]||null}function St(t){return{\u0275providers:t}}function iC(...t){return{\u0275providers:Dp(!0,t),\u0275fromNgModule:!0}}function Dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Xl(e,s=>{let a=s;Kl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oC(i,o),n}function oC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Tp(i,o=>{e(o,r)})}}function Kl(t,e,n,r){if(t=je(t),!t)return!1;let i=null,o=Zh(t),s=!o&&Er(t);if(!o&&!s){let c=t.ngModule;if(o=Zh(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Kl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xl(o.imports,u=>{Kl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&oC(l,e)}if(!a){let l=gr(i)||(()=>new i);e({provide:i,useFactory:l,deps:_t},i),e({provide:Ip,useValue:i,multi:!0},i),e({provide:_r,useValue:()=>A(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Tp(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Tp(t,e){for(let n of t)fp(n)&&(n=n.\u0275providers),Array.isArray(n)?Tp(n,e):e(n)}var uR=X({provide:String,useValue:X});function sC(t){return t!==null&&typeof t=="object"&&uR in t}function dR(t){return!!(t&&t.useExisting)}function fR(t){return!!(t&&t.useFactory)}function ui(t){return typeof t=="function"}function aC(t){return!!t.useClass}var Ys=new D(""),Gl={},YE={},Qh;function Ks(){return Qh===void 0&&(Qh=new zs),Qh}var ge=class{},di=class extends ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,rp(e,s=>this.processProvider(s)),this.records.set(Cp,Do(void 0,this)),i.has("environment")&&this.records.set(ge,Do(void 0,this));let o=this.records.get(Ys);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ip,_t,{self:!0}))}retrieve(e,n){let r=li(n)||0;try{return this.get(e,ci,r)}catch(i){if(so(i))return i;throw i}}destroy(){Bs(this),this._destroyed=!0;let e=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(e)}}onDestroy(e){return Bs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Bs(this);let n=sn(this),r=Xe(void 0),i;try{return e()}finally{sn(n),Xe(r)}}get(e,n=ci,r){if(Bs(this),e.hasOwnProperty(qE))return e[qE](this);let i=li(r),o,s=sn(this),a=Xe(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=vR(e)&&Ws(e);u&&this.injectableDefInScope(u)?l=Do(np(e),Gl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Ks():this.parent;return n=i&8&&n===ci?null:n,c.get(e,n)}catch(c){let l=rR(c);throw l===-200||l===-201?new I(l,null):c}finally{Xe(a),sn(s)}}resolveInjectorInitializers(){let e=L(null),n=sn(this),r=Xe(void 0),i;try{let o=this.get(_r,_t,{self:!0});for(let s of o)s()}finally{sn(n),Xe(r),L(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Hn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=je(e);let n=ui(e)?e:je(e&&e.provide),r=pR(e);if(!ui(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Do(void 0,Gl,!0),i.factory=()=>tp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=L(null);try{if(n.value===YE)throw yp(Hn(e));return n.value===Gl&&(n.value=YE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&mR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=je(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function np(t){let e=Ws(t),n=e!==null?e.factory:gr(t);if(n!==null)return n;if(t instanceof D)throw new I(204,!1);if(t instanceof Function)return hR(t);throw new I(204,!1)}function hR(t){if(t.length>0)throw new I(204,!1);let n=eR(t);return n!==null?()=>n.factory(t):()=>new t}function pR(t){if(sC(t))return Do(void 0,t.useValue);{let e=Sp(t);return Do(e,Gl)}}function Sp(t,e,n){let r;if(ui(t)){let i=je(t);return gr(i)||np(i)}else if(sC(t))r=()=>je(t.useValue);else if(fR(t))r=()=>t.useFactory(...tp(t.deps||[]));else if(dR(t))r=(i,o)=>A(je(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=je(t&&(t.useClass||t.provide));if(gR(t))r=()=>new i(...tp(t.deps));else return gr(i)||np(i)}return r}function Bs(t){if(t.destroyed)throw new I(205,!1)}function Do(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gR(t){return!!t.deps}function mR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vR(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function rp(t,e){for(let n of t)Array.isArray(n)?rp(n,e):n&&fp(n)?rp(n.\u0275providers,e):e(n)}function _e(t,e){let n;t instanceof di?(Bs(t),n=t):n=new ep(t);let r,i=sn(n),o=Xe(void 0);try{return e()}finally{sn(i),Xe(o)}}function cC(){return XE()!==void 0||ll()!=null}var Ht=0,k=1,j=2,Pe=3,At=4,Mt=5,So=6,Ao=7,Ee=8,pi=9,cn=10,fe=11,Mo=12,Ap=13,gi=14,Et=15,mi=16,vi=17,yi=18,Qs=19,Mp=20,$n=21,tu=22,Zs=23,Ct=24,nu=25,me=26,lC=1,Rp=6,Cr=7,Js=8,Xs=9,Ue=10;function ln(t){return Array.isArray(t)&&typeof t[lC]=="object"}function zt(t){return Array.isArray(t)&&t[lC]===!0}function Np(t){return(t.flags&4)!==0}function Ir(t){return t.componentOffset>-1}function ea(t){return(t.flags&1)===1}function un(t){return!!t.template}function Ro(t){return(t[j]&512)!==0}function _i(t){return(t[j]&256)===256}var uC="svg",dC="math";function Rt(t){for(;Array.isArray(t);)t=t[Ht];return t}function Pp(t,e){return Rt(e[t])}function Wt(t,e){return Rt(e[t.index])}function ta(t,e){return t.data[e]}function na(t,e){return t[e]}function Op(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Nt(t,e){let n=e[t];return ln(n)?n:n[Ht]}function ru(t){return(t[j]&128)===128}function fC(t){return zt(t[Pe])}function dn(t,e){return e==null?null:t[e]}function xp(t){t[vi]=0}function kp(t){t[j]&1024||(t[j]|=1024,ru(t)&&ia(t))}function hC(t,e){for(;t>0;)e=e[gi],t--;return e}function ra(t){return!!(t[j]&9216||t[Ct]?.dirty)}function iu(t){t[cn].changeDetectionScheduler?.notify(8),t[j]&64&&(t[j]|=1024),ra(t)&&ia(t)}function ia(t){t[cn].changeDetectionScheduler?.notify(0);let e=mr(t);for(;e!==null&&!(e[j]&8192||(e[j]|=8192,!ru(e)));)e=mr(e)}function Fp(t,e){if(_i(t))throw new I(911,!1);t[$n]===null&&(t[$n]=[]),t[$n].push(e)}function pC(t,e){if(t[$n]===null)return;let n=t[$n].indexOf(e);n!==-1&&t[$n].splice(n,1)}function mr(t){let e=t[Pe];return zt(e)?e[Pe]:e}function gC(t){return t[Ao]??=[]}function mC(t){return t.cleanup??=[]}var H={lFrame:OC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},oa=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(oa||{}),yR=0,ip=!1;function vC(){return H.lFrame.elementDepthCount}function yC(){H.lFrame.elementDepthCount++}function _C(){H.lFrame.elementDepthCount--}function Lp(){return H.bindingsEnabled}function EC(){return H.skipHydrationRootTNode!==null}function CC(t){return H.skipHydrationRootTNode===t}function IC(){H.skipHydrationRootTNode=null}function G(){return H.lFrame.lView}function Be(){return H.lFrame.tView}function We(t){return H.lFrame.contextLView=t,t[Ee]}function Ge(t){return H.lFrame.contextLView=null,t}function et(){let t=Vp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Vp(){return H.lFrame.currentTNode}function wC(){let t=H.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function No(t,e){let n=H.lFrame;n.currentTNode=t,n.isParent=e}function jp(){return H.lFrame.isParent}function bC(){H.lFrame.isParent=!1}function DC(){return H.lFrame.contextLView}function Up(t){up("Must never be called in production mode"),yR=t}function Bp(){return ip}function $p(t){let e=ip;return ip=t,e}function sa(){let t=H.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function TC(t){return H.lFrame.bindingIndex=t}function Ei(){return H.lFrame.bindingIndex++}function SC(t){let e=H.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AC(){return H.lFrame.inI18n}function MC(t,e){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=t,ou(e)}function RC(){return H.lFrame.currentDirectiveIndex}function ou(t){H.lFrame.currentDirectiveIndex=t}function NC(t){let e=H.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Hp(t){H.lFrame.currentQueryIndex=t}function _R(t){let e=t[k];return e.type===2?e.declTNode:e.type===1?t[Mt]:null}function zp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=_R(o),i===null||(o=o[gi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=H.lFrame=PC();return r.currentTNode=e,r.lView=t,!0}function su(t){let e=PC(),n=t[k];H.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function PC(){let t=H.lFrame,e=t===null?null:t.child;return e===null?OC(t):e}function OC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xC(){let t=H.lFrame;return H.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Wp=xC;function au(){let t=xC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kC(t){return(H.lFrame.contextLView=hC(t,H.lFrame.contextLView))[Ee]}function wr(){return H.lFrame.selectedIndex}function br(t){H.lFrame.selectedIndex=t}function cu(){let t=H.lFrame;return ta(t.tView,t.selectedIndex)}function FC(){return H.lFrame.currentNamespace}var LC=!0;function lu(){return LC}function uu(t){LC=t}function op(t,e=null,n=null,r){let i=Gp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gp(t,e=null,n=null,r,i=new Set){let o=[n||_t,iC(t)];return r=r||(typeof t=="object"?void 0:Hn(t)),new di(o,e||Ks(),r||null,i)}var we=class t{static THROW_IF_NOT_FOUND=ci;static NULL=new zs;static create(e,n){if(Array.isArray(e))return op({name:""},n,e,"");{let r=e.name??"";return op({name:r},e.parent,e.providers,r)}}static \u0275prov=T({token:t,providedIn:"any",factory:()=>A(Cp)});static __NG_ELEMENT_ID__=-1},be=new D(""),Gn=(()=>{class t{static __NG_ELEMENT_ID__=ER;static __NG_ENV_ID__=n=>n}return t})(),sp=class extends Gn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _i(this._lView)}onDestroy(e){let n=this._lView;return Fp(n,e),()=>pC(n,e)}};function ER(){return new sp(G())}var an=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tt=new D("",{providedIn:"root",factory:()=>{let t=m(ge),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(an),e.handleError(n))}}}),VC={provide:_r,useValue:()=>void m(an),multi:!0};function qp(t){return typeof t=="function"&&t[ze]!==void 0}function fn(t,e){let[n,r,i]=Rh(t,e?.equal),o=n,s=o[ze];return o.set=r,o.update=i,o.asReadonly=jC.bind(o),o}function jC(){let t=this[ze];if(t.readonlyFn===void 0){let e=()=>this();e[ze]=t,t.readonlyFn=e}return t.readonlyFn}function Yp(t){return qp(t)&&typeof t.set=="function"}var vr=class{},du=new D("",{providedIn:"root",factory:()=>!1});var Kp=new D(""),Qp=new D("");var hn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ve(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new N(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=T({token:t,providedIn:"root",factory:()=>new t})}return t})(),Dr=(()=>{class t{internalPendingTasks=m(hn);scheduler=m(vr);errorHandler=m(tt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=T({token:t,providedIn:"root",factory:()=>new t})}return t})();function aa(...t){}var Zp=(()=>{class t{static \u0275prov=T({token:t,providedIn:"root",factory:()=>new ap})}return t})(),ap=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Lo(t){return{toString:t}.toString()}var fu="__parameters__";function MR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function RR(t,e,n){return Lo(()=>{let r=MR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(fu)?c[fu]:Object.defineProperty(c,fu,{value:[]})[fu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var It=eC(RR("Optional"),8);function NR(t){return typeof t=="function"}var yu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function vI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Yn=(()=>{let t=()=>yI;return t.ngInherit=!0,t})();function yI(t){return t.type.prototype.ngOnChanges&&(t.setInput=OR),PR}function PR(){let t=EI(this),e=t?.current;if(e){let n=t.previous;if(n===yr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function OR(t,e,n,r,i){let o=this.declaredInputs[r],s=EI(t)||xR(t,{previous:yr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new yu(l&&l.currentValue,n,c===yr),vI(t,e,i,n)}var _I="__ngSimpleChanges__";function EI(t){return t[_I]||null}function xR(t,e){return t[_I]=e}var UC=[];var ie=function(t,e=null,n){for(let r=0;r<UC.length;r++){let i=UC[r];i(t,e,n)}};function kR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=yI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function CI(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function gu(t,e,n){II(t,e,3,n)}function mu(t,e,n,r){(t[j]&3)===n&&II(t,e,n,r)}function Jp(t,e){let n=t[j];(n&3)===e&&(n&=16383,n+=1,t[j]=n)}function II(t,e,n,r){let i=r!==void 0?t[vi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[vi]+=65536),(a<o||o==-1)&&(FR(t,n,e,c),t[vi]=(t[vi]&4294901760)+c+2),c++}function BC(t,e){ie(4,t,e);let n=L(null);try{e.call(t)}finally{L(n),ie(5,t,e)}}function FR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[j]>>14<t[vi]>>16&&(t[j]&3)===e&&(t[j]+=16384,BC(a,o)):BC(a,o)}var Oo=-1,wi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function LR(t){return(t.flags&8)!==0}function VR(t){return(t.flags&16)!==0}function jR(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];UR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function wI(t){return t===3||t===4||t===6}function UR(t){return t.charCodeAt(0)===64}function da(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?$C(t,n,i,null,e[++r]):$C(t,n,i,null,null))}}return t}function $C(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function bI(t){return t!==Oo}function _u(t){return t&32767}function BR(t){return t>>16}function Eu(t,e){let n=BR(t),r=e;for(;n>0;)r=r[gi],n--;return r}var lg=!0;function Cu(t){let e=lg;return lg=t,e}var $R=256,DI=$R-1,TI=5,HR=0,pn={};function zR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(hi)&&(r=n[hi]),r==null&&(r=n[hi]=HR++);let i=r&DI,o=1<<i;e.data[t+(i>>TI)]|=o}function Iu(t,e){let n=SI(t,e);if(n!==-1)return n;let r=e[k];r.firstCreatePass&&(t.injectorIndex=e.length,Xp(r.data,t),Xp(e,null),Xp(r.blueprint,null));let i=kg(t,e),o=t.injectorIndex;if(bI(i)){let s=_u(i),a=Eu(i,e),c=a[k].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Xp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function SI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function kg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=PI(i),r===null)return Oo;if(n++,i=i[gi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oo}function ug(t,e,n){zR(t,e,n)}function WR(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(wI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function AI(t,e,n){if(n&8||t!==void 0)return t;Jl(e,"NodeInjector")}function MI(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[pi],o=Xe(void 0);try{return i?i.get(e,r,n&8):_p(e,r,n&8)}finally{Xe(o)}}return AI(r,e,n)}function RI(t,e,n,r=0,i){if(t!==null){if(e[j]&2048&&!(r&2)){let s=QR(t,e,n,r,pn);if(s!==pn)return s}let o=NI(t,e,n,r,pn);if(o!==pn)return o}return MI(e,n,r,i)}function NI(t,e,n,r,i){let o=YR(n);if(typeof o=="function"){if(!zp(e,t,r))return r&1?AI(i,n,r):MI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Jl(n);else return s}finally{Wp()}}else if(typeof o=="number"){let s=null,a=SI(t,e),c=Oo,l=r&1?e[Et][Mt]:null;for((a===-1||r&4)&&(c=a===-1?kg(t,e):e[a+8],c===Oo||!zC(r,!1)?a=-1:(s=e[k],a=_u(c),e=Eu(c,e)));a!==-1;){let u=e[k];if(HC(o,a,u.data)){let d=GR(a,e,n,s,r,l);if(d!==pn)return d}c=e[a+8],c!==Oo&&zC(r,e[k].data[a+8]===l)&&HC(o,a,e)?(s=u,a=_u(c),e=Eu(c,e)):a=-1}}return i}function GR(t,e,n,r,i,o){let s=e[k],a=s.data[t+8],c=r==null?Ir(a)&&lg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=qR(a,s,n,c,l);return u!==null?wu(e,s,u,a,i):pn}function qR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&un(h)&&h.type===n)return c}return null}function wu(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof wi){let a=o;if(a.resolving){let h=Yl(s[n]);throw yp(h)}let c=Cu(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?Xe(a.injectImpl):null,f=zp(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kR(n,s[n],e)}finally{d!==null&&Xe(d),Cu(c),a.resolving=!1,Wp()}}return o}function YR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(hi)?t[hi]:void 0;return typeof e=="number"?e>=0?e&DI:KR:e}function HC(t,e,n){let r=1<<t;return!!(n[e+(t>>TI)]&r)}function zC(t,e){return!(t&2)&&!(t&1&&e)}var Ii=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return RI(this._tNode,this._lView,e,li(r),n)}};function KR(){return new Ii(et(),G())}function Si(t){return Lo(()=>{let e=t.prototype.constructor,n=e[Hs]||dg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Hs]||dg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dg(t){return lp(t)?()=>{let e=dg(je(t));return e&&e()}:gr(t)}function QR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[j]&2048&&!Ro(s);){let a=NI(o,s,n,r|2,pn);if(a!==pn)return a;let c=o.parent;if(!c){let l=s[Mp];if(l){let u=l.get(n,pn,r);if(u!==pn)return u}c=PI(s),s=s[gi]}o=c}return i}function PI(t){let e=t[k],n=e.type;return n===2?e.declTNode:n===1?t[Mt]:null}function va(t){return WR(et(),t)}function ZR(){return Lu(et(),G())}function Lu(t,e){return new Kn(Wt(t,e))}var Kn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=ZR}return t})();function OI(t){return(t.flags&128)===128}var Fg=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Fg||{}),xI=new Map,JR=0;function XR(){return JR++}function eN(t){xI.set(t[Qs],t)}function fg(t){xI.delete(t[Qs])}var WC="__ngContext__";function xo(t,e){ln(e)?(t[WC]=e[Qs],eN(e)):t[WC]=e}function kI(t){return LI(t[Mo])}function FI(t){return LI(t[At])}function LI(t){for(;t!==null&&!zt(t);)t=t[At];return t}var hg;function Lg(t){hg=t}function VI(){if(hg!==void 0)return hg;if(typeof document<"u")return document;throw new I(210,!1)}var Vu=new D("",{providedIn:"root",factory:()=>tN}),tN="ng",ju=new D(""),Sr=new D("",{providedIn:"platform",factory:()=>"unknown"});var Uu=new D("",{providedIn:"root",factory:()=>VI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nN="h",rN="b";var jI="r";var UI="di";var BI=!1,$I=new D("",{providedIn:"root",factory:()=>BI});var iN=(t,e,n,r)=>{};function oN(t,e,n,r){iN(t,e,n,r)}function Vg(t){return(t.flags&32)===32}var sN=()=>null;function HI(t,e,n=!1){return sN(t,e,n)}function zI(t,e){let n=t.contentQueries;if(n!==null){let r=L(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Hp(o),a.contentQueries(2,e[s],s)}}}finally{L(r)}}}function pg(t,e,n){Hp(0);let r=L(null);try{e(t,n)}finally{L(r)}}function WI(t,e,n){if(Np(e)){let r=L(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{L(r)}}}var qn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(qn||{});var hu;function aN(){if(hu===void 0&&(hu=null,zn.trustedTypes))try{hu=zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hu}function GC(t){return aN()?.createScriptURL(t)||t}var bu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ql})`}};function ya(t){return t instanceof bu?t.changingThisBreaksApplicationSecurity:t}function jg(t,e){let n=GI(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ql})`)}return n===e}function GI(t){return t instanceof bu&&t.getTypeName()||null}var cN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qI(t){return t=String(t),t.match(cN)?t:"unsafe:"+t}var Bu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bu||{});function Vo(t){let e=KI();return e?e.sanitize(Bu.URL,t)||"":jg(t,"URL")?ya(t):qI(Gs(t))}function YI(t){let e=KI();if(e)return GC(e.sanitize(Bu.RESOURCE_URL,t)||"");if(jg(t,"ResourceURL"))return GC(ya(t));throw new I(904,!1)}function lN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?YI:Vo}function Ug(t,e,n){return lN(e,n)(t)}function KI(){let t=G();return t&&t[cn].sanitizer}function QI(t){return t instanceof Function?t():t}function uN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var ZI="ng-template";function dN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&uN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Bg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Bg(t){return t.type===4&&t.value!==ZI}function fN(t,e,n){let r=t.type===4&&!n?ZI:t.value;return e===r}function hN(t,e,n){let r=4,i=t.attrs,o=i!==null?mN(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Gt(r)&&!Gt(c))return!1;if(s&&Gt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!fN(t,c,n)||c===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!dN(t,i,c,n)){if(Gt(r))return!1;s=!0}}else{let l=e[++a],u=pN(c,i,Bg(t),n);if(u===-1){if(Gt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(t){return(t&1)===0}function pN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return vN(e,t)}function gN(t,e,n=!1){for(let r=0;r<e.length;r++)if(hN(t,e[r],n))return!0;return!1}function mN(t){for(let e=0;e<t.length;e++){let n=t[e];if(wI(n))return e}return t.length}function vN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qC(t,e){return t?":not("+e.trim()+")":e}function yN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=qC(o,i),i=""),r=s,o=o||!Gt(r);n++}return i!==""&&(e+=qC(o,i)),e}function _N(t){return t.map(yN).join(",")}function EN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Gt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var vn={};function CN(t,e){return t.createText(e)}function IN(t,e,n){t.setValue(e,n)}function JI(t,e,n){return t.createElement(e,n)}function Du(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XI(t,e,n){t.appendChild(e,n)}function YC(t,e,n,r,i){r!==null?Du(t,e,n,r,i):XI(t,e,n)}function ew(t,e,n){t.removeChild(null,e,n)}function wN(t,e,n){t.setAttribute(e,"style",n)}function bN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function tw(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&jR(t,e,r),i!==null&&bN(t,e,i),o!==null&&wN(t,e,o)}function $g(t,e,n,r,i,o,s,a,c,l,u){let d=me+r,f=d+i,h=DN(d,f),g=typeof l=="function"?l():l;return h[k]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function DN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vn);return n}function TN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=$g(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hg(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ht]=i,d[j]=r|4|128|8|64|1024,(l!==null||t&&t[j]&2048)&&(d[j]|=2048),xp(d),d[Pe]=d[gi]=t,d[Ee]=n,d[cn]=s||t&&t[cn],d[fe]=a||t&&t[fe],d[pi]=c||t&&t[pi]||null,d[Mt]=o,d[Qs]=XR(),d[So]=u,d[Mp]=l,d[Et]=e.type==2?t[Et]:d,d}function SN(t,e,n){let r=Wt(e,t),i=TN(n),o=t[cn].rendererFactory,s=zg(t,Hg(t,i,null,nw(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function nw(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function rw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function zg(t,e){return t[Mo]?t[Ap][At]=e:t[Mo]=e,t[Ap]=e,e}function O(t=1){iw(Be(),G(),wr()+t,!1)}function iw(t,e,n,r){if(!r)if((e[j]&3)===3){let o=t.preOrderCheckHooks;o!==null&&gu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&mu(e,o,0,n)}br(n)}var $u=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}($u||{});function gg(t,e,n,r){let i=L(null);try{let[o,s,a]=t.inputs[n],c=null;(s&$u.SignalBased)!==0&&(c=e[o][ze]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):vI(e,c,o,r)}finally{L(i)}}var gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(gn||{}),AN;function Wg(t,e){return AN(t,e)}function Po(t,e,n,r,i){if(r!=null){let o,s=!1;zt(r)?o=r:ln(r)&&(s=!0,r=r[Ht]);let a=Rt(r);t===0&&n!==null?i==null?XI(e,n,a):Du(e,n,a,i||null,!0):t===1&&n!==null?Du(e,n,a,i||null,!0):t===2?ew(e,a,s):t===3&&e.destroyNode(a),o!=null&&UN(e,t,o,n,i)}}function MN(t,e){ow(t,e),e[Ht]=null,e[Mt]=null}function RN(t,e,n,r,i,o){r[Ht]=i,r[Mt]=e,zu(t,r,n,1,i,o)}function ow(t,e){e[cn].changeDetectionScheduler?.notify(9),zu(t,e,e[fe],2,null,null)}function NN(t){let e=t[Mo];if(!e)return eg(t[k],t);for(;e;){let n=null;if(ln(e))n=e[Mo];else{let r=e[Ue];r&&(n=r)}if(!n){for(;e&&!e[At]&&e!==t;)ln(e)&&eg(e[k],e),e=e[Pe];e===null&&(e=t),ln(e)&&eg(e[k],e),n=e&&e[At]}e=n}}function Gg(t,e){let n=t[Xs],r=n.indexOf(e);n.splice(r,1)}function Hu(t,e){if(_i(e))return;let n=e[fe];n.destroyNode&&zu(t,e,n,3,null,null),NN(e)}function eg(t,e){if(_i(e))return;let n=L(null);try{e[j]&=-129,e[j]|=256,e[Ct]&&vl(e[Ct]),ON(t,e),PN(t,e),e[k].type===1&&e[fe].destroy();let r=e[mi];if(r!==null&&zt(e[Pe])){r!==e[Pe]&&Gg(r,e);let i=e[yi];i!==null&&i.detachView(t)}fg(e)}finally{L(n)}}function PN(t,e){let n=t.cleanup,r=e[Ao];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ao]=null);let i=e[$n];if(i!==null){e[$n]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Zs];if(o!==null){e[Zs]=null;for(let s of o)s.destroy()}}function ON(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ie(4,a,c);try{c.call(a)}finally{ie(5,a,c)}}else{ie(4,i,o);try{o.call(i)}finally{ie(5,i,o)}}}}}function xN(t,e,n){return kN(t,e.parent,n)}function kN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ht];if(Ir(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return Wt(r,n)}function FN(t,e,n){return VN(t,e,n)}function LN(t,e,n){return t.type&40?Wt(t,n):null}var VN=LN,KC;function qg(t,e,n,r){let i=xN(t,r,e),o=e[fe],s=r.parent||e[Mt],a=FN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)YC(o,i,n[c],a,!1);else YC(o,i,n,a,!1);KC!==void 0&&KC(o,r,e,n,i)}function ca(t,e){if(e!==null){let n=e.type;if(n&3)return Wt(e,t);if(n&4)return mg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ca(t,r);{let i=t[e.index];return zt(i)?mg(-1,i):Rt(i)}}else{if(n&128)return ca(t,e.next);if(n&32)return Wg(e,t)()||Rt(t[e.index]);{let r=sw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=mr(t[Et]);return ca(i,r)}else return ca(t,e.next)}}}return null}function sw(t,e){if(e!==null){let r=t[Et][Mt],i=e.projection;return r.projection[i]}return null}function mg(t,e){let n=Ue+t+1;if(n<e.length){let r=e[n],i=r[k].firstChild;if(i!==null)return ca(r,i)}return e[Cr]}function Yg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&xo(Rt(a),r),n.flags|=2),!Vg(n))if(c&8)Yg(t,e,n.child,r,i,o,!1),Po(e,t,i,a,o);else if(c&32){let l=Wg(n,r),u;for(;u=l();)Po(e,t,i,u,o);Po(e,t,i,a,o)}else c&16?jN(t,e,r,n,i,o):Po(e,t,i,a,o);n=s?n.projectionNext:n.next}}function zu(t,e,n,r,i,o){Yg(n,r,t.firstChild,e,i,o,!1)}function jN(t,e,n,r,i,o){let s=n[Et],c=s[Mt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Po(e,t,i,u,o)}else{let l=c,u=s[Pe];OI(r)&&(l.flags|=128),Yg(t,e,l,u,i,o,!0)}}function UN(t,e,n,r,i){let o=n[Cr],s=Rt(n);o!==s&&Po(e,t,r,o,i);for(let a=Ue;a<n.length;a++){let c=n[a];zu(c[k],c,t,e,r,o)}}function BN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gn.Important),t.setStyle(n,r,i,o))}}function aw(t,e,n,r,i){let o=wr(),s=r&2;try{br(-1),s&&e.length>me&&iw(t,e,me,!1),ie(s?2:0,i,n),n(r,i)}finally{br(o),ie(s?3:1,i,n)}}function Kg(t,e,n){YN(t,e,n),(n.flags&64)===64&&KN(t,e,n)}function Qg(t,e,n=Wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function $N(t,e,n,r){let o=r.get($I,BI)||n===qn.ShadowDom,s=t.selectRootElement(e,o);return HN(s),s}function HN(t){zN(t)}var zN=()=>null;function WN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cw(t,e,n,r,i,o){let s=e[k];if(Zg(t,s,e,n,r)){Ir(t)&&qN(e,t.index);return}t.type&3&&(n=WN(n)),GN(t,e,n,r,i,o)}function GN(t,e,n,r,i,o){if(t.type&3){let s=Wt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function qN(t,e){let n=Nt(e,t);n[j]&16||(n[j]|=64)}function YN(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ir(n)&&SN(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Iu(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=wu(e,t,s,n);if(xo(c,e),o!==null&&XN(e,s-r,c,a,n,o),un(a)){let l=Nt(n.index,e);l[Ee]=wu(e,t,s,n)}}}function KN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=RC();try{br(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ou(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QN(c,l)}}finally{br(-1),ou(s)}}function QN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lw(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];gN(e,o.selectors,!1)&&(r??=[],un(o)?r.unshift(o):r.push(o))}return r}function ZN(t,e,n,r,i,o){let s=Wt(t,e);JN(e[fe],s,o,t.value,n,r,i)}function JN(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Gs(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function XN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];gg(r,n,c,l)}}function eP(t,e,n,r,i){let o=me+n,s=e[k],a=i(s,e,t,r,n);e[o]=a,No(t,!0);let c=t.type===2;return c?(tw(e[fe],a,t),(vC()===0||ea(t))&&xo(a,e),yC()):xo(a,e),lu()&&(!c||!Vg(t))&&qg(s,e,a,t),t}function tP(t){let e=t;return jp()?bC():(e=e.parent,No(e,!1)),e}function nP(t,e){let n=t[pi];if(!n)return;n.get(tt,null)?.(e)}function Zg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];gg(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];gg(u,l,r,i),a=!0}return a}function rP(t,e){let n=Nt(e,t),r=n[k];iP(r,n);let i=n[Ht];i!==null&&n[So]===null&&(n[So]=HI(i,n[pi])),ie(18),Jg(r,n,n[Ee]),ie(19,n[Ee])}function iP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Jg(t,e,n){su(e);try{let r=t.viewQuery;r!==null&&pg(1,r,n);let i=t.template;i!==null&&aw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[yi]?.finishViewCreation(t),t.staticContentQueries&&zI(t,e),t.staticViewQueries&&pg(2,t.viewQuery,n);let o=t.components;o!==null&&oP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[j]&=-5,au()}}function oP(t,e){for(let n=0;n<e.length;n++)rP(t,e[n])}function Wu(t,e,n,r){let i=L(null);try{let o=e.tView,a=t[j]&4096?4096:16,c=Hg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[mi]=l;let u=t[yi];return u!==null&&(c[yi]=u.createEmbeddedView(o)),Jg(o,c,n),c}finally{L(i)}}function fa(t,e){return!e||e.firstChild===null||OI(t)}var QC=!1,sP=new D("");function ha(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Rt(o)),zt(o)&&uw(o,r);let s=n.type;if(s&8)ha(t,e,n.child,r);else if(s&32){let a=Wg(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=sw(e,n);if(Array.isArray(a))r.push(...a);else{let c=mr(e[Et]);ha(c[k],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function uw(t,e){for(let n=Ue;n<t.length;n++){let r=t[n],i=r[k].firstChild;i!==null&&ha(r[k],r,i,e)}t[Cr]!==t[Ht]&&e.push(t[Cr])}function dw(t){if(t[nu]!==null){for(let e of t[nu])e.impl.addSequence(e);t[nu].length=0}}var fw=[];function aP(t){return t[Ct]??cP(t)}function cP(t){let e=fw.pop()??Object.create(uP);return e.lView=t,e}function lP(t){t.lView[Ct]!==t&&(t.lView=null,fw.push(t))}var uP=F(_({},ti),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ia(t.lView)},consumerOnSignalRead(){this.lView[Ct]=this}});function dP(t){let e=t[Ct]??Object.create(fP);return e.lView=t,e}var fP=F(_({},ti),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=mr(t.lView);for(;e&&!hw(e[k]);)e=mr(e);e&&kp(e)},consumerOnSignalRead(){this.lView[Ct]=this}});function hw(t){return t.type!==2}function pw(t){if(t[Zs]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Zs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[j]&8192)}}var hP=100;function Xg(t,e=0){let r=t[cn].rendererFactory,i=!1;i||r.begin?.();try{pP(t,e)}finally{i||r.end?.()}}function pP(t,e){let n=Bp();try{$p(!0),vg(t,e);let r=0;for(;ra(t);){if(r===hP)throw new I(103,!1);r++,vg(t,1)}}finally{$p(n)}}function gw(t,e){Up(e?oa.Exhaustive:oa.OnlyDirtyViews);try{Xg(t)}finally{Up(oa.Off)}}function gP(t,e,n,r){if(_i(e))return;let i=e[j],o=!1,s=!1;su(e);let a=!0,c=null,l=null;o||(hw(t)?(l=aP(e),c=ni(l)):gl()===null?(a=!1,l=dP(e),c=ni(l)):e[Ct]&&(vl(e[Ct]),e[Ct]=null));try{xp(e),TC(t.bindingStartIndex),n!==null&&aw(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&gu(e,h,null)}else{let h=t.preOrderHooks;h!==null&&mu(e,h,0,null),Jp(e,0)}if(s||mP(e),pw(e),mw(e,0),t.contentQueries!==null&&zI(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&gu(e,h)}else{let h=t.contentHooks;h!==null&&mu(e,h,1),Jp(e,1)}yP(t,e);let d=t.components;d!==null&&yw(e,d,0);let f=t.viewQuery;if(f!==null&&pg(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&gu(e,h)}else{let h=t.viewHooks;h!==null&&mu(e,h,2),Jp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[tu]){for(let h of e[tu])h();e[tu]=null}o||(dw(e),e[j]&=-73)}catch(u){throw o||ia(e),u}finally{l!==null&&(co(l,c),a&&lP(l)),au()}}function mw(t,e){for(let n=kI(t);n!==null;n=FI(n))for(let r=Ue;r<n.length;r++){let i=n[r];vw(i,e)}}function mP(t){for(let e=kI(t);e!==null;e=FI(e)){if(!(e[j]&2))continue;let n=e[Xs];for(let r=0;r<n.length;r++){let i=n[r];kp(i)}}}function vP(t,e,n){ie(18);let r=Nt(e,t);vw(r,n),ie(19,r[Ee])}function vw(t,e){ru(t)&&vg(t,e)}function vg(t,e){let r=t[k],i=t[j],o=t[Ct],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ls(o)),s||=!1,o&&(o.dirty=!1),t[j]&=-9217,s)gP(r,t,r.template,t[Ee]);else if(i&8192){let a=L(null);try{pw(t),mw(t,1);let c=r.components;c!==null&&yw(t,c,1),dw(t)}finally{L(a)}}}function yw(t,e,n){for(let r=0;r<e.length;r++)vP(t,e[r],n)}function yP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)br(~i);else{let o=i,s=n[++r],a=n[++r];MC(s,o);let c=e[o];ie(24,c),a(2,c),ie(25,c)}}}finally{br(-1)}}function em(t,e){let n=Bp()?64:1088;for(t[cn].changeDetectionScheduler?.notify(e);t;){t[j]|=n;let r=mr(t);if(Ro(t)&&!r)return t;t=r}return null}function _w(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ew(t,e){let n=Ue+e;if(n<t.length)return t[n]}function Gu(t,e,n,r=!0){let i=e[k];if(_P(i,e,t,n),r){let s=mg(n,t),a=e[fe],c=a.parentNode(t[Cr]);c!==null&&RN(i,t[Mt],a,e,c,s)}let o=e[So];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Cw(t,e){let n=pa(t,e);return n!==void 0&&Hu(n[k],n),n}function pa(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n];if(r){let i=r[mi];i!==null&&i!==t&&Gg(i,r),e>0&&(t[n-1][At]=r[At]);let o=qs(t,Ue+e);MN(r[k],r);let s=o[yi];s!==null&&s.detachView(o[k]),r[Pe]=null,r[At]=null,r[j]&=-129}return r}function _P(t,e,n,r){let i=Ue+r,o=n.length;r>0&&(n[i-1][At]=e),r<o-Ue?(e[At]=n[i],Ep(n,Ue+r,e)):(n.push(e),e[At]=null),e[Pe]=n;let s=e[mi];s!==null&&n!==s&&Iw(s,e);let a=e[yi];a!==null&&a.insertView(t),iu(e),e[j]|=128}function Iw(t,e){let n=t[Xs],r=e[Pe];if(ln(r))t[j]|=2;else{let i=r[Pe][Et];e[Et]!==i&&(t[j]|=2)}n===null?t[Xs]=[e]:n.push(e)}var Tr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[k];return ha(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ee]}set context(e){this._lView[Ee]=e}get destroyed(){return _i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pe];if(zt(e)){let n=e[Js],r=n?n.indexOf(this):-1;r>-1&&(pa(e,r),qs(n,r))}this._attachedToViewContainer=!1}Hu(this._lView[k],this._lView)}onDestroy(e){Fp(this._lView,e)}markForCheck(){em(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[j]&=-129}reattach(){iu(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,Xg(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[pi].get(sP,QC)}catch{this.exhaustive=QC}}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ro(this._lView),n=this._lView[mi];n!==null&&!e&&Gg(n,this._lView),ow(this._lView[k],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e;let n=Ro(this._lView),r=this._lView[mi];r!==null&&!n&&Iw(r,this._lView),iu(this._lView)}};var qu=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=EP;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Wu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Tr(o)}}return t})();function EP(){return CP(et(),G())}function CP(t,e){return t.type&4?new qu(e,t,Lu(t,e)):null}function Yu(t,e,n,r,i){let o=t.data[e];if(o===null)o=IP(t,e,n,r,i),AC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=wC();o.injectorIndex=s===null?-1:s.injectorIndex}return No(o,!0),o}function IP(t,e,n,r,i){let o=Vp(),s=jp(),a=s?o:o&&o.parent,c=t.data[e]=bP(t,a,n,e,r,i);return wP(t,c,o,s),c}function wP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function bP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return EC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var $q=new RegExp(`^(\\d+)*(${rN}|${nN})*(.*)`);function DP(t){let e=t[Rp]??[],r=t[Pe][fe],i=[];for(let o of e)o.data[UI]!==void 0?i.push(o):TP(o,r);t[Rp]=i}function TP(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[jI];for(;n<i;){let o=r.nextSibling;ew(e,r,!1),r=o,n++}}}var SP=()=>null,AP=()=>null;function yg(t,e){return SP(t,e)}function ww(t,e,n){return AP(t,e,n)}var bw=class{},Ku=class{},_g=class{resolveComponentFactory(e){throw new I(917,!1)}},_a=class{static NULL=new _g},bi=class{},Ar=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>MP()}return t})();function MP(){let t=G(),e=et(),n=Nt(e.index,t);return(ln(n)?n:t)[fe]}var Dw=(()=>{class t{static \u0275prov=T({token:t,providedIn:"root",factory:()=>null})}return t})();var vu={},Eg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,vu,r);return i!==vu||n===vu?i:this.parentInjector.get(e,n,r)}};function ZC(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=cp(i,a);else if(o==2){let c=a,l=e[++s];r=cp(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function R(t,e=0){let n=G();if(n===null)return A(t,e);let r=et();return RI(r,n,je(t),e)}function Tw(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}PP(t,e,n,a,o,c,l)}o!==null&&r!==null&&RP(n,r,o)}function RP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new I(-301,!1);r.push(e[i],o)}}function NP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function PP(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&un(h)&&(c=!0,NP(t,n,f)),ug(Iu(n,e),t,h.type)}VP(n,t.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=rw(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=da(n.mergedAttrs,h.hostAttrs),xP(t,n,e,d,h),LP(d,h,i),s!==null&&s.has(h)){let[y,v]=s.get(h);n.directiveToIndex.set(h.type,[d,y+n.directiveStart,v+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}OP(t,n,o)}function OP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))JC(0,e,i,r),JC(1,e,i,r),eI(e,r,!1);else{let o=n.get(i);XC(0,e,o,r),XC(1,e,o,r),eI(e,r,!0)}}}function JC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Sw(e,o)}}function XC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Sw(e,s)}}function Sw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function eI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Bg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function xP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=gr(i.type,!0)),s=new wi(o,un(i),R,null);t.blueprint[r]=s,n[r]=s,kP(t,e,r,rw(t,n,i.hostVars,vn),i)}function kP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;FP(s)!=a&&s.push(a),s.push(n,r,o)}}function FP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function LP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;un(e)&&(n[""]=t)}}function VP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Aw(t,e,n,r,i,o,s,a){let c=e[k],l=c.consts,u=dn(l,s),d=Yu(c,t,n,r,u);return o&&Tw(c,e,d,dn(l,a),i),d.mergedAttrs=da(d.mergedAttrs,d.attrs),d.attrs!==null&&ZC(d,d.attrs,!1),d.mergedAttrs!==null&&ZC(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Mw(t,e){CI(t,e),Np(e)&&t.queries.elementEnd(e)}function tm(t,e,n){return t[e]=n}function mn(t,e,n){if(n===vn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Cg(t,e,n,r){let i=mn(t,e,n);return mn(t,e+1,r)||i}function jP(t,e,n,r,i,o){let s=Cg(t,e,n,r);return Cg(t,e+2,i,o)||s}function tg(t,e,n){return function r(i){let o=Ir(t)?Nt(t.index,e):e;em(o,5);let s=e[Ee],a=tI(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=tI(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function tI(t,e,n,r){let i=L(null);try{return ie(6,e,n),n(r)!==!1}catch(o){return nP(t,o),!1}finally{ie(7,e,n),L(i)}}function UP(t,e,n,r,i,o,s,a){let c=ea(t),l=!1,u=null;if(!r&&c&&(u=BP(e,n,o,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Wt(t,n),f=r?r(d):d;oN(n,f,o,a);let h=i.listen(f,o,a),g=r?y=>r(Rt(y[t.index])):t.index;Rw(g,e,n,o,a,h,!1)}return l}function BP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ao],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Rw(t,e,n,r,i,o,s){let a=e.firstCreatePass?mC(e):null,c=gC(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function nI(t,e,n,r,i,o){let s=e[n],a=e[k],l=a.data[n].outputs[r],d=s[l].subscribe(o);Rw(t.index,a,e,i,o,d,!0)}var Ig=Symbol("BINDING");var Tu=class extends _a{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Er(e);return new ko(n,this.ngModule)}};function $P(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&$u.SignalBased)!==0};return i&&(o.transform=i),o})}function HP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function zP(t,e,n){let r=e instanceof ge?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Eg(n,r):n}function WP(t){let e=t.get(bi,null);if(e===null)throw new I(407,!1);let n=t.get(Dw,null),r=t.get(vr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function GP(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return JI(e,n,n==="svg"?uC:n==="math"?dC:null)}var ko=class extends Ku{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$P(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=HP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_N(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ie(22);let a=L(null);try{let c=this.componentDef,l=qP(r,c,s,o),u=zP(c,i||this.ngModule,e),d=WP(u),f=d.rendererFactory.createRenderer(null,c),h=r?$N(f,r,c.encapsulation,u):GP(c,f),g=s?.some(rI)||o?.some(C=>typeof C!="function"&&C.bindings.some(rI)),y=Hg(null,l,null,512|nw(c),null,null,d,f,u,null,HI(h,u,!0));y[me]=h,su(y);let v=null;try{let C=Aw(me,y,2,"#host",()=>l.directiveRegistry,!0,0);h&&(tw(f,h,C),xo(h,y)),Kg(l,y,C),WI(l,C,y),Mw(l,C),n!==void 0&&KP(C,this.ngContentSelectors,n),v=Nt(C.index,y),y[Ee]=v[Ee],Jg(l,y,null)}catch(C){throw v!==null&&fg(v),fg(y),C}finally{ie(23),au()}return new Su(this.componentType,y,!!g)}finally{L(a)}}};function qP(t,e,n,r){let i=t?["ng-version","20.1.6"]:EN(e.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Ig].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Ig].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=bp(d);c.push(f)}return $g(0,null,YP(o,s),1,a,c,null,null,null,[i],null)}function YP(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function rI(t){let e=t[Ig].kind;return e==="input"||e==="twoWay"}var Su=class extends bw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ta(n[k],me),this.location=Lu(this._tNode,n),this.instance=Nt(this._tNode.index,n)[Ee],this.hostView=this.changeDetectorRef=new Tr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Zg(r,i[k],i,e,n);this.previousInputValues.set(e,n);let s=Nt(r.index,i);em(s,1)}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var jo=(()=>{class t{static __NG_ELEMENT_ID__=QP}return t})();function QP(){let t=et();return JP(t,G())}var ZP=jo,Nw=class extends ZP{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Lu(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){let e=kg(this._hostTNode,this._hostLView);if(bI(e)){let n=Eu(e,this._hostLView),r=_u(e),i=n[k].data[r+8];return new Ii(i,n)}else return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=yg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fa(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!NR(e),l;if(c)l=n;else{let v=n||{};l=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef,s=v.directives,a=v.bindings}let u=c?e:new ko(Er(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(c?d:this.parentInjector).get(ge,null);C&&(o=C)}let f=Er(u.componentType??{}),h=yg(this._lContainer,f?.id??null),g=h?.firstChild??null,y=u.create(d,i,g,o,s,a);return this.insertImpl(y.hostView,l,fa(this._hostTNode,h)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(fC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new Nw(c,c[Mt],c[Pe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Gu(s,i,o,r),e.attachToViewContainerRef(),Ep(ng(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);r&&(qs(ng(this._lContainer),n),Hu(r[k],r))}detach(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);return r&&qs(ng(this._lContainer),n)!=null?new Tr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iI(t){return t[Js]}function ng(t){return t[Js]||(t[Js]=[])}function JP(t,e){let n,r=e[t.index];return zt(r)?n=r:(n=_w(r,e,null,t),e[t.index]=n,zg(e,n)),eO(n,e,t,r),new Nw(n,t,e)}function XP(t,e){let n=t[fe],r=n.createComment(""),i=Wt(e,t),o=n.parentNode(i);return Du(n,o,r,n.nextSibling(i),!1),r}var eO=rO,tO=()=>!1;function nO(t,e,n){return tO(t,e,n)}function rO(t,e,n,r){if(t[Cr])return;let i;n.type&8?i=Rt(r):i=XP(e,n),t[Cr]=i}var oI=new Set;function Mr(t){oI.has(t)||(oI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Di=class{},Qu=class{};var Au=class extends Di{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Tu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=wp(e);this._bootstrapComponents=QI(o.bootstrap),this._r3Injector=Gp(e,n,[{provide:Di,useValue:this},{provide:_a,useValue:this.componentFactoryResolver},...r],Hn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mu=class extends Qu{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Au(this.moduleType,e,[])}};var ga=class extends Di{injector;componentFactoryResolver=new Tu(this);instance=null;constructor(e){super();let n=new di([...e.providers,{provide:Di,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],e.parent||Ks(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ea(t,e,n=null){return new ga({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var iO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dp(!1,n.type),i=r.length>0?Ea([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=T({token:t,providedIn:"environment",factory:()=>new t(A(ge))})}return t})();function wt(t){return Lo(()=>{let e=Pw(t),n=F(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Fg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(iO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qn.Emulated,styles:t.styles||_t,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Mr("NgStandalone"),Ow(n);let r=t.dependencies;return n.directiveDefs=sI(r,oO),n.pipeDefs=sI(r,rC),n.id=cO(n),n})}function oO(t){return Er(t)||bp(t)}function yn(t){return Lo(()=>({type:t.type,bootstrap:t.bootstrap||_t,declarations:t.declarations||_t,imports:t.imports||_t,exports:t.exports||_t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sO(t,e){if(t==null)return yr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=$u.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function aO(t){if(t==null)return yr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Oe(t){return Lo(()=>{let e=Pw(t);return Ow(e),e})}function Ca(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Pw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||yr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||_t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:sO(t.inputs,e),outputs:aO(t.outputs),debugInfo:null}}function Ow(t){t.features?.forEach(e=>e(t))}function sI(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function cO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lO(t){return Object.getPrototypeOf(t.prototype).constructor}function _n(t){let e=lO(t.type),n=!0,r=[t];for(;e;){let i;if(un(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=rg(t.inputs),s.declaredInputs=rg(t.declaredInputs),s.outputs=rg(t.outputs);let a=i.hostBindings;a&&pO(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&fO(t,c),l&&hO(t,l),uO(t,i),KE(t.outputs,i.outputs),un(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===_n&&(n=!1)}}e=Object.getPrototypeOf(e)}dO(r)}function uO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function dO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=da(i.hostAttrs,n=da(n,i.hostAttrs))}}function rg(t){return t===yr?{}:t===_t?[]:t}function fO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function pO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function xw(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=da(t.mergedAttrs,t.attrs);let u=t.tView=$g(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),No(t,!1);let c=mO(n,e,t,r);lu()&&qg(n,e,c,t),xo(c,e);let l=_w(c,e,c,t);e[r+me]=l,zg(e,l),nO(l,t,e)}function gO(t,e,n,r,i,o,s,a,c,l,u){let d=n+me,f;return e.firstCreatePass?(f=Yu(e,d,4,s||null,a||null),Lp()&&Tw(e,t,f,dn(e.consts,l),lw),CI(e,f)):f=e.data[d],xw(f,t,e,n,r,i,o,c),ea(f)&&Kg(e,t,f),l!=null&&Qg(t,f,u),f}function Ru(t,e,n,r,i,o,s,a,c,l,u){let d=n+me,f;if(e.firstCreatePass){if(f=Yu(e,d,4,s||null,a||null),l!=null){let h=dn(e.consts,l);f.localNames=[];for(let g=0;g<h.length;g+=2)f.localNames.push(h[g],-1)}}else f=e.data[d];return xw(f,t,e,n,r,i,o,c),l!=null&&Qg(t,f,u),f}function Zu(t,e,n,r,i,o,s,a){let c=G(),l=Be(),u=dn(l.consts,o);return gO(c,l,t,e,n,r,i,u,void 0,s,a),Zu}var mO=vO;function vO(t,e,n,r){return uu(!0),e[fe].createComment("")}var nm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(nm||{}),Ia=new D(""),kw=!1,wg=class extends Ce{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,cC()&&(this.destroyRef=m(Gn,{optional:!0})??void 0,this.pendingTasks=m(hn,{optional:!0})??void 0)}emit(e){let n=L(null);try{super.next(e)}finally{L(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof pe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},he=wg;function Fw(t){let e,n;function r(){t=aa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function aI(t){return queueMicrotask(()=>t()),()=>{t=aa}}var rm="isAngularZone",Nu=rm+"_ID",yO=0,ee=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new he(!1);onMicrotaskEmpty=new he(!1);onStable=new he(!1);onError=new he(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kw}=e;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,CO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new I(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,_O,aa,aa);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},_O={};function im(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function EO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Fw(()=>{t.callbackScheduled=!1,bg(t),t.isCheckStableRunning=!0,im(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),bg(t)}function CO(t){let e=()=>{EO(t)},n=yO++;t._inner=t._inner.fork({name:"angular",properties:{[rm]:!0,[Nu]:n,[Nu+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(IO(c))return r.invokeTask(o,s,a,c);try{return cI(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),lI(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return cI(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!wO(c)&&e(),lI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,bg(t),im(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function bg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function cI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lI(t){t._nesting--,im(t)}var Pu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new he;onMicrotaskEmpty=new he;onStable=new he;onError=new he;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function IO(t){return Lw(t,"__ignore_ng_zone__")}function wO(t){return Lw(t,"__scheduler_tick__")}function Lw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Vw=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=T({token:t,providedIn:"root",factory:()=>new t})}return t})();var om=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var sm=new D("");function Qn(t){return!!t&&typeof t.then=="function"}function Ju(t){return!!t&&typeof t.subscribe=="function"}var jw=new D("");var am=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=m(jw,{optional:!0})??[];injector=m(we);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=_e(this.injector,i);if(Qn(o))n.push(o);else if(Ju(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xu=new D("");function Uw(){Mh(()=>{let t="";throw new I(600,t)})}function Bw(t){return t.isBoundToModule}var bO=10;var Rr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=m(tt);afterRenderManager=m(Vw);zonelessEnabled=m(du);rootEffectScheduler=m(Zp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ce;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=m(hn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(P(n=>!n))}constructor(){m(Ia,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=m(ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=we.NULL){return this._injector.get(ee).run(()=>{ie(10);let s=n instanceof Ku;if(!this._injector.get(am).done){let g="";throw new I(405,g)}let c;s?c=n:c=this._injector.get(_a).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=Bw(c)?void 0:this._injector.get(Di),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(sm,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),la(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ie(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ie(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(nm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new I(101,!1);let n=L(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,L(n),this.afterTick.next(),ie(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<bO;)ie(14),this.synchronizeOnce(),ie(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ra(i))continue;let o=r&&!this.zonelessEnabled?0:1;Xg(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ra(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;la(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Xu,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>la(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new I(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function la(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Uo(t,e,n,r){let i=G(),o=Ei();if(mn(i,o,e)){let s=Be(),a=cu();ZN(a,i,t,e,n,r)}return Uo}var Dg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function ig(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function DO(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),u=e[o],d=ig(o,l,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let f=t.at(s),h=e[c],g=ig(s,f,c,h,n);if(g!==0){g<0&&t.updateValue(s,h),s--,c--;continue}let y=n(o,l),v=n(s,f),C=n(o,u);if(Object.is(C,v)){let $=n(c,h);Object.is($,y)?(t.swap(o,s),t.updateValue(s,h),c--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new Ou,i??=dI(t,o,s,n),Tg(t,r,o,C))t.updateValue(o,u),o++,s++;else if(i.has(C))r.set(y,t.detach(o)),s--;else{let $=t.create(o,e[o]);t.attach(o,$),o++,s++}}for(;o<=c;)uI(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=t.at(o),d=l.value,f=ig(o,u,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=c.next();else{r??=new Ou,i??=dI(t,o,s,n);let h=n(o,d);if(Tg(t,r,o,h))t.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,s++,l=c.next();else{let g=n(o,u);r.set(g,t.detach(o)),s--}}}for(;!l.done;)uI(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Tg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function uI(t,e,n,r,i){if(Tg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function dI(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Ou=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function qe(t,e,n,r,i,o,s,a){Mr("NgControlFlow");let c=G(),l=Be(),u=dn(l.consts,o);return Ru(c,l,t,e,n,r,i,u,256,s,a),qt}function qt(t,e,n,r,i,o,s,a){Mr("NgControlFlow");let c=G(),l=Be(),u=dn(l.consts,o);return Ru(c,l,t,e,n,r,i,u,512,s,a),qt}function Ye(t,e){Mr("NgControlFlow");let n=G(),r=Ei(),i=n[r]!==vn?n[r]:-1,o=i!==-1?xu(n,me+i):void 0,s=0;if(mn(n,r,t)){let a=L(null);try{if(o!==void 0&&Cw(o,s),t!==-1){let c=me+t,l=xu(n,c),u=Rg(n[k],c),d=ww(l,u,n),f=Wu(n,u,e,{dehydratedView:d});Gu(l,f,s,fa(u,d))}}finally{L(a)}}else if(o!==void 0){let a=Ew(o,s);a!==void 0&&(a[Ee]=e)}}var Sg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ue}};function cm(t){return t}var Ag=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Zn(t,e,n,r,i,o,s,a,c,l,u,d,f){Mr("NgControlFlow");let h=G(),g=Be(),y=c!==void 0,v=G(),C=a?s.bind(v[Et][Ee]):s,$=new Ag(y,C);v[me+t]=$,Ru(h,g,t+1,e,n,r,i,dn(g.consts,o),256),y&&Ru(h,g,t+2,c,l,u,d,dn(g.consts,f),512)}var Mg=class extends Dg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ue}at(e){return this.getLView(e)[Ee].$implicit}attach(e,n){let r=n[So];this.needsIndexUpdate||=e!==this.length,Gu(this.lContainer,n,e,fa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,TO(this.lContainer,e)}create(e,n){let r=yg(this.lContainer,this.templateTNode.tView.ssrId),i=Wu(this.hostLView,this.templateTNode,new Sg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hu(e[k],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ee].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ee].$index=e}getLView(e){return SO(this.lContainer,e)}};function Jn(t){let e=L(null),n=wr();try{let r=G(),i=r[k],o=r[n],s=n+1,a=xu(r,s);if(o.liveCollection===void 0){let l=Rg(i,s);o.liveCollection=new Mg(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(DO(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Ei(),u=c.length===0;if(mn(r,l,u)){let d=n+2,f=xu(r,d);if(u){let h=Rg(i,d),g=ww(f,h,r),y=Wu(r,h,void 0,{dehydratedView:g});Gu(f,y,0,fa(h,g))}else i.firstUpdatePass&&DP(f),Cw(f,0)}}}finally{L(e)}}function xu(t,e){return t[e]}function TO(t,e){return pa(t,e)}function SO(t,e){return Ew(t,e)}function Rg(t,e){return ta(t,e)}function Pt(t,e,n){let r=G(),i=Ei();if(mn(r,i,e)){let o=Be(),s=cu();cw(s,r,t,e,r[fe],n)}return Pt}function fI(t,e,n,r,i){Zg(e,t,n,i?"class":"style",r)}function w(t,e,n,r){let i=G(),o=i[k],s=t+me,a=o.firstCreatePass?Aw(s,i,2,e,lw,Lp(),n,r):o.data[s];if(eP(a,i,t,e,AO),ea(a)){let c=i[k];Kg(c,i,a),WI(c,a,i)}return r!=null&&Qg(i,a),w}function b(){let t=Be(),e=et(),n=tP(e);return t.firstCreatePass&&Mw(t,n),CC(n)&&IC(),_C(),n.classesWithoutHost!=null&&LR(n)&&fI(t,n,G(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&VR(n)&&fI(t,n,G(),n.stylesWithoutHost,!1),b}function Ke(t,e,n,r){return w(t,e,n,r),b(),Ke}var AO=(t,e,n,r,i)=>(uu(!0),JI(e[fe],r,FC()));function Ot(){return G()}var Ci=void 0;function MO(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var RO=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",MO],ua={};function lm(t,e,n){typeof e!="string"&&(n=e,e=t[le.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ua[e]=t,n&&(ua[e][le.ExtraData]=n)}function nt(t){let e=NO(t),n=hI(e);if(n)return n;let r=e.split("-")[0];if(n=hI(r),n)return n;if(r==="en")return RO;throw new I(701,!1)}function hI(t){return t in ua||(ua[t]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[t]),ua[t]}var le=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(le||{});function NO(t){return t.toLowerCase().replace(/_/g,"-")}var wa="en-US",PO="USD";var OO=wa;function $w(t){typeof t=="string"&&(OO=t.toLowerCase().replace(/_/g,"-"))}function se(t,e,n){let r=G(),i=Be(),o=et();return Hw(i,r,r[fe],o,t,e,n),se}function Hw(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=tg(r,e,o),UP(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let f=u[d],h=u[d+1];c??=tg(r,e,o),nI(r,e,f,h,i,c)}if(l&&l.length)for(let d of l)c??=tg(r,e,o),nI(r,e,d,i,i,c)}}function ue(t=1){return kC(t)}function um(t){let e=DC();return na(e,me+t)}function pu(t,e){return t<<17|e<<2}function Ti(t){return t>>17&32767}function xO(t){return(t&2)==2}function kO(t,e){return t&131071|e<<17}function Ng(t){return t|2}function Fo(t){return(t&131068)>>2}function og(t,e){return t&-131069|e<<2}function FO(t){return(t&1)===1}function Pg(t){return t|1}function LO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ti(s),c=Fo(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||To(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Ti(t[a+1]);t[r+1]=pu(f,a),f!==0&&(t[f+1]=og(t[f+1],r)),t[a+1]=kO(t[a+1],r)}else t[r+1]=pu(a,0),a!==0&&(t[a+1]=og(t[a+1],r)),a=r;else t[r+1]=pu(c,0),a===0?a=r:t[c+1]=og(t[c+1],r),c=r;l&&(t[r+1]=Ng(t[r+1])),pI(t,u,r,!0),pI(t,u,r,!1),VO(e,u,t,r,o),s=pu(a,c),o?e.classBindings=s:e.styleBindings=s}function VO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&To(o,e)>=0&&(n[r+1]=Pg(n[r+1]))}function pI(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ti(i):Fo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];jO(c,e)&&(a=!0,t[s+1]=r?Pg(l):Ng(l)),s=r?Ti(l):Fo(l)}a&&(t[n+1]=r?Ng(i):Pg(i))}function jO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?To(t,e)>=0:!1}function ed(t,e,n){return zw(t,e,n,!1),ed}function ba(t,e){return zw(t,e,null,!0),ba}function zw(t,e,n,r){let i=G(),o=Be(),s=SC(2);if(o.firstUpdatePass&&BO(o,t,s,r),e!==vn&&mn(i,s,e)){let a=o.data[wr()];GO(o,a,i,i[fe],t,i[s+1]=qO(e,n),r,s)}}function UO(t,e){return e>=t.expandoStartIndex}function BO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[wr()],s=UO(t,n);YO(o,r)&&e===null&&!s&&(e=!1),e=$O(i,o,e,r),LO(i,o,e,n,s,r)}}function $O(t,e,n,r){let i=NC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sg(null,t,e,n,r),n=ma(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=sg(i,t,e,n,r),o===null){let c=HO(t,e,r);c!==void 0&&Array.isArray(c)&&(c=sg(null,t,e,c[1],r),c=ma(c,e.attrs,r),zO(t,e,r,c))}else o=WO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function HO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Fo(r)!==0)return t[Ti(r)]}function zO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ti(i)]=r}function WO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ma(r,s,n)}return ma(r,e.attrs,n)}function sg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ma(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ma(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),nC(t,s,n?!0:e[++o]))}return t===void 0?null:t}function GO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=FO(l)?gI(c,e,n,i,Fo(l),s):void 0;if(!ku(u)){ku(o)||xO(l)&&(o=gI(c,null,n,i,a,s));let d=Pp(wr(),n);BN(r,s,d,i,o)}}function gI(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===vn&&(f=d?_t:void 0);let h=d?eu(f,r):u===r?f:void 0;if(l&&!ku(h)&&(h=eu(c,r)),ku(h)&&(a=h,s))return a;let g=t[i+1];i=s?Ti(g):Fo(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=eu(c,r))}return a}function ku(t){return t!==void 0}function qO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Hn(ya(t)))),t}function YO(t,e){return(t.flags&(e?8:16))!==0}function M(t,e=""){let n=G(),r=Be(),i=t+me,o=r.firstCreatePass?Yu(r,i,1,e,null):r.data[i],s=KO(r,n,o,e,t);n[i]=s,lu()&&qg(r,n,s,o),No(o,!1)}var KO=(t,e,n,r,i)=>(uu(!0),CN(e[fe],r));function QO(t,e,n,r=""){return mn(t,Ei(),n)?e+Gs(n)+r:vn}function xe(t){return rt("",t),xe}function rt(t,e,n){let r=G(),i=QO(r,t,e,n);return i!==vn&&ZO(r,wr(),i),rt}function ZO(t,e,n){let r=Pp(e,t);IN(t[fe],r,n)}function Da(t,e,n){Yp(e)&&(e=e());let r=G(),i=Ei();if(mn(r,i,e)){let o=Be(),s=cu();cw(s,r,t,e,r[fe],n)}return Da}function td(t,e){let n=Yp(t);return n&&t.set(e),n}function Ta(t,e){let n=G(),r=Be(),i=et();return Hw(r,n,n[fe],i,t,e),Ta}function JO(t,e,n){let r=Be();if(r.firstCreatePass){let i=un(t);Og(n,r.data,r.blueprint,i,!0),Og(e,r.data,r.blueprint,i,!1)}}function Og(t,e,n,r,i){if(t=je(t),Array.isArray(t))for(let o=0;o<t.length;o++)Og(t[o],e,n,r,i);else{let o=Be(),s=G(),a=et(),c=ui(t)?t:je(t.provide),l=Sp(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(ui(t)||!t.multi){let h=new wi(l,i,R,null),g=cg(c,e,i?u:u+f,d);g===-1?(ug(Iu(a,s),o,c),ag(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=cg(c,e,u+f,d),g=cg(c,e,u,u+f),y=h>=0&&n[h],v=g>=0&&n[g];if(i&&!v||!i&&!y){ug(Iu(a,s),o,c);let C=tx(i?ex:XO,n.length,i,r,l,t);!i&&v&&(n[g].providerFactory=C),ag(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=Ww(n[i?g:h],l,!i&&r);ag(o,t,h>-1?h:g,C)}!i&&r&&v&&n[g].componentProviders++}}}function ag(t,e,n,r){let i=ui(e),o=aC(e);if(i||o){let c=(o?je(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Ww(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function cg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XO(t,e,n,r,i){return xg(this.multi,[])}function ex(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=wu(r,r[k],this.providerFactory.index,i);s=c.slice(0,a),xg(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],xg(o,s);return s}function xg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tx(t,e,n,r,i,o){let s=new wi(t,n,R,null);return s.multi=[],s.index=e,s.componentProviders=0,Ww(s,i,r&&!n),s}function Bo(t,e=[]){return n=>{n.providersResolver=(r,i)=>JO(r,i?i(t):t,e)}}function dm(t,e,n,r){return Gw(G(),sa(),t,e,n,r)}function fm(t,e){let n=t[e];return n===vn?void 0:n}function Gw(t,e,n,r,i,o){let s=e+n;return mn(t,s,i)?tm(t,s+1,o?r.call(o,i):r(i)):fm(t,s+1)}function nx(t,e,n,r,i,o,s){let a=e+n;return Cg(t,a,i,o)?tm(t,a+2,s?r.call(s,i,o):r(i,o)):fm(t,a+2)}function rx(t,e,n,r,i,o,s,a,c){let l=e+n;return jP(t,l,i,o,s,a)?tm(t,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):fm(t,l+4)}function $e(t,e){let n=Be(),r,i=t+me;n.firstCreatePass?(r=ix(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=gr(r.type,!0)),s,a=Xe(R);try{let c=Cu(!1),l=o();return Cu(c),Op(n,G(),i,l),l}finally{Xe(a)}}function ix(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function En(t,e,n){let r=t+me,i=G(),o=na(i,r);return pm(i,r)?Gw(i,sa(),e,o.transform,n,o):o.transform(n)}function hm(t,e,n,r){let i=t+me,o=G(),s=na(o,i);return pm(o,i)?nx(o,sa(),e,s.transform,n,r,s):s.transform(n,r)}function Cn(t,e,n,r,i,o){let s=t+me,a=G(),c=na(a,s);return pm(a,s)?rx(a,sa(),e,c.transform,n,r,i,o,c):c.transform(n,r,i,o)}function pm(t,e){return t[k].data[e].pure}var Fu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gm=(()=>{class t{compileModuleSync(n){return new Mu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=wp(n),o=QI(i.declarations).reduce((s,a)=>{let c=Er(a);return c&&s.push(new ko(c)),s},[]);return new Fu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ox=(()=>{class t{zone=m(ee);changeDetectionScheduler=m(vr);applicationRef=m(Rr);applicationErrorHandler=m(tt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ee(F(_({},Yw()),{scheduleInRootZone:n})),[{provide:ee,useFactory:t},{provide:_r,multi:!0,useFactory:()=>{let r=m(ox,{optional:!0});return()=>r.initialize()}},{provide:_r,multi:!0,useFactory:()=>{let r=m(sx);return()=>{r.initialize()}}},e===!0?{provide:Kp,useValue:!0}:[],{provide:Qp,useValue:n??kw},{provide:tt,useFactory:()=>{let r=m(ee),i=m(ge),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(an),o.handleError(s))})}}}]}function Yw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sx=(()=>{class t{subscription=new pe;initialized=!1;zone=m(ee);pendingTasks=m(hn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ee.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ee.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Kw=(()=>{class t{applicationErrorHandler=m(tt);appRef=m(Rr);taskService=m(hn);ngZone=m(ee);zonelessEnabled=m(du);tracing=m(Ia,{optional:!0});disableScheduling=m(Kp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(m(Qp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?aI:Fw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ax(){return typeof $localize<"u"&&$localize.locale||wa}var Nr=new D("",{providedIn:"root",factory:()=>m(Nr,{optional:!0,skipSelf:!0})||ax()}),mm=new D("",{providedIn:"root",factory:()=>PO});function ut(t){return GE(t)}function $o(t,e){return _l(t,e?.equal)}var Qw=class{[ze];constructor(e){this[ze]=e}destroy(){this[ze].destroy()}};var eb=Symbol("InputSignalNode#UNSET"),Ix=F(_({},El),{transformFn:void 0,applyValueToInputSignal(t,e){uo(t,e)}});function tb(t,e){let n=Object.create(Ix);n.value=t,n.transformFn=e?.transform;function r(){if(ao(n),n.value===eb){let i=null;throw new I(-950,i)}return n.value}return r[ze]=n,r}var rd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>va(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},wx=new D("");wx.__NG_ELEMENT_ID__=t=>{let e=et();if(e===null)throw new I(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new I(204,!1)};function Zw(t,e){return tb(t,e)}function bx(t){return tb(eb,t)}var nb=(Zw.required=bx,Zw);var Ai=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},rb=new Ai("20.1.6");var vm=new D(""),Dx=new D("");function Sa(t){return!t.moduleRef}function Tx(t){let e=Sa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ee);return n.run(()=>{Sa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(tt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Sa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(vm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(vm);s.add(o),t.moduleRef.onDestroy(()=>{la(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Ax(r,n,()=>{let o=e.get(hn),s=o.add(),a=e.get(am);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Nr,wa);if($w(c||wa),!e.get(Dx,!0))return Sa(t)?e.get(Rr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Sa(t)){let u=e.get(Rr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return Sx?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var Sx;function Ax(t,e,n){try{let r=n();return Qn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var nd=null;function Mx(t=[],e){return we.create({name:e,providers:[{provide:Ys,useValue:"platform"},{provide:vm,useValue:new Set([()=>nd=null])},...t]})}function Rx(t=[]){if(nd)return nd;let e=Mx(t);return nd=e,Uw(),Nx(e),e}function Nx(t){let e=t.get(ju,null);_e(t,()=>{e?.forEach(n=>n())})}function ym(){return!1}var Pr=(()=>{class t{static __NG_ELEMENT_ID__=Px}return t})();function Px(t){return Ox(et(),G(),(t&16)===16)}function Ox(t,e,n){if(Ir(t)&&!n){let r=Nt(t.index,e);return new Tr(r,r)}else if(t.type&175){let r=e[Et];return new Tr(r,e)}return null}function ib(t){ie(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Rx(r),o=[qw({}),{provide:vr,useExisting:Kw},VC,...n||[]],s=new ga({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Tx({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ie(9)}}function Or(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var ab=null;function xt(){return ab}function _m(t){ab??=t}var Ma=class{},Em=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(cb),providedIn:"platform"})}return t})();var cb=(()=>{class t extends Em{_location;_history;_doc=m(be);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xt().getBaseHref(this._doc)}onPopState(n){let r=xt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=xt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function lb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function ob(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function xr(t){return t&&t[0]!=="?"?`?${t}`:t}var Ho=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(db),providedIn:"root"})}return t})(),ub=new D(""),db=(()=>{class t extends Ho{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??m(be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+xr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+xr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+xr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(A(Em),A(ub,8))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zo=(()=>{class t{_subject=new Ce;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Fx(ob(sb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+xr(r))}normalize(n){return t.stripTrailingSlash(kx(this._basePath,sb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xr;static joinWithSlash=lb;static stripTrailingSlash=ob;static \u0275fac=function(r){return new(r||t)(A(Ho))};static \u0275prov=T({token:t,factory:()=>xx(),providedIn:"root"})}return t})();function xx(){return new zo(A(Ho))}function kx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function sb(t){return t.replace(/\/index.html$/,"")}function Fx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var mb={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Am=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Am||{});var Qe=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Qe||{}),re=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(re||{}),dt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(dt||{}),ft={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vb(t){return nt(t)[le.LocaleId]}function yb(t,e,n){let r=nt(t),i=[r[le.DayPeriodsFormat],r[le.DayPeriodsStandalone]],o=kt(i,e);return kt(o,n)}function _b(t,e,n){let r=nt(t),i=[r[le.DaysFormat],r[le.DaysStandalone]],o=kt(i,e);return kt(o,n)}function Eb(t,e,n){let r=nt(t),i=[r[le.MonthsFormat],r[le.MonthsStandalone]],o=kt(i,e);return kt(o,n)}function Cb(t,e){let r=nt(t)[le.Eras];return kt(r,e)}function Ra(t,e){let n=nt(t);return kt(n[le.DateFormat],e)}function Na(t,e){let n=nt(t);return kt(n[le.TimeFormat],e)}function Pa(t,e){let r=nt(t)[le.DateTimeFormat];return kt(r,e)}function In(t,e){let n=nt(t),r=n[le.NumberSymbols][e];if(typeof r>"u"){if(e===ft.CurrencyDecimal)return n[le.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return n[le.NumberSymbols][ft.Group]}return r}function Ib(t,e){return nt(t)[le.NumberFormats][e]}function Lx(t){return nt(t)[le.Currencies]}function wb(t){if(!t[le.ExtraData])throw new I(2303,!1)}function bb(t){let e=nt(t);return wb(e),(e[le.ExtraData][2]||[]).map(r=>typeof r=="string"?Cm(r):[Cm(r[0]),Cm(r[1])])}function Db(t,e,n){let r=nt(t);wb(r);let i=[r[le.ExtraData][0],r[le.ExtraData][1]],o=kt(i,e)||[];return kt(o,n)||[]}function kt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new I(2304,!1)}function Cm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function Tb(t,e,n="en"){let r=Lx(n)[t]||mb[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var Vx=2;function Sb(t){let e,n=mb[t];return n&&(e=n[2]),typeof e=="number"?e:Vx}var jx=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,id={},Ux=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Ab(t,e,n,r){let i=Kx(t);e=Xn(n,e)||e;let s=[],a;for(;e;)if(a=Ux.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=Rb(r,c),i=Yx(i,r));let l="";return s.forEach(u=>{let d=Gx(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ld(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Xn(t,e){let n=vb(t);if(id[n]??={},id[n][e])return id[n][e];let r="";switch(e){case"shortDate":r=Ra(t,dt.Short);break;case"mediumDate":r=Ra(t,dt.Medium);break;case"longDate":r=Ra(t,dt.Long);break;case"fullDate":r=Ra(t,dt.Full);break;case"shortTime":r=Na(t,dt.Short);break;case"mediumTime":r=Na(t,dt.Medium);break;case"longTime":r=Na(t,dt.Long);break;case"fullTime":r=Na(t,dt.Full);break;case"short":let i=Xn(t,"shortTime"),o=Xn(t,"shortDate");r=od(Pa(t,dt.Short),[i,o]);break;case"medium":let s=Xn(t,"mediumTime"),a=Xn(t,"mediumDate");r=od(Pa(t,dt.Medium),[s,a]);break;case"long":let c=Xn(t,"longTime"),l=Xn(t,"longDate");r=od(Pa(t,dt.Long),[c,l]);break;case"full":let u=Xn(t,"fullTime"),d=Xn(t,"fullDate");r=od(Pa(t,dt.Full),[u,d]);break}return r&&(id[n][e]=r),r}function od(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Yt(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Bx(t,e){return Yt(t,3).substring(0,e)}function De(t,e,n=0,r=!1,i=!1){return function(o,s){let a=$x(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return Bx(a,e);let c=In(s,ft.MinusSign);return Yt(a,e,c,r,i)}}function $x(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new I(2301,!1)}}function ae(t,e,n=Qe.Format,r=!1){return function(i,o){return Hx(i,o,t,e,n,r)}}function Hx(t,e,n,r,i,o){switch(n){case 2:return Eb(e,i,r)[t.getMonth()];case 1:return _b(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=bb(e),u=Db(e,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,g]=f,y=s>=h.hours&&a>=h.minutes,v=s<g.hours||s===g.hours&&a<g.minutes;if(h.hours<g.hours){if(y&&v)return!0}else if(y||v)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return yb(e,i,r)[s<12?0:1];case 3:return Cb(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new I(2302,!1)}}function sd(t){return function(e,n,r){let i=-1*r,o=In(n,ft.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Yt(s,2,o)+Yt(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Yt(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Yt(s,2,o)+":"+Yt(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Yt(s,2,o)+":"+Yt(Math.abs(i%60),2,o);default:throw new I(2302,!1)}}}var zx=0,cd=4;function Wx(t){let e=ld(t,zx,1).getDay();return ld(t,0,1+(e<=cd?cd:cd+7)-e)}function Mb(t){let e=t.getDay(),n=e===0?-3:cd-e;return ld(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Im(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Mb(n),s=Wx(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Yt(i,t,In(r,ft.MinusSign))}}function ad(t,e=!1){return function(n,r){let o=Mb(n).getFullYear();return Yt(o,t,In(r,ft.MinusSign),e)}}var wm={};function Gx(t){if(wm[t])return wm[t];let e;switch(t){case"G":case"GG":case"GGG":e=ae(3,re.Abbreviated);break;case"GGGG":e=ae(3,re.Wide);break;case"GGGGG":e=ae(3,re.Narrow);break;case"y":e=De(0,1,0,!1,!0);break;case"yy":e=De(0,2,0,!0,!0);break;case"yyy":e=De(0,3,0,!1,!0);break;case"yyyy":e=De(0,4,0,!1,!0);break;case"Y":e=ad(1);break;case"YY":e=ad(2,!0);break;case"YYY":e=ad(3);break;case"YYYY":e=ad(4);break;case"M":case"L":e=De(1,1,1);break;case"MM":case"LL":e=De(1,2,1);break;case"MMM":e=ae(2,re.Abbreviated);break;case"MMMM":e=ae(2,re.Wide);break;case"MMMMM":e=ae(2,re.Narrow);break;case"LLL":e=ae(2,re.Abbreviated,Qe.Standalone);break;case"LLLL":e=ae(2,re.Wide,Qe.Standalone);break;case"LLLLL":e=ae(2,re.Narrow,Qe.Standalone);break;case"w":e=Im(1);break;case"ww":e=Im(2);break;case"W":e=Im(1,!0);break;case"d":e=De(2,1);break;case"dd":e=De(2,2);break;case"c":case"cc":e=De(7,1);break;case"ccc":e=ae(1,re.Abbreviated,Qe.Standalone);break;case"cccc":e=ae(1,re.Wide,Qe.Standalone);break;case"ccccc":e=ae(1,re.Narrow,Qe.Standalone);break;case"cccccc":e=ae(1,re.Short,Qe.Standalone);break;case"E":case"EE":case"EEE":e=ae(1,re.Abbreviated);break;case"EEEE":e=ae(1,re.Wide);break;case"EEEEE":e=ae(1,re.Narrow);break;case"EEEEEE":e=ae(1,re.Short);break;case"a":case"aa":case"aaa":e=ae(0,re.Abbreviated);break;case"aaaa":e=ae(0,re.Wide);break;case"aaaaa":e=ae(0,re.Narrow);break;case"b":case"bb":case"bbb":e=ae(0,re.Abbreviated,Qe.Standalone,!0);break;case"bbbb":e=ae(0,re.Wide,Qe.Standalone,!0);break;case"bbbbb":e=ae(0,re.Narrow,Qe.Standalone,!0);break;case"B":case"BB":case"BBB":e=ae(0,re.Abbreviated,Qe.Format,!0);break;case"BBBB":e=ae(0,re.Wide,Qe.Format,!0);break;case"BBBBB":e=ae(0,re.Narrow,Qe.Format,!0);break;case"h":e=De(3,1,-12);break;case"hh":e=De(3,2,-12);break;case"H":e=De(3,1);break;case"HH":e=De(3,2);break;case"m":e=De(4,1);break;case"mm":e=De(4,2);break;case"s":e=De(5,1);break;case"ss":e=De(5,2);break;case"S":e=De(6,1);break;case"SS":e=De(6,2);break;case"SSS":e=De(6,3);break;case"Z":case"ZZ":case"ZZZ":e=sd(0);break;case"ZZZZZ":e=sd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=sd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=sd(2);break;default:return null}return wm[t]=e,e}function Rb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function qx(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Yx(t,e,n){let i=t.getTimezoneOffset(),o=Rb(e,i);return qx(t,-1*(o-i))}function Kx(t){if(fb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return ld(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(jx))return Qx(r)}let e=new Date(t);if(!fb(e))throw new I(2302,!1);return e}function Qx(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function fb(t){return t instanceof Date&&!isNaN(t.valueOf())}var Zx=/^(\d+)?\.((\d+)(-(\d+))?)?$/,hb=22,ud=".",Oa="0",Jx=";",Xx=",",bm="#",pb="\xA4";function ek(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=In(n,ft.Infinity);else{let l=rk(t);s&&(l=nk(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let $=o.match(Zx);if($===null)throw new I(2306,!1);let oe=$[1],Z=$[3],Un=$[5];oe!=null&&(u=Dm(oe)),Z!=null&&(d=Dm(Z)),Un!=null?f=Dm(Un):Z!=null&&d>f&&(f=d)}ik(l,d,f);let h=l.digits,g=l.integerLen,y=l.exponent,v=[];for(c=h.every($=>!$);g<u;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?v=h.splice(g,h.length):(v=h,h=[0]);let C=[];for(h.length>=e.lgSize&&C.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)C.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&C.unshift(h.join("")),a=C.join(In(n,r)),v.length&&(a+=In(n,i)+v.join("")),y&&(a+=In(n,ft.Exponential)+"+"+y)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Nb(t,e,n,r,i){let o=Ib(e,Am.Currency),s=tk(o,In(e,ft.MinusSign));return s.minFrac=Sb(r),s.maxFrac=s.minFrac,ek(t,s,e,ft.CurrencyGroup,ft.CurrencyDecimal,i).replace(pb,n).replace(pb,"").trim()}function tk(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Jx),i=r[0],o=r[1],s=i.indexOf(ud)!==-1?i.split(ud):[i.substring(0,i.lastIndexOf(Oa)+1),i.substring(i.lastIndexOf(Oa)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(bm));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===Oa?n.minFrac=n.maxFrac=u+1:d===bm?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(Xx);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf(bm);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function nk(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function rk(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(ud))>-1&&(e=e.replace(ud,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Oa;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Oa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>hb&&(r=r.splice(0,hb-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function ik(t,e,n){if(e>n)throw new I(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,g){return f=f+d,g[h]=f<10?f:f-10,c&&(g[h]===0&&h>=l?g.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Dm(t){let e=parseInt(t);if(isNaN(e))throw new I(2305,!1);return e}var Mm=(()=>{class t{_viewContainer;_context=new dd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){gb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){gb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(R(jo),R(qu))};static \u0275dir=Oe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),dd=class{$implicit=null;ngIf=null};function gb(t,e){if(t&&!t.createEmbeddedView)throw new I(2020,!1)}function Rm(t,e){return new I(2100,!1)}var Tm=class{createSubscription(e,n,r){return ut(()=>e.subscribe({next:n,error:r}))}dispose(e){ut(()=>e.unsubscribe())}},Sm=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},ok=new Sm,sk=new Tm,er=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=m(tt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Qn(n))return ok;if(Ju(n))return sk;throw Rm(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(R(Pr,16))};static \u0275pipe=Ca({name:"async",type:t,pure:!1})}return t})();var ak="mediumDate",Pb=new D(""),Ob=new D(""),Nm=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??ak,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Ab(n,s,o||this.locale,a)}catch(s){throw Rm(t,s.message)}}static \u0275fac=function(r){return new(r||t)(R(Nr,16),R(Pb,24),R(Ob,24))};static \u0275pipe=Ca({name:"date",type:t,pure:!0})}return t})();var Mi=(()=>{class t{_locale;_defaultCurrencyCode;constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",o,s){if(!ck(n))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=Tb(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=lk(n);return Nb(c,s,a,r,o)}catch(c){throw Rm(t,c.message)}}static \u0275fac=function(r){return new(r||t)(R(Nr,16),R(mm,16))};static \u0275pipe=Ca({name:"currency",type:t,pure:!0})}return t})();function ck(t){return!(t==null||t===""||t!==t)}function lk(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new I(2309,!1);return t}var Ft=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=yn({type:t});static \u0275inj=$t({})}return t})();function xa(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ri=class{};function xb(t,e,n){return lm(t,e,n)}var kb="browser";var hd=new D(""),Fm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(A(hd),A(ee))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),ka=class{_doc;constructor(e){this._doc=e}manager},Pm="ng-app-id";function Fb(t){for(let e of t)e.remove()}function Lb(t,e){let n=e.createElement("style");return n.textContent=t,n}function dk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Pm}="${e}"],link[${Pm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Pm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function xm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Lm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,dk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Lb);r?.forEach(i=>this.addUsage(i,this.external,xm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Fb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Fb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Lb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,xm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(A(be),A(Vu),A(Uu,8),A(Sr))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),Om={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vm=/%COMP%/g;var jb="%COMP%",fk=`_nghost-${jb}`,hk=`_ngcontent-${jb}`,pk=!0,gk=new D("",{providedIn:"root",factory:()=>pk});function mk(t){return hk.replace(Vm,t)}function vk(t){return fk.replace(Vm,t)}function Ub(t,e){return e.map(n=>n.replace(Vm,t))}var jm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Fa(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof fd?i.applyToHost(n):i instanceof La&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case qn.Emulated:o=new fd(c,l,r,this.appId,u,s,a,d,f);break;case qn.ShadowDom:return new km(c,l,n,r,s,a,this.nonce,d,f);default:o=new La(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(A(Fm),A(Lm),A(Vu),A(gk),A(be),A(Sr),A(ee),A(Uu),A(Ia,8))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),Fa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Om[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Vb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Vb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new I(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Om[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Om[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(gn.DashCase|gn.Important)?e.style.setProperty(n,r,i&gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=xt().getGlobalEventTarget(this.doc,e),!e))throw new I(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Vb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var km=class extends Fa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Ub(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=xm(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Fa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Ub(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},fd=class extends La{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,l,u),this.contentAttr=mk(u),this.hostAttr=vk(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var pd=class t extends Ma{supportsDOMEvents=!0;static makeCurrent(){_m(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=yk();return n==null?null:_k(n)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xa(document.cookie,e)}},Va=null;function yk(){return Va=Va||document.head.querySelector("base"),Va?Va.getAttribute("href"):null}function _k(t){return new URL(t,document.baseURI).pathname}var Ek=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),$b=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(A(be))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),Bb=["alt","control","meta","shift"],Ck={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ik={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Hb=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Bb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Ck[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Bb.forEach(s=>{if(s!==i){let a=Ik[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(A(be))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function Um(t,e){let n=_({rootComponent:t},wk(e));return ib(n)}function wk(t){return{appProviders:[...Ak,...t?.providers??[]],platformProviders:Sk}}function bk(){pd.makeCurrent()}function Dk(){return new an}function Tk(){return Lg(document),document}var Sk=[{provide:Sr,useValue:kb},{provide:ju,useValue:bk,multi:!0},{provide:be,useFactory:Tk}];var Ak=[{provide:Ys,useValue:"root"},{provide:an,useFactory:Dk},{provide:hd,useClass:$b,multi:!0,deps:[be]},{provide:hd,useClass:Hb,multi:!0,deps:[be]},jm,Lm,Fm,{provide:bi,useExisting:jm},{provide:Ri,useClass:Ek},[]];var qo=class{},Ba=class{},Ni=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var md=class{encodeKey(e){return zb(e)}encodeValue(e){return zb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Mk(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Rk=/%(\d[a-f0-9])/gi,Nk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zb(t){return encodeURIComponent(t).replace(Rk,(e,n)=>Nk[n]??e)}function gd(t){return`${t}`}var kr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new md,e.fromString){if(e.fromObject)throw new I(2805,!1);this.map=Mk(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(gd):[gd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(gd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(gd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var vd=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Pk(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Wb(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Gb(t){return typeof Blob<"u"&&t instanceof Blob}function qb(t){return typeof FormData<"u"&&t instanceof FormData}function Ok(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Yb="Content-Type",Kb="Accept",Qb="X-Request-URL",Zb="text/plain",Jb="application/json",xk=`${Jb}, ${Zb}, */*`,ja=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(Pk(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new Ni,this.context??=new vd,!this.params)this.params=new kr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Wb(this.body)||Gb(this.body)||qb(this.body)||Ok(this.body)?this.body:this.body instanceof kr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qb(this.body)?null:Gb(this.body)?this.body.type||null:Wb(this.body)?null:typeof this.body=="string"?Zb:this.body instanceof kr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Jb:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.transferCache??this.transferCache,f=e.timeout??this.timeout,h=e.body!==void 0?e.body:this.body,g=e.withCredentials??this.withCredentials,y=e.reportProgress??this.reportProgress,v=e.headers||this.headers,C=e.params||this.params,$=e.context??this.context;return e.setHeaders!==void 0&&(v=Object.keys(e.setHeaders).reduce((oe,Z)=>oe.set(Z,e.setHeaders[Z]),v)),e.setParams&&(C=Object.keys(e.setParams).reduce((oe,Z)=>oe.set(Z,e.setParams[Z]),C)),new t(n,r,h,{params:C,headers:v,context:$,reportProgress:y,responseType:i,withCredentials:g,transferCache:d,keepalive:o,cache:a,priority:s,timeout:f,mode:c,redirect:l,credentials:u})}},Go=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Go||{}),Yo=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Ni,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},yd=class t extends Yo{constructor(e={}){super(e)}type=Go.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_d=class t extends Yo{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Go.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ua=class extends Yo{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},kk=200,Fk=204;function Bm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect}}var Lk=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ja)o=n;else{let c;i.headers instanceof Ni?c=i.headers:c=new Ni(i.headers);let l;i.params&&(i.params instanceof kr?l=i.params:l=new kr({fromObject:i.params})),o=new ja(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=S(o).pipe(hr(c=>this.handler.handle(c)));if(n instanceof ja||i.observe==="events")return s;let a=s.pipe(lt(c=>c instanceof _d));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new I(2806,!1);return c.body}));case"blob":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new I(2807,!1);return c.body}));case"text":return a.pipe(P(c=>{if(c.body!==null&&typeof c.body!="string")throw new I(2808,!1);return c.body}));case"json":default:return a.pipe(P(c=>c.body))}case"response":return a;default:throw new I(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new kr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Bm(i,r))}post(n,r,i={}){return this.request("POST",n,Bm(i,r))}put(n,r,i={}){return this.request("PUT",n,Bm(i,r))}static \u0275fac=function(r){return new(r||t)(A(qo))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();var Vk=new D("");function jk(t,e){return e(t)}function Uk(t,e,n){return(r,i)=>_e(n,()=>e(r,o=>t(o,i)))}var Xb=new D(""),Bk=new D(""),eD=new D("",{providedIn:"root",factory:()=>!0});var Ed=(()=>{class t extends qo{backend;injector;chain=null;pendingTasks=m(Dr);contributeToStability=m(eD);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Xb),...this.injector.get(Bk,[])]));this.chain=r.reduceRight((i,o)=>Uk(i,o,this.injector),jk)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ai(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(A(Ba),A(ge))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();var $k=/^\)\]\}',?\n/,Hk=RegExp(`^${Qb}:`,"m");function zk(t){return"responseURL"in t&&t.responseURL?t.responseURL:Hk.test(t.getAllResponseHeaders())?t.getResponseHeader(Qb):null}var $m=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new I(-2800,!1);let r=this.xhrFactory;return S(null).pipe(Re(()=>new N(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((v,C)=>s.setRequestHeader(v,C.join(","))),n.headers.has(Kb)||s.setRequestHeader(Kb,xk),!n.headers.has(Yb)){let v=n.detectContentTypeHeader();v!==null&&s.setRequestHeader(Yb,v)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let v=n.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=s.statusText||"OK",C=new Ni(s.getAllResponseHeaders()),$=zk(s)||n.url;return c=new yd({headers:C,status:s.status,statusText:v,url:$}),c},u=()=>{let{headers:v,status:C,statusText:$,url:oe}=l(),Z=null;C!==Fk&&(Z=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=Z?kk:0);let Un=C>=200&&C<300;if(n.responseType==="json"&&typeof Z=="string"){let ks=Z;Z=Z.replace($k,"");try{Z=Z!==""?JSON.parse(Z):null}catch(cl){Z=ks,Un&&(Un=!1,Z={error:cl,text:Z})}}Un?(o.next(new _d({body:Z,headers:v,status:C,statusText:$,url:oe||void 0})),o.complete()):o.error(new Ua({error:Z,headers:v,status:C,statusText:$,url:oe||void 0}))},d=v=>{let{url:C}=l(),$=new Ua({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});o.error($)},f=d;n.timeout&&(f=v=>{let{url:C}=l(),$=new Ua({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:C||void 0});o.error($)});let h=!1,g=v=>{h||(o.next(l()),h=!0);let C={type:Go.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(C.total=v.total),n.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),o.next(C)},y=v=>{let C={type:Go.UploadProgress,loaded:v.loaded};v.lengthComputable&&(C.total=v.total),o.next(C)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",f),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Go.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(A(Ri))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),tD=new D(""),Wk="XSRF-TOKEN",Gk=new D("",{providedIn:"root",factory:()=>Wk}),qk="X-XSRF-TOKEN",Yk=new D("",{providedIn:"root",factory:()=>qk}),$a=class{},Kk=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=xa(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(A(be),A(Gk))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function Qk(t,e){let n=t.url.toLowerCase();if(!m(tD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=m($a).getToken(),i=m(Yk);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function Hm(...t){let e=[Lk,$m,Ed,{provide:qo,useExisting:Ed},{provide:Ba,useFactory:()=>m(Vk,{optional:!0})??m($m)},{provide:Xb,useValue:Qk,multi:!0},{provide:tD,useValue:!0},{provide:$a,useClass:Kk}];for(let n of t)e.push(...n.\u0275providers);return St(e)}var nD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(A(be))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var U="primary",rc=Symbol("RouteTitle"),Ym=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xi(t){return new Ym(t)}function uD(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wn(t[n],e[n]))return!1;return!0}function wn(t,e){let n=t?Km(t):void 0,r=e?Km(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!dD(t[i],e[i]))return!1;return!0}function Km(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function dD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function fD(t){return t.length>0?t[t.length-1]:null}function rr(t){return Wh(t)?t:Qn(t)?de(Promise.resolve(t)):S(t)}var Xk={exact:pD,subset:gD},hD={exact:e1,subset:t1,ignored:()=>!0};function rD(t,e,n){return Xk[n.paths](t.root,e.root,n.matrixParams)&&hD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function e1(t,e){return wn(t,e)}function pD(t,e,n){if(!Pi(t.segments,e.segments)||!wd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!pD(t.children[r],e.children[r],n))return!1;return!0}function t1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dD(t[n],e[n]))}function gD(t,e,n){return mD(t,e,e.segments,n)}function mD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Pi(i,n)||e.hasChildren()||!wd(i,n,r))}else if(t.segments.length===n.length){if(!Pi(t.segments,n)||!wd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!gD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Pi(t.segments,i)||!wd(t.segments,i,r)||!t.children[U]?!1:mD(t.children[U],e,o,r)}}function wd(t,e,n){return e.every((r,i)=>hD[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new J([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){return i1.serialize(this)}},J=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bd(this)}},Fr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xi(this.parameters),this._parameterMap}toString(){return yD(this)}};function n1(t,e){return Pi(t,e)&&t.every((n,r)=>wn(n.parameters,e[r].parameters))}function Pi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function r1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===U&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==U&&(n=n.concat(e(i,r)))}),n}var ic=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>new ki,providedIn:"root"})}return t})(),ki=class{parse(e){let n=new Zm(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ha(e.root,!0)}`,r=a1(e.queryParams),i=typeof e.fragment=="string"?`#${o1(e.fragment)}`:"";return`${n}${r}${i}`}},i1=new ki;function bd(t){return t.segments.map(e=>yD(e)).join("/")}function Ha(t,e){if(!t.hasChildren())return bd(t);if(e){let n=t.children[U]?Ha(t.children[U],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==U&&r.push(`${i}:${Ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=r1(t,(r,i)=>i===U?[Ha(t.children[U],!1)]:[`${i}:${Ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[U]!=null?`${bd(t)}/${n[0]}`:`${bd(t)}/(${n.join("//")})`}}function vD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cd(t){return vD(t).replace(/%3B/gi,";")}function o1(t){return encodeURI(t)}function Qm(t){return vD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dd(t){return decodeURIComponent(t)}function iD(t){return Dd(t.replace(/\+/g,"%20"))}function yD(t){return`${Qm(t.path)}${s1(t.parameters)}`}function s1(t){return Object.entries(t).map(([e,n])=>`;${Qm(e)}=${Qm(n)}`).join("")}function a1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Cd(n)}=${Cd(i)}`).join("&"):`${Cd(n)}=${Cd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var c1=/^[^\/()?;#]+/;function zm(t){let e=t.match(c1);return e?e[0]:""}var l1=/^[^\/()?;=#]+/;function u1(t){let e=t.match(l1);return e?e[0]:""}var d1=/^[^=?&#]+/;function f1(t){let e=t.match(d1);return e?e[0]:""}var h1=/^[^&#]+/;function p1(t){let e=t.match(h1);return e?e[0]:""}var Zm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[U]=new J(e,n)),r}parseSegment(){let e=zm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new Fr(Dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=u1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=zm(this.remaining);i&&(r=i,this.capture(r))}e[Dd(n)]=Dd(r)}parseQueryParam(e){let n=f1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=p1(this.remaining);s&&(r=s,this.capture(r))}let i=iD(n),o=iD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new I(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=U);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[U]:new J([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}};function _D(t){return t.segments.length>0?new J([],{[U]:t}):t}function ED(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=ED(i);if(r===U&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new J(t.segments,e);return g1(n)}function g1(t){if(t.numberOfChildren===1&&t.children[U]){let e=t.children[U];return new J(t.segments.concat(e.segments),e.children)}return t}function Lr(t){return t instanceof Dn}function CD(t,e,n=null,r=null){let i=ID(t);return wD(i,e,n,r)}function ID(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new J(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=_D(r);return e??i}function wD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Wm(i,i,i,n,r);let o=m1(e);if(o.toRoot())return Wm(i,i,new J([],{}),n,r);let s=v1(o,i,t),a=s.processChildren?Wa(s.segmentGroup,s.index,o.commands):DD(s.segmentGroup,s.index,o.commands);return Wm(i,s.segmentGroup,a,n,r)}function Td(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ya(t){return typeof t=="object"&&t!=null&&t.outlets}function Wm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=bD(t,e,n);let a=_D(ED(s));return new Dn(a,o,i)}function bD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=bD(o,e,n)}),new J(t.segments,r)}var Sd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Td(r[0]))throw new I(4003,!1);let i=r.find(Ya);if(i&&i!==fD(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sd(n,e,r)}var Zo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function v1(t,e,n){if(t.isAbsolute)return new Zo(e,!0,0);if(!n)return new Zo(e,!1,NaN);if(n.parent===null)return new Zo(n,!0,0);let r=Td(t.commands[0])?0:1,i=n.segments.length-1+r;return y1(n,i,t.numberOfDoubleDots)}function y1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new I(4005,!1);i=r.segments.length}return new Zo(r,!1,i-o)}function _1(t){return Ya(t[0])?t[0].outlets:{[U]:t}}function DD(t,e,n){if(t??=new J([],{}),t.segments.length===0&&t.hasChildren())return Wa(t,e,n);let r=E1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new J(t.segments.slice(0,r.pathIndex),{});return o.children[U]=new J(t.segments.slice(r.pathIndex),t.children),Wa(o,0,i)}else return r.match&&i.length===0?new J(t.segments,{}):r.match&&!t.hasChildren()?Jm(t,e,n):r.match?Wa(t,0,i):Jm(t,e,n)}function Wa(t,e,n){if(n.length===0)return new J(t.segments,{});{let r=_1(n),i={};if(Object.keys(r).some(o=>o!==U)&&t.children[U]&&t.numberOfChildren===1&&t.children[U].segments.length===0){let o=Wa(t.children[U],e,n);return new J(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=DD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new J(t.segments,i)}}function E1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ya(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!sD(c,l,s))return o;r+=2}else{if(!sD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ya(o)){let c=C1(o.outlets);return new J(r,c)}if(i===0&&Td(n[0])){let c=t.segments[e];r.push(new Fr(c.path,oD(n[0]))),i++;continue}let s=Ya(o)?o.outlets[U]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Td(a)?(r.push(new Fr(s,oD(a))),i+=2):(r.push(new Fr(s,{})),i++)}return new J(r,{})}function C1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Jm(new J([],{}),0,r))}),e}function oD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sD(t,e,n){return t==n.path&&wn(e,n.parameters)}var Ga="imperative",Fe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Fe||{}),Dt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Fi=class extends Dt{type=Fe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tn=class extends Dt{urlAfterRedirects;type=Fe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},it=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(it||{}),Ka=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ka||{}),bn=class extends Dt{reason;code;type=Fe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},tr=class extends Dt{reason;code;type=Fe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Xo=class extends Dt{error;target;type=Fe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qa=class extends Dt{urlAfterRedirects;state;type=Fe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class extends Dt{urlAfterRedirects;state;type=Fe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Md=class extends Dt{urlAfterRedirects;state;shouldActivate;type=Fe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rd=class extends Dt{urlAfterRedirects;state;type=Fe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nd=class extends Dt{urlAfterRedirects;state;type=Fe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class{route;type=Fe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Od=class{route;type=Fe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xd=class{snapshot;type=Fe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kd=class{snapshot;type=Fe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{snapshot;type=Fe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ld=class{snapshot;type=Fe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Za=class{},es=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function I1(t){return!(t instanceof Za)&&!(t instanceof es)}function w1(t,e){return t.providers&&!t._injector&&(t._injector=Ea(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Kt(t){return t.outlet||U}function b1(t,e){let n=t.filter(r=>Kt(r)===e);return n.push(...t.filter(r=>Kt(r)!==e)),n}function rs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Vd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return rs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new is(this.rootInjector)}},is=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(A(ge))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Xm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Xm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ev(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ev(e,this._root).map(n=>n.value)}};function Xm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Xm(t,n);if(r)return r}return null}function ev(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ev(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ja=class extends jd{snapshot;constructor(e,n){super(e),this.snapshot=n,cv(this,e)}toString(){return this.snapshot.toString()}};function TD(t){let e=D1(t),n=new Ve([new Fr("",{})]),r=new Ve({}),i=new Ve({}),o=new Ve({}),s=new Ve(""),a=new nr(n,r,o,s,i,U,t,e.root);return a.snapshot=e.root,new Ja(new bt(a,[]),e)}function D1(t){let e={},n={},r={},i="",o=new Oi([],e,r,i,n,U,t,null,{});return new Xa("",new bt(o,[]))}var nr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(l=>l[rc]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(e=>xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(e=>xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ud(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&AD(i)&&(r.resolve[rc]=i.title),r}var Oi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rc]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xa=class extends jd{url;constructor(e,n){super(n),this.url=e,cv(this,n)}toString(){return SD(this._root)}};function cv(t,e){e.value._routerState=t,e.children.forEach(n=>cv(t,n))}function SD(t){let e=t.children.length>0?` { ${t.children.map(SD).join(", ")} } `:"";return`${t.value}${e}`}function Gm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wn(e.params,n.params)||t.paramsSubject.next(n.params),Jk(e.url,n.url)||t.urlSubject.next(n.url),wn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tv(t,e){let n=wn(t.params,e.params)&&n1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||tv(t.parent,e.parent))}function AD(t){return typeof t.title=="string"||t.title===null}var MD=new D(""),oc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=U;activateEvents=new he;deactivateEvents=new he;attachEvents=new he;detachEvents=new he;routerOutletData=nb(void 0);parentContexts=m(is);location=m(jo);changeDetector=m(Pr);inputBinder=m(zd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Oe({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yn]})}return t})(),nv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===nr?this.route:e===is?this.childContexts:e===MD?this.outletData:this.parent.get(e,n)}},zd=new D("");var lv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=wt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ke(0,"router-outlet")},dependencies:[oc],encapsulation:2})}return t})();function uv(t){let e=t.children&&t.children.map(uv),n=e?F(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==U&&(n.component=lv),n}function T1(t,e,n){let r=ec(t,e._root,n?n._root:void 0);return new Ja(r,e)}function ec(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=S1(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ec(t,a)),s}}let r=A1(e.value),i=e.children.map(o=>ec(t,o));return new bt(r,i)}}function S1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ec(t,r,i);return ec(t,r)})}function A1(t){return new nr(new Ve(t.url),new Ve(t.params),new Ve(t.queryParams),new Ve(t.fragment),new Ve(t.data),t.outlet,t.component,t)}var ts=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},RD="ngNavigationCancelingError";function Bd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Lr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ND(!1,it.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ND(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[RD]=!0,n.cancellationCode=e,n}function M1(t){return PD(t)&&Lr(t.url)}function PD(t){return!!t&&t[RD]}var R1=(t,e,n,r)=>P(i=>(new rv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),rv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Qo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Qo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ld(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Gm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$d=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Jo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function N1(t,e,n){let r=t._root,i=e?e._root:null;return za(r,i,n,[r.value])}function P1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function os(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!dp(t)?t:e.get(t):r}function za(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qo(e);return t.children.forEach(s=>{O1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qa(a,n.getContext(s),i)),i}function O1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=x1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?za(t,e,a?a.children:null,r,i):za(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jo(a.outlet.component,s))}else s&&qa(e,a,i),i.canActivateChecks.push(new $d(r)),o.component?za(t,null,a?a.children:null,r,i):za(t,null,n,r,i);return i}function x1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Pi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(t.url,e.url)||!wn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tv(t,e)||!wn(t.queryParams,e.queryParams);case"paramsChange":default:return!tv(t,e)}}function qa(t,e,n){let r=Qo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?qa(s,e.children.getContext(o),n):qa(s,null,n):qa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Jo(e.outlet.component,i)):n.canDeactivateChecks.push(new Jo(null,i)):n.canDeactivateChecks.push(new Jo(null,i))}function sc(t){return typeof t=="function"}function k1(t){return typeof t=="boolean"}function F1(t){return t&&sc(t.canLoad)}function L1(t){return t&&sc(t.canActivate)}function V1(t){return t&&sc(t.canActivateChild)}function j1(t){return t&&sc(t.canDeactivate)}function U1(t){return t&&sc(t.canMatch)}function OD(t){return t instanceof Bn||t?.name==="EmptyError"}var Id=Symbol("INITIAL_VALUE");function ns(){return Re(t=>Hl(t.map(e=>e.pipe(Ut(1),Kh(Id)))).pipe(P(e=>{for(let n of e)if(n!==!0){if(n===Id)return Id;if(n===!1||B1(n))return n}return!0}),lt(e=>e!==Id),Ut(1)))}function B1(t){return Lr(t)||t instanceof ts}function $1(t,e){return Se(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?S(F(_({},n),{guardsResult:!0})):H1(s,r,i,t).pipe(Se(a=>a&&k1(a)?z1(r,o,t,e):S(a)),P(a=>F(_({},n),{guardsResult:a})))})}function H1(t,e,n,r){return de(t).pipe(Se(i=>K1(i.component,i.route,n,e,r)),Bt(i=>i!==!0,!0))}function z1(t,e,n,r){return de(e).pipe(hr(i=>wo(G1(i.route.parent,r),W1(i.route,r),Y1(t,i.path,n),q1(t,i.route,n))),Bt(i=>i!==!0,!0))}function W1(t,e){return t!==null&&e&&e(new Fd(t)),S(!0)}function G1(t,e){return t!==null&&e&&e(new xd(t)),S(!0)}function q1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(o=>Us(()=>{let s=rs(e)??n,a=os(o,s),c=L1(a)?a.canActivate(e,t):_e(s,()=>a(e,t));return rr(c).pipe(Bt())}));return S(i).pipe(ns())}function Y1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>P1(s)).filter(s=>s!==null).map(s=>Us(()=>{let a=s.guards.map(c=>{let l=rs(s.node)??n,u=os(c,l),d=V1(u)?u.canActivateChild(r,t):_e(l,()=>u(r,t));return rr(d).pipe(Bt())});return S(a).pipe(ns())}));return S(o).pipe(ns())}function K1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return S(!0);let s=o.map(a=>{let c=rs(e)??i,l=os(a,c),u=j1(l)?l.canDeactivate(t,e,n,r):_e(c,()=>l(t,e,n,r));return rr(u).pipe(Bt())});return S(s).pipe(ns())}function Q1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let o=i.map(s=>{let a=os(s,t),c=F1(a)?a.canLoad(e,n):_e(t,()=>a(e,n));return rr(c)});return S(o).pipe(ns(),xD(r))}function xD(t){return Lh(Ne(e=>{if(typeof e!="boolean")throw Bd(t,e)}),P(e=>e===!0))}function Z1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let o=i.map(s=>{let a=os(s,t),c=U1(a)?a.canMatch(e,n):_e(t,()=>a(e,n));return rr(c)});return S(o).pipe(ns(),xD(r))}var tc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},nc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ko(t){return Io(new tc(t))}function J1(t){return Io(new I(4e3,!1))}function X1(t){return Io(ND(!1,it.GuardRejected))}var iv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[U])return J1(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,n,r,i,o){return eF(n,i,o).pipe(P(s=>{if(s instanceof Dn)throw new nc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new nc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new J(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new I(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function eF(t,e,n){if(typeof t=="string")return S(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=e;return rr(_e(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var ov={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tF(t,e,n,r,i){let o=kD(t,e,n);return o.matched?(r=w1(e,r),Z1(r,e,n,i).pipe(P(s=>s===!0?o:_({},ov)))):S(o)}function kD(t,e,n){if(e.path==="**")return nF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},ov):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||uD)(n,t,e);if(!i)return _({},ov);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nF(t){return{matched:!0,parameters:t.length>0?fD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function aD(t,e,n,r){return n.length>0&&oF(t,n,r)?{segmentGroup:new J(e,iF(r,new J(n,t.children))),slicedSegments:[]}:n.length===0&&sF(t,n,r)?{segmentGroup:new J(t.segments,rF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new J(t.segments,t.children),slicedSegments:n}}function rF(t,e,n,r){let i={};for(let o of n)if(Wd(t,e,o)&&!r[Kt(o)]){let s=new J([],{});i[Kt(o)]=s}return _(_({},r),i)}function iF(t,e){let n={};n[U]=e;for(let r of t)if(r.path===""&&Kt(r)!==U){let i=new J([],{});n[Kt(r)]=i}return n}function oF(t,e,n){return n.some(r=>Wd(t,e,r)&&Kt(r)!==U)}function sF(t,e,n){return n.some(r=>Wd(t,e,r))}function Wd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function aF(t,e,n){return e.length===0&&!t.children[n]}var sv=class{};function cF(t,e,n,r,i,o,s="emptyOnly"){return new av(t,e,n,r,i,s,o).recognize()}var lF=31,av=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new iv(this.urlSerializer,this.urlTree)}noMatchError(e){return new I(4002,`'${e.segmentGroup}'`)}recognize(){let e=aD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(P(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),o=new Xa("",i),s=CD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Oi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,n).pipe(P(r=>({children:r,rootSnapshot:n})),fr(r=>{if(r instanceof nc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(P(s=>s instanceof bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return de(o).pipe(hr(s=>{let a=r.children[s],c=b1(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Yh((s,a)=>(s.push(...a),s)),pr(null),qh(),Se(s=>{if(s===null)return Ko(r);let a=FD(s);return uF(a),S(a)}))}processSegment(e,n,r,i,o,s,a){return de(n).pipe(hr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(fr(l=>{if(l instanceof tc)return S(null);throw l}))),Bt(c=>!!c),fr(c=>{if(OD(c))return aF(r,i,o)?S(new sv):Ko(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Kt(r)!==s&&(s===U||!Wd(i,o,r))?Ko(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Ko(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=kD(n,i,o);if(!c)return Ko(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lF&&(this.allowRedirects=!1));let h=new Oi(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,cD(i),Kt(i),i.component??i._loadedComponent??null,i,lD(i)),g=Ud(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(g.params),h.data=Object.freeze(g.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e).pipe(Re(v=>this.applyRedirects.lineralizeSegments(i,v)),Se(v=>this.processSegment(e,r,n,v.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=tF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Re(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Re(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new Oi(f,d,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,cD(r),Kt(r),r.component??r._loadedComponent??null,r,lD(r)),y=Ud(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let{segmentGroup:v,slicedSegments:C}=aD(n,f,h,l);if(C.length===0&&v.hasChildren())return this.processChildren(u,l,v,g).pipe(P(oe=>new bt(g,oe)));if(l.length===0&&C.length===0)return S(new bt(g,[]));let $=Kt(r)===o;return this.processSegment(u,l,v,C,$?U:o,!0,g).pipe(P(oe=>new bt(g,oe instanceof bt?[oe]:[])))}))):Ko(n)))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):Q1(e,n,r,this.urlSerializer).pipe(Se(i=>i?this.configLoader.loadChildren(e,n).pipe(Ne(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):X1(n))):S({routes:[],injector:e})}};function uF(t){t.sort((e,n)=>e.value.outlet===U?-1:n.value.outlet===U?1:e.value.outlet.localeCompare(n.value.outlet))}function dF(t){let e=t.value.routeConfig;return e&&e.path===""}function FD(t){let e=[],n=new Set;for(let r of t){if(!dF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=FD(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function cD(t){return t.data||{}}function lD(t){return t.resolve||{}}function fF(t,e,n,r,i,o){return Se(s=>cF(t,e,n,r,s.extractedUrl,i,o).pipe(P(({state:a,tree:c})=>F(_({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function hF(t,e){return Se(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of LD(c))s.add(l);let a=0;return de(s).pipe(hr(c=>o.has(c)?pF(c,r,t,e):(c.data=Ud(c,c.parent,t).resolve,S(void 0))),Ne(()=>a++),bo(1),Se(c=>a===s.size?S(n):at))})}function LD(t){let e=t.children.map(n=>LD(n)).flat();return[t,...e]}function pF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!AD(i)&&(o[rc]=i.title),Us(()=>(t.data=Ud(t,t.parent,n).resolve,gF(o,t,e,r).pipe(P(s=>(t._resolvedData=s,t.data=_(_({},t.data),s),null)))))}function gF(t,e,n,r){let i=Km(t);if(i.length===0)return S({});let o={};return de(i).pipe(Se(s=>mF(t[s],e,n,r).pipe(Bt(),Ne(a=>{if(a instanceof ts)throw Bd(new ki,a);o[s]=a}))),bo(1),P(()=>o),fr(s=>OD(s)?at:Io(s)))}function mF(t,e,n,r){let i=rs(e)??r,o=os(t,i),s=o.resolve?o.resolve(e,n):_e(i,()=>o(e,n));return rr(s)}function qm(t){return Re(e=>{let n=t(e);return n?de(n).pipe(P(()=>e)):S(e)})}var dv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===U);return r}getResolvedTitleForRoute(n){return n.data[rc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(VD),providedIn:"root"})}return t})(),VD=(()=>{class t extends dv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(A(nD))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ss=new D("",{providedIn:"root",factory:()=>({})}),ac=new D(""),jD=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=m(gm);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=rr(_e(n,()=>r.loadComponent())).pipe(P(BD),Ne(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ai(()=>{this.componentLoaders.delete(r)})),o=new yo(i,()=>new Ce).pipe(vo());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return S({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=UD(r,this.compiler,n,this.onLoadEndListener).pipe(ai(()=>{this.childrenLoaders.delete(r)})),s=new yo(o,()=>new Ce).pipe(vo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UD(t,e,n,r){return rr(_e(n,()=>t.loadChildren())).pipe(P(BD),Se(i=>i instanceof Qu||Array.isArray(i)?S(i):de(e.compileModuleAsync(i))),P(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ac,[],{optional:!0,self:!0}).flat()),{routes:s.map(uv),injector:o}}))}function vF(t){return t&&typeof t=="object"&&"default"in t}function BD(t){return vF(t)?t.default:t}var Gd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(yF),providedIn:"root"})}return t})(),yF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$D=new D("");var HD=new D(""),zD=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ce;transitionAbortWithErrorSubject=new Ce;configLoader=m(jD);environmentInjector=m(ge);destroyRef=m(Gn);urlSerializer=m(ic);rootContexts=m(is);location=m(zo);inputBindingEnabled=m(zd,{optional:!0})!==null;titleStrategy=m(dv);options=m(ss,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=m(Gd);createViewTransition=m($D,{optional:!0});navigationErrorHandler=m(HD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>S(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Pd(i)),r=i=>this.events.next(new Od(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(F(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new Ve(null),this.transitions.pipe(lt(r=>r!==null),Re(r=>{let i=!1;return S(r).pipe(Re(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",it.SupersededByNewNavigation),at;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?F(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new tr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Ka.IgnoredSameUrlNavigation)),o.resolve(!1),at}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return S(o).pipe(Re(c=>(this.events.next(new Fi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?at:Promise.resolve(c))),fF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=F(_({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Qa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:f}=o,h=new Fi(c,this.urlSerializer.serialize(l),u,d);this.events.next(h);let g=TD(this.rootComponentType).snapshot;return this.currentTransition=r=F(_({},o),{targetSnapshot:g,urlAfterRedirects:l,extras:F(_({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,S(r)}else{let c="";return this.events.next(new tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Ka.IgnoredByUrlHandlingStrategy)),o.resolve(!1),at}}),Ne(o=>{let s=new Ad(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),P(o=>(this.currentTransition=r=F(_({},o),{guards:N1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),$1(this.environmentInjector,o=>this.events.next(o)),Ne(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Bd(this.urlSerializer,o.guardsResult);let s=new Md(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),lt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",it.GuardRejected),!1)),qm(o=>{if(o.guards.canActivateChecks.length!==0)return S(o).pipe(Ne(s=>{let a=new Rd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Re(s=>{let a=!1;return S(s).pipe(hF(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",it.NoDataFromResolver)}}))}),Ne(s=>{let a=new Nd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),qm(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=rs(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ne(u=>{a.component=u}),P(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return Hl(s(o.targetSnapshot.root)).pipe(pr(null),Ut(1))}),qm(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?de(a).pipe(P(()=>r)):S(r)}),P(o=>{let s=T1(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=F(_({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ne(()=>{this.events.next(new Za)}),R1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ut(1),Wl(new N(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(lt(()=>!i&&!r.targetRouterState),Ne(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",it.Aborted)}))),Ne({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Wl(this.transitionAbortWithErrorSubject.pipe(Ne(o=>{throw o}))),ai(()=>{i||this.cancelNavigationTransition(r,"",it.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),fr(o=>{if(this.destroyed)return r.resolve(!1),at;if(i=!0,PD(o))this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),M1(o)?this.events.next(new es(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Xo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=_e(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ts){let{message:c,cancellationCode:l}=Bd(this.urlSerializer,a);this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new es(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return at}))}))}cancelNavigationTransition(n,r,i){let o=new bn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _F(t){return t!==Ga}var WD=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(EF),providedIn:"root"})}return t})(),Hd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},EF=(()=>{class t extends Hd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Si(t)))(i||t)}})();static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),GD=(()=>{class t{urlSerializer=m(ic);options=m(ss,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=m(zo);urlHandlingStrategy=m(Gd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=TD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:()=>m(CF),providedIn:"root"})}return t})(),CF=(()=>{class t extends GD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Fi?this.updateStateMemento():n instanceof tr?this.commitTransition(r):n instanceof Qa?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof bn&&n.code!==it.SupersededByNewNavigation&&n.code!==it.Redirect?this.restoreHistory(r):n instanceof Xo?this.restoreHistory(r,!0):n instanceof Tn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Si(t)))(i||t)}})();static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fv(t,e){t.events.pipe(lt(n=>n instanceof Tn||n instanceof bn||n instanceof Xo||n instanceof tr),P(n=>n instanceof Tn||n instanceof tr?0:(n instanceof bn?n.code===it.Redirect||n.code===it.SupersededByNewNavigation:!1)?2:1),lt(n=>n!==2),Ut(1)).subscribe(()=>{e()})}var IF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Li=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=m(om);stateManager=m(GD);options=m(ss,{optional:!0})||{};pendingTasks=m(hn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=m(zD);urlSerializer=m(ic);location=m(zo);urlHandlingStrategy=m(Gd);injector=m(ge);_events=new Ce;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=m(WD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=m(ac,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!m(zd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new pe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof bn&&r.code!==it.Redirect&&r.code!==it.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tn)this.navigated=!0;else if(r instanceof es){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_F(i.source)},s);this.scheduleNavigation(a,Ga,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}I1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(tt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(uv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=ID(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return wD(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Lr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ga,null,r)}navigate(n,r={skipLocationChange:!1}){return bF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},IF):r===!1?i=_({},wF):i=r,Lr(n))return rD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return rD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return fv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new I(4008,!1)}var Sn=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=fn(null);get href(){return ut(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ce;applicationErrorHandler=m(tt);options=m(ss,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(m(new rd("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Tn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Lr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Lr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(R(Li),R(nr),va("tabindex"),R(Ar),R(Kn),R(Ho))};static \u0275dir=Oe({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Uo("href",i.reactiveHref(),Ug)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Or],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Or],replaceUrl:[2,"replaceUrl","replaceUrl",Or],routerLink:"routerLink"},features:[Yn]})}return t})();var TF=new D("");function hv(t,...e){return St([{provide:ac,multi:!0,useValue:t},[],{provide:nr,useFactory:SF,deps:[Li]},{provide:Xu,multi:!0,useFactory:AF},e.map(n=>n.\u0275providers)])}function SF(t){return t.routerState.root}function AF(){let t=m(we);return e=>{let n=t.get(Rr);if(e!==n.components[0])return;let r=t.get(Li),i=t.get(MF);t.get(RF)===1&&r.initialNavigation(),t.get(NF,null,{optional:!0})?.setUpPreloading(),t.get(TF,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var MF=new D("",{factory:()=>new Ce}),RF=new D("",{providedIn:"root",factory:()=>1});var NF=new D("");var qD=()=>{};var gv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var E=function(t,e){if(!t)throw Vi(e)},Vi=function(t){return new Error("Firebase Database ("+gv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var QD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new mv;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let g=l<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},yv=function(t){let e=QD(t);return ls.encodeByteArray(e,!0)},lc=function(t){return yv(t).replace(/\./g,"")},as=function(t){try{return ls.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZD(t){return JD(void 0,t)}function JD(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!xF(n)||(t[n]=JD(t[n],e[n]));return t}function xF(t){return t!=="__proto__"}function XD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kF=()=>XD().__FIREBASE_DEFAULTS__,FF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&as(t[1]);return e&&JSON.parse(e)},_v=()=>{try{return qD()||kF()||FF()||LF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ev=t=>{var e,n;return(n=(e=_v())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},e0=t=>{let e=Ev(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cv=()=>{var t;return(t=_v())===null||t===void 0?void 0:t.config},Iv=t=>{var e;return(e=_v())===null||e===void 0?void 0:e[`_${t}`]};var Qt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yd(t){return p(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function t0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lc(JSON.stringify(n)),lc(JSON.stringify(s)),""].join(".")}var cc={};function VF(){let t={prod:[],emulator:[]};for(let e of Object.keys(cc))cc[e]?t.emulator.push(e):t.prod.push(e);return t}function jF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var YD=!1;function Kd(t,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||cc[t]===e||cc[t]||YD)return;cc[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=VF().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{YD=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=jF(r),h=n("text"),g=document.getElementById(h)||document.createElement("span"),y=n("learnmore"),v=document.getElementById(y)||document.createElement("a"),C=n("preprendIcon"),$=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let oe=f.element;a(oe),u(v,y);let Z=l();c($,C),oe.append($,g,v,Z),document.body.appendChild(oe)}o?(g.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function n0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i0(){let t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function An(){return gv.NODE_CLIENT===!0||gv.NODE_ADMIN===!0}function Zd(){try{return typeof indexedDB=="object"}catch{return!1}}function o0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var UF="FirebaseError",Zt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}},Jt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?BF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zt(i,a,r)}};function BF(t,e){return t.replace($F,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $F=/\{\$([^}]+)}/g;function cs(t){return JSON.parse(t)}function Te(t){return JSON.stringify(t)}var s0=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=cs(as(o[0])||""),n=cs(as(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var a0=function(t){let e=s0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},c0=function(t){let e=s0(t).claims;return typeof e=="object"&&e.admin===!0};function Mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ji(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function dc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Rn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(KD(o)&&KD(s)){if(!Rn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function KD(t){return t!==null&&typeof t=="object"}function Ui(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function us(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ds(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var qd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function l0(t,e){let n=new vv(t,e);return n.subscribe.bind(n)}var vv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pv),i.error===void 0&&(i.error=pv),i.complete===void 0&&(i.complete=pv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pv(){}function Jd(t,e){return`${t} failed: ${e} argument `}var u0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,E(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Pee=4*60*60*1e3;function Ae(t){return t&&t._delegate?t._delegate:t}var ot=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bi="[DEFAULT]";var Xd=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Qt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WF(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zF(t){return t===Bi?void 0:t}function WF(t){return t.instantiationMode==="EAGER"}var pc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Xd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var GF=[],te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(te||{}),qF={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},YF=te.INFO,KF={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},QF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=KF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Nn=class{constructor(e){this.name=e,this._logLevel=YF,this._logHandler=QF,this._userLogHandler=null,GF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var ZF=(t,e)=>e.some(n=>t instanceof n),d0,f0;function JF(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XF(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var h0=new WeakMap,bv=new WeakMap,p0=new WeakMap,wv=new WeakMap,Tv=new WeakMap;function eL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Pn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&h0.set(n,t)}).catch(()=>{}),Tv.set(e,t),e}function tL(t){if(bv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});bv.set(t,e)}var Dv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g0(t){Dv=t(Dv)}function nL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ef(this),e,...n);return p0.set(r,e.sort?e.sort():[e]),Pn(r)}:XF().includes(t)?function(...e){return t.apply(ef(this),e),Pn(h0.get(this))}:function(...e){return Pn(t.apply(ef(this),e))}}function rL(t){return typeof t=="function"?nL(t):(t instanceof IDBTransaction&&tL(t),ZF(t,JF())?new Proxy(t,Dv):t)}function Pn(t){if(t instanceof IDBRequest)return eL(t);if(wv.has(t))return wv.get(t);let e=rL(t);return e!==t&&(wv.set(t,e),Tv.set(e,t)),e}var ef=t=>Tv.get(t);function v0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Pn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Pn(s.result),c.oldVersion,c.newVersion,Pn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var iL=["get","getKey","getAll","getAllKeys","count"],oL=["put","add","delete","clear"],Sv=new Map;function m0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sv.get(e))return Sv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=oL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||iL.includes(n)))return;let o=function(s,...a){return p(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Sv.set(e,o),o}g0(t=>F(_({},t),{get:(e,n,r)=>m0(e,n)||t.get(e,n,r),has:(e,n)=>!!m0(e,n)||t.has(e,n)}));var Mv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function sL(t){let e=t.getComponent();return e?.type==="VERSION"}var Rv="@firebase/app",y0="0.13.2";var ir=new Nn("@firebase/app"),aL="@firebase/app-compat",cL="@firebase/analytics-compat",lL="@firebase/analytics",uL="@firebase/app-check-compat",dL="@firebase/app-check",fL="@firebase/auth",hL="@firebase/auth-compat",pL="@firebase/database",gL="@firebase/data-connect",mL="@firebase/database-compat",vL="@firebase/functions",yL="@firebase/functions-compat",_L="@firebase/installations",EL="@firebase/installations-compat",CL="@firebase/messaging",IL="@firebase/messaging-compat",wL="@firebase/performance",bL="@firebase/performance-compat",DL="@firebase/remote-config",TL="@firebase/remote-config-compat",SL="@firebase/storage",AL="@firebase/storage-compat",ML="@firebase/firestore",RL="@firebase/ai",NL="@firebase/firestore-compat",PL="firebase",OL="11.10.0";var Nv="[DEFAULT]",xL={[Rv]:"fire-core",[aL]:"fire-core-compat",[lL]:"fire-analytics",[cL]:"fire-analytics-compat",[dL]:"fire-app-check",[uL]:"fire-app-check-compat",[fL]:"fire-auth",[hL]:"fire-auth-compat",[pL]:"fire-rtdb",[gL]:"fire-data-connect",[mL]:"fire-rtdb-compat",[vL]:"fire-fn",[yL]:"fire-fn-compat",[_L]:"fire-iid",[EL]:"fire-iid-compat",[CL]:"fire-fcm",[IL]:"fire-fcm-compat",[wL]:"fire-perf",[bL]:"fire-perf-compat",[DL]:"fire-rc",[TL]:"fire-rc-compat",[SL]:"fire-gcs",[AL]:"fire-gcs-compat",[ML]:"fire-fst",[NL]:"fire-fst-compat",[RL]:"fire-vertex","fire-js":"fire-js",[PL]:"fire-js-all"};var gc=new Map,kL=new Map,Pv=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xt(t){let e=t.name;if(Pv.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Pv.set(e,t);for(let n of gc.values())_0(n,t);for(let n of kL.values())_0(n,t);return!0}function fs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ht(t){return t==null?!1:t.settings!==void 0}var FL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new Jt("app","Firebase",FL);var Ov=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var Ur=OL;function Fv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Nv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=Cv()),!n)throw jr.create("no-options");let o=gc.get(i);if(o){if(Rn(n,o.options)&&Rn(r,o.config))return o;throw jr.create("duplicate-app",{appName:i})}let s=new pc(i);for(let c of Pv.values())s.addComponent(c);let a=new Ov(n,r,s);return gc.set(i,a),a}function $i(t=Nv){let e=gc.get(t);if(!e&&t===Nv&&Cv())return Fv();if(!e)throw jr.create("no-app",{appName:t});return e}function tf(){return Array.from(gc.values())}function ve(t,e,n){var r;let i=(r=xL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(a.join(" "));return}Xt(new ot(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var LL="firebase-heartbeat-database",VL=1,mc="firebase-heartbeat-store",Av=null;function w0(){return Av||(Av=v0(LL,VL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mc)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Av}function jL(t){return p(this,null,function*(){try{let n=(yield w0()).transaction(mc),r=yield n.objectStore(mc).get(b0(t));return yield n.done,r}catch(e){if(e instanceof Zt)ir.warn(e.message);else{let n=jr.create("idb-get",{originalErrorMessage:e?.message});ir.warn(n.message)}}})}function E0(t,e){return p(this,null,function*(){try{let r=(yield w0()).transaction(mc,"readwrite");yield r.objectStore(mc).put(e,b0(t)),yield r.done}catch(n){if(n instanceof Zt)ir.warn(n.message);else{let r=jr.create("idb-set",{originalErrorMessage:n?.message});ir.warn(r.message)}}})}function b0(t){return`${t.name}!${t.options.appId}`}var UL=1024,BL=30,xv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new kv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=C0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>BL){let s=HL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ir.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=C0(),{heartbeatsToSend:r,unsentEntries:i}=$L(this._heartbeatsCache.heartbeats),o=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ir.warn(n),""}})}};function C0(){return new Date().toISOString().substring(0,10)}function $L(t,e=UL){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),I0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),I0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Zd()?o0().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield jL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return E0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return E0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function I0(t){return lc(JSON.stringify({version:2,heartbeats:t})).length}function HL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function zL(t){Xt(new ot("platform-logger",e=>new Mv(e),"PRIVATE")),Xt(new ot("heartbeat",e=>new xv(e),"PRIVATE")),ve(Rv,y0,t),ve(Rv,y0,"esm2017"),ve("fire-js","")}zL("");var D0="@firebase/database",T0="1.0.20";var Ly="";function WL(t){Ly=t}var zv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Te(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Wv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var oT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zv(e)}}catch{}return new Wv},zi=oT("localStorage"),Gv=oT("sessionStorage");var gs=new Nn("@firebase/database"),GL=function(){let t=1;return function(){return t++}}(),sT=function(t){let e=u0(t),n=new qd;n.update(e);let r=n.digest();return ls.encodeByteArray(r)},xc=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=xc.apply(null,r):typeof r=="object"?e+=Te(r):e+=r,e+=" "}return e},Gi=null,S0=!0,qL=function(t,e){E(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(gs.logLevel=te.VERBOSE,Gi=gs.log.bind(gs),e&&Gv.set("logging_enabled",!0)):typeof t=="function"?Gi=t:(Gi=null,Gv.remove("logging_enabled"))},Je=function(...t){if(S0===!0&&(S0=!1,Gi===null&&Gv.get("logging_enabled")===!0&&qL(!0)),Gi){let e=xc.apply(null,t);Gi(e)}},kc=function(t){return function(...e){Je(t,...e)}},qv=function(...t){let e="FIREBASE INTERNAL ERROR: "+xc(...t);gs.error(e)},or=function(...t){let e=`FIREBASE FATAL ERROR: ${xc(...t)}`;throw gs.error(e),new Error(e)},pt=function(...t){let e="FIREBASE WARNING: "+xc(...t);gs.warn(e)},YL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},aT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},KL=function(t){if(An()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vs="[MIN_NAME]",qi="[MAX_NAME]",bs=function(t,e){if(t===e)return 0;if(t===vs||e===qi)return-1;if(e===vs||t===qi)return 1;{let n=A0(t),r=A0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},QL=function(t,e){return t===e?0:t<e?-1:1},vc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Te(e))},Vy=function(t){if(typeof t!="object"||t===null)return Te(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Te(e[r]),n+=":",n+=Vy(t[e[r]]);return n+="}",n},cT=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function gt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var lT=function(t){E(!aT(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},ZL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function XL(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var eV=new RegExp("^-?(0*)\\d{1,10}$"),tV=-2147483648,nV=2147483647,A0=function(t){if(eV.test(t)){let e=Number(t);if(e>=tV&&e<=nV)return e}return null},Ds=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw pt("Exception was thrown by user callback.",n),e},Math.floor(0))}},rV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ic=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Yv=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ht(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){pt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Kv=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pt(e)}},wc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),rf="5",uT="v",dT="s",fT="r",hT="f",pT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gT="ls",mT="p",Qv="ac",vT="websocket",yT="long_polling";var of=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function iV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _T(t,e,n){E(typeof e=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let r;if(e===vT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);iV(t)&&(n.ns=t.namespace);let i=[];return gt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Zv=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ZD(this.counters_)}};var Lv={},Vv={};function jy(t){let e=t.toString();return Lv[e]||(Lv[e]=new Zv),Lv[e]}function oV(t,e){let n=t.toString();return Vv[n]||(Vv[n]=e()),Vv[n]}var Jv=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ds(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var M0="start",sV="close",aV="pLPCommand",cV="pRTLPCB",ET="id",CT="pw",IT="ser",lV="cb",uV="seg",dV="ts",fV="d",hV="dframe",wT=1870,bT=30,pV=wT-bT,gV=25e3,mV=3e4,Xv=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kc(e),this.stats_=jy(n),this.urlFn=c=>(this.appCheckToken&&(c[Qv]=this.appCheckToken),_T(n,yT,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(mV)),KL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ey((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===M0)this.id=a,this.password=c;else if(s===sV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[M0]="t",r[IT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[lV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[uT]=rf,this.transportSessionId&&(r[dT]=this.transportSessionId),this.lastSessionId&&(r[gT]=this.lastSessionId),this.applicationId&&(r[mT]=this.applicationId),this.appCheckToken&&(r[Qv]=this.appCheckToken),typeof location<"u"&&location.hostname&&pT.test(location.hostname)&&(r[fT]=hT);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return An()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ZL()&&!JL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=yv(n),i=cT(r,pV);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(An())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[hV]="t",r[ET]=e,r[CT]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Te(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},ey=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,An())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=GL(),window[aV+this.uniqueCallbackIdentifier]=e,window[cV+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Je("frame writing exception"),a.stack&&Je(a.stack),Je(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Je("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[ET]=this.myID,e[CT]=this.myPW,e[IT]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bT+r.length<=wT;){let s=this.pendingSegs.shift();r=r+"&"+uV+i+"="+s.seg+"&"+dV+i+"="+s.ts+"&"+fV+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(gV)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){An()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var vV=16384,yV=45e3,sf=null;typeof MozWebSocket<"u"?sf=MozWebSocket:typeof WebSocket<"u"&&(sf=WebSocket);var yc=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kc(this.connId),this.stats_=jy(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[uT]=rf,!An()&&typeof location<"u"&&location.hostname&&pT.test(location.hostname)&&(a[fT]=hT),r&&(a[dT]=r),i&&(a[gT]=i),o&&(a[Qv]=o),s&&(a[mT]=s),_T(n,vT,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zi.set("previous_websocket_failure",!0);try{let i;if(An()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${rf}/${Ly}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new sf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&sf!==null&&!t.forceDisallow_}static previouslyFailed(){return zi.isInMemoryStorage||zi.get("previous_websocket_failure")===!0}markConnectionHealthy(){zi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=cs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(E(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Te(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=cT(r,vV);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(yV))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),_V=(()=>{class t{static get ALL_TRANSPORTS(){return[Xv,yc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=yc&&yc.isAvailable(),i=r&&!yc.previouslyFailed();if(n.webSocketOnly&&(r||pt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yc];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),EV=6e4,CV=5e3,IV=10*1024,wV=100*1024,jv="t",R0="d",bV="s",N0="r",DV="e",P0="o",O0="a",x0="n",k0="p",TV="h",ty=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kc("c:"+this.id+":"),this.transportManager_=new _V(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ic(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>wV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>IV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(jv in e){let n=e[jv];n===O0?this.upgradeIfSecondaryHealthy_():n===N0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===P0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=vc("t",e),r=vc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:k0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:O0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=vc("t",e),r=vc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=vc(jv,e);if(R0 in e){let r=e[R0];if(n===TV){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===x0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===bV?this.onConnectionShutdown_(r):n===N0?this.onReset_(r):n===DV?qv("Server Error: "+r):n===P0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qv("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rf!==r&&pt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ic(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(EV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ic(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:k0,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var af=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var cf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){E(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var lf=class t extends cf{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!uc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var F0=32,L0=768,ne=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Q(){return new ne("")}function z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Hr(t){return t.pieces_.length-t.pieceNum_}function ce(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function DT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function SV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function TT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ST(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function Me(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ne(n,0)}function q(t){return t.pieceNum_>=t.pieces_.length}function st(t,e){let n=z(t),r=z(e);if(n===null)return e;if(n===r)return st(ce(t),ce(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Uy(t,e){if(Hr(t)!==Hr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Hr(t)>Hr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ny=class{constructor(e,n){this.errorPrefix_=n,this.parts_=TT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hc(this.parts_[r]);AT(this)}};function AV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=hc(e),AT(t)}function MV(t){let e=t.parts_.pop();t.byteLength_-=hc(e),t.parts_.length>0&&(t.byteLength_-=1)}function AT(t){if(t.byteLength_>L0)throw new Error(t.errorPrefix_+"has a key path longer than "+L0+" bytes ("+t.byteLength_+").");if(t.parts_.length>F0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+F0+") or object contains a cycle "+Hi(t))}function Hi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ry=class t extends cf{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}};var _c=1e3,RV=60*5*1e3,V0=30*1e3,NV=1.3,PV=3e4,OV="server_kill",j0=3,By=(()=>{class t extends af{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_c,this.maxReconnectDelay_=RV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!An())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ry.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&lf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Te(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Qt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),E(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Mn(n,"w")){let i=ji(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();pt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||c0(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=V0)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=a0(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),E(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Te(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):qv("Unrecognized action received from server: "+Te(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>PV&&(this.reconnectDelay_=_c),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*NV)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){E(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new ty(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{pt(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(OV)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&pt(f),l())}}})}interrupt(n){Je("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Je("Resuming connection for reason: "+n),delete this.interruptReasons_[n],dc(this.interruptReasons_)&&(this.reconnectDelay_=_c,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Vy(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ne(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Je("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=j0&&(this.reconnectDelay_=V0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Je("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=j0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";An()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ly.replace(/\./g,"-")]=1,uc()?n["framework.cordova"]=1:Qd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=lf.getInstance().currentlyOnline();return dc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),W=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ys=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new W(vs,e),i=new W(vs,n);return this.compare(r,i)!==0}minPost(){return W.MIN}};var nf,uf=class extends ys{static get __EMPTY_NODE(){return nf}static set __EMPTY_NODE(e){nf=e}compare(e,n){return bs(e.name,n.name)}isDefinedOn(e){throw Vi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(qi,nf)}makePost(e,n){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,nf)}toString(){return".key"}},ms=new uf;var ps=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},en=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Lt.EMPTY_NODE,this.right=s??Lt.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Lt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),iy=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new en(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Lt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,en.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,en.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ps(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ps(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ps(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ps(this.root_,null,this.comparator_,!0,e)}};Lt.EMPTY_NODE=new iy;function xV(t,e){return bs(t.name,e.name)}function $y(t,e){return bs(t,e)}var oy;function kV(t){oy=t}var MT=function(t){return typeof t=="number"?"number:"+lT(t):"string:"+t},RT=function(t){if(t.isLeafNode()){let e=t.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mn(e,".sv"),"Priority must be a string or number.")}else E(t===oy||t.isEmpty(),"priority of unexpected type.");E(t===oy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var U0,_s=(()=>{class t{static set __childrenNodeConstructor(n){U0=n}static get __childrenNodeConstructor(){return U0}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return q(n)?this:z(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=z(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(E(i!==".priority"||Hr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ce(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+MT(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=lT(this.value_):n+=this.value_,this.lazyHash_=sT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(E(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return E(o>=0,"Unknown leaf type: "+r),E(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),NT,PT;function FV(t){NT=t}function LV(t){PT=t}var sy=class extends ys{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?bs(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(qi,new _s("[PRIORITY-POST]",PT))}makePost(e,n){let r=NT(e);return new W(n,new _s("[PRIORITY-POST]",r))}toString(){return".priority"}},ye=new sy;var VV=Math.log(2),ay=class{constructor(e){let n=o=>parseInt(Math.log(o)/VV,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},df=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new en(f,d.node,en.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),y=i(h+1,l);return d=t[h],f=n?n(d):d,new en(f,d.node,en.BLACK,g,y)}},o=function(c){let l=null,u=null,d=t.length,f=function(g,y){let v=d-g,C=d;d-=g;let $=i(v+1,C),oe=t[v],Z=n?n(oe):oe;h(new en(Z,oe.node,y,null,$))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let y=c.nextBitIsOne(),v=Math.pow(2,c.count-(g+1));y?f(v,en.BLACK):(f(v,en.BLACK),f(v,en.RED))}return u},s=new ay(t.length),a=o(s);return new Lt(r||e,a)};var Uv,hs={},Es=class t{static get Default(){return E(hs&&ye,"ChildrenNode.ts has not been loaded"),Uv=Uv||new t({".priority":hs},{".priority":ye}),Uv}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=ji(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Lt?n:null}hasIndex(e){return Mn(this.indexSet_,e.toString())}addIndex(e,n){E(e!==ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(W.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=df(r,e.getCompare()):a=hs;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=fc(this.indexes_,(i,o)=>{let s=ji(this.indexSet_,o);if(E(s,"Missing index implementation for "+o),i===hs)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(W.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),df(a,s.getCompare())}else return hs;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new W(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=fc(this.indexes_,i=>{if(i===hs)return i;{let o=n.get(e.name);return o?i.remove(new W(e.name,o)):i}});return new t(r,this.indexSet_)}};var Ec,B=(()=>{class t{static get EMPTY_NODE(){return Ec||(Ec=new t(new Lt($y),null,Es.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RT(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ec}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ec:r}}getChild(n){let r=z(n);return r===null?this:this.getImmediateChild(r).getChild(ce(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(E(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new W(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ec:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=z(n);if(i===null)return r;{E(z(n)!==".priority"||Hr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ce(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ye,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+MT(this.getPriority().val())+":"),this.forEachChild(ye,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":sT(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new W(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new W(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new W(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,W.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,W.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Fc?-1:0}withIndex(n){if(n===ms||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ms||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ye),o=r.getIterator(ye),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ms?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),cy=class extends B{constructor(){super(new Lt($y),B.EMPTY_NODE,Es.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}},Fc=new cy;Object.defineProperties(W,{MIN:{value:new W(vs,B.EMPTY_NODE)},MAX:{value:new W(qi,Fc)}});uf.__EMPTY_NODE=B.EMPTY_NODE;_s.__childrenNodeConstructor=B;kV(Fc);LV(Fc);var jV=!0;function Le(t,e=null){if(t===null)return B.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new _s(n,Le(e))}if(!(t instanceof Array)&&jV){let n=[],r=!1;if(gt(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Le(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new W(s,c)))}}),n.length===0)return B.EMPTY_NODE;let o=df(n,xV,s=>s.name,$y);if(r){let s=df(n,ye.getCompare());return new B(o,Le(e),new Es({".priority":s},{".priority":ye}))}else return new B(o,Le(e),Es.Default)}else{let n=B.EMPTY_NODE;return gt(t,(r,i)=>{if(Mn(t,r)&&r.substring(0,1)!=="."){let o=Le(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Le(e))}}FV(Le);var ly=class extends ys{constructor(e){super(),this.indexPath_=e,E(!q(e)&&z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?bs(e.name,n.name):o}makePost(e,n){let r=Le(e),i=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new W(n,i)}maxPost(){let e=B.EMPTY_NODE.updateChild(this.indexPath_,Fc);return new W(qi,e)}toString(){return TT(this.indexPath_,0).join("/")}};var uy=class extends ys{compare(e,n){let r=e.node.compareTo(n.node);return r===0?bs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){let r=Le(e);return new W(n,r)}toString(){return".value"}},UV=new uy;function OT(t){return{type:"value",snapshotNode:t}}function Cs(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Sc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ac(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function BV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Mc=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Sc(n,a)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Cs(n,r)):s.trackChildChange(Ac(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ye,(i,o)=>{n.hasChild(i)||r.trackChildChange(Sc(i,o))}),n.isLeafNode()||n.forEachChild(ye,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ac(i,o,s))}else r.trackChildChange(Cs(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?B.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var ff=class t{constructor(e){this.indexedFilter_=new Mc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new W(n,r))||(r=B.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=B.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(B.EMPTY_NODE);let o=this;return n.forEachChild(ye,(s,a)=>{o.matches(new W(s,a))||(i=i.updateImmediateChild(s,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var dy=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ff(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new W(n,r))||(r=B.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=B.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=B.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(B.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;E(a.numChildren()===this.limit_,"");let c=new W(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ac(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Sc(n,d));let y=a.updateImmediateChild(n,B.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Cs(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Sc(l.name,l.node)),o.trackChildChange(Cs(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,B.EMPTY_NODE)):e}};var fy=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vs}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ye}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function $V(t){return t.loadsAllData()?new Mc(t.getIndex()):t.hasLimit()?new dy(t):new ff(t)}function B0(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ye?n="$priority":t.index_===UV?n="$value":t.index_===ms?n="$key":(E(t.index_ instanceof ly,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Te(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Te(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Te(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Te(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Te(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function $0(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ye&&(e.i=t.index_.toString()),e}var hy=class t extends af{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kc("p:rest:"),this.listens_={}}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=B0(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),ji(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=B0(e._queryParams),r=e._path.toString(),i=new Qt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ui(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=cs(a.responseText)}catch{pt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&pt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var py=class{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function hf(){return{value:null,children:new Map}}function xT(t,e,n){if(q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=z(e);t.children.has(r)||t.children.set(r,hf());let i=t.children.get(r);e=ce(e),xT(i,e,n)}}function gy(t,e,n){t.value!==null?n(e,t.value):HV(t,(r,i)=>{let o=new ne(e.toString()+"/"+r);gy(i,o,n)})}function HV(t,e){t.children.forEach((n,r)=>{e(r,n)})}var my=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var H0=10*1e3,zV=30*1e3,WV=5*60*1e3,vy=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new my(e);let r=H0+(zV-H0)*Math.random();Ic(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;gt(e,(i,o)=>{o>0&&Mn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ic(this.reportStats_.bind(this),Math.floor(Math.random()*2*WV))}};var On=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(On||{});function kT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var yy=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=On.ACK_USER_WRITE,this.source=kT()}operationForChild(e){if(q(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ne(e));return new t(Q(),n,this.revert)}}else return E(z(this.path)===e,"operationForChild called for unrelated child."),new t(ce(this.path),this.affectedTree,this.revert)}};var pf=class t{constructor(e,n){this.source=e,this.path=n,this.type=On.LISTEN_COMPLETE}operationForChild(e){return q(this.path)?new t(this.source,Q()):new t(this.source,ce(this.path))}};var Is=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=On.OVERWRITE}operationForChild(e){return q(this.path)?new t(this.source,Q(),this.snap.getImmediateChild(e)):new t(this.source,ce(this.path),this.snap)}};var gf=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=On.MERGE}operationForChild(e){if(q(this.path)){let n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new Is(this.source,Q(),n.value):new t(this.source,Q(),n)}else return E(z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var xn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(q(e))return this.isFullyInitialized()&&!this.filtered_;let n=z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var _y=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function GV(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(BV(s.childName,s.snapshotNode))}),Cc(t,i,"child_removed",e,r,n),Cc(t,i,"child_added",e,r,n),Cc(t,i,"child_moved",o,r,n),Cc(t,i,"child_changed",e,r,n),Cc(t,i,"value",e,r,n),i}function Cc(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>YV(t,a,c)),s.forEach(a=>{let c=qV(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function qV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YV(t,e,n){if(e.childName==null||n.childName==null)throw Vi("Should only compare child_ events.");let r=new W(e.childName,e.snapshotNode),i=new W(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Mf(t,e){return{eventCache:t,serverCache:e}}function bc(t,e,n,r){return Mf(new xn(e,n,r),t.serverCache)}function FT(t,e,n,r){return Mf(t.eventCache,new xn(e,n,r))}function mf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Yi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Bv,KV=()=>(Bv||(Bv=new Lt(QL)),Bv),mt=class t{static fromObject(e){let n=new t(null);return gt(e,(r,i)=>{n=n.set(new ne(r),i)}),n}constructor(e,n=KV()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(q(e))return null;{let r=z(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ce(e),n);return o!=null?{path:Me(new ne(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(q(e))return this;{let n=z(e),r=this.children.get(n);return r!==null?r.subtree(ce(e)):new t(null)}}set(e,n){if(q(e))return new t(n,this.children);{let r=z(e),o=(this.children.get(r)||new t(null)).set(ce(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(q(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=z(e),r=this.children.get(n);if(r){let i=r.remove(ce(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(q(e))return this.value;{let n=z(e),r=this.children.get(n);return r?r.get(ce(e)):null}}setTree(e,n){if(q(e))return n;{let r=z(e),o=(this.children.get(r)||new t(null)).setTree(ce(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Me(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(q(e))return null;{let o=z(e),s=this.children.get(o);return s?s.findOnPath_(ce(e),Me(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(q(e))return this;{this.value&&r(n,this.value);let i=z(e),o=this.children.get(i);return o?o.foreachOnPath_(ce(e),Me(n,i),r):new t(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Me(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var nn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new mt(null))}};function Dc(t,e,n){if(q(e))return new nn(new mt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=st(i,e);return o=o.updateChild(s,n),new nn(t.writeTree_.set(i,o))}else{let i=new mt(n),o=t.writeTree_.setTree(e,i);return new nn(o)}}}function z0(t,e,n){let r=t;return gt(n,(i,o)=>{r=Dc(r,Me(e,i),o)}),r}function W0(t,e){if(q(e))return nn.empty();{let n=t.writeTree_.setTree(e,new mt(null));return new nn(n)}}function Ey(t,e){return Qi(t,e)!=null}function Qi(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(st(n.path,e)):null}function G0(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ye,(r,i)=>{e.push(new W(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new W(r,i.value))}),e}function Br(t,e){if(q(e))return t;{let n=Qi(t,e);return n!=null?new nn(new mt(n)):new nn(t.writeTree_.subtree(e))}}function Cy(t){return t.writeTree_.isEmpty()}function ws(t,e){return LT(Q(),t.writeTree_,e)}function LT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(E(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=LT(Me(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Me(t,".priority"),r)),n}}function Rf(t,e){return BT(e,t)}function QV(t,e,n,r,i){E(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Dc(t.visibleWrites,e,n)),t.lastWriteId=r}function ZV(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function JV(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);E(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&XV(a,r.path)?i=!1:tn(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return ej(t),!0;if(r.snap)t.visibleWrites=W0(t.visibleWrites,r.path);else{let a=r.children;gt(a,c=>{t.visibleWrites=W0(t.visibleWrites,Me(r.path,c))})}return!0}else return!1}function XV(t,e){if(t.snap)return tn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&tn(Me(t.path,n),e))return!0;return!1}function ej(t){t.visibleWrites=VT(t.allWrites,tj,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tj(t){return t.visible}function VT(t,e,n){let r=nn.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)tn(n,s)?(a=st(n,s),r=Dc(r,a,o.snap)):tn(s,n)&&(a=st(s,n),r=Dc(r,Q(),o.snap.getChild(a)));else if(o.children){if(tn(n,s))a=st(n,s),r=z0(r,a,o.children);else if(tn(s,n))if(a=st(s,n),q(a))r=z0(r,Q(),o.children);else{let c=ji(o.children,z(a));if(c){let l=c.getChild(ce(a));r=Dc(r,Q(),l)}}}else throw Vi("WriteRecord should have .snap or .children")}}return r}function jT(t,e,n,r,i){if(!r&&!i){let o=Qi(t.visibleWrites,e);if(o!=null)return o;{let s=Br(t.visibleWrites,e);if(Cy(s))return n;if(n==null&&!Ey(s,Q()))return null;{let a=n||B.EMPTY_NODE;return ws(s,a)}}}else{let o=Br(t.visibleWrites,e);if(!i&&Cy(o))return n;if(!i&&n==null&&!Ey(o,Q()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(tn(l.path,e)||tn(e,l.path))},a=VT(t.allWrites,s,e),c=n||B.EMPTY_NODE;return ws(a,c)}}}function nj(t,e,n){let r=B.EMPTY_NODE,i=Qi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ye,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Br(t.visibleWrites,e);return n.forEachChild(ye,(s,a)=>{let c=ws(Br(o,new ne(s)),a);r=r.updateImmediateChild(s,c)}),G0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Br(t.visibleWrites,e);return G0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function rj(t,e,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Me(e,n);if(Ey(t.visibleWrites,o))return null;{let s=Br(t.visibleWrites,o);return Cy(s)?i.getChild(n):ws(s,i.getChild(n))}}function ij(t,e,n,r){let i=Me(e,n),o=Qi(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Br(t.visibleWrites,i);return ws(s,r.getNode().getImmediateChild(n))}else return null}function oj(t,e){return Qi(t.visibleWrites,e)}function sj(t,e,n,r,i,o,s){let a,c=Br(t.visibleWrites,e),l=Qi(c,Q());if(l!=null)a=l;else if(n!=null)a=ws(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function aj(){return{visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1}}function vf(t,e,n,r){return jT(t.writeTree,t.treePath,e,n,r)}function Wy(t,e){return nj(t.writeTree,t.treePath,e)}function q0(t,e,n,r){return rj(t.writeTree,t.treePath,e,n,r)}function yf(t,e){return oj(t.writeTree,Me(t.treePath,e))}function cj(t,e,n,r,i,o){return sj(t.writeTree,t.treePath,e,n,r,i,o)}function Gy(t,e,n){return ij(t.writeTree,t.treePath,e,n)}function UT(t,e){return BT(Me(t.treePath,e),t.writeTree)}function BT(t,e){return{treePath:t,writeTree:e}}var Iy=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ac(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Sc(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Cs(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ac(r,e.snapshotNode,i.oldSnap));else throw Vi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var wy=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},$T=new wy,Rc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gy(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Yi(this.viewCache_),o=cj(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function lj(t){return{filter:t}}function uj(t,e){E(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function dj(t,e,n,r,i){let o=new Iy,s,a;if(n.type===On.OVERWRITE){let l=n;l.source.fromUser?s=by(t,e,l.path,l.snap,r,i,o):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!q(l.path),s=_f(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===On.MERGE){let l=n;l.source.fromUser?s=hj(t,e,l.path,l.children,r,i,o):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Dy(t,e,l.path,l.children,r,i,a,o))}else if(n.type===On.ACK_USER_WRITE){let l=n;l.revert?s=mj(t,e,l.path,r,i,o):s=pj(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===On.LISTEN_COMPLETE)s=gj(t,e,n.path,r,o);else throw Vi("Unknown operation type: "+n.type);let c=o.getChanges();return fj(e,s,c),{viewCache:s,changes:c}}function fj(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=mf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(OT(mf(e)))}}function HT(t,e,n,r,i,o){let s=e.eventCache;if(yf(r,n)!=null)return e;{let a,c;if(q(n))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Yi(e),u=l instanceof B?l:B.EMPTY_NODE,d=Wy(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=vf(r,Yi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=z(n);if(l===".priority"){E(Hr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=q0(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ce(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=q0(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Gy(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return bc(e,a,s.isFullyInitialized()||q(n),t.filter.filtersNodes())}}function _f(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(q(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=z(n);if(!c.isCompleteForPath(n)&&Hr(n)>1)return e;let g=ce(n),v=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),v):l=u.updateChild(c.getNode(),h,v,g,$T,null)}let d=FT(e,l,c.isFullyInitialized()||q(n),u.filtersNodes()),f=new Rc(i,d,o);return HT(t,d,n,i,f,a)}function by(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Rc(i,e,o);if(q(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=bc(e,l,!0,t.filter.filtersNodes());else{let d=z(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=bc(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ce(n),h=a.getNode().getImmediateChild(d),g;if(q(f))g=r;else{let y=u.getCompleteChild(d);y!=null?DT(f)===".priority"&&y.getChild(ST(f)).isEmpty()?g=y:g=y.updateChild(f,r):g=B.EMPTY_NODE}if(h.equals(g))c=e;else{let y=t.filter.updateChild(a.getNode(),d,g,f,u,s);c=bc(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Y0(t,e){return t.eventCache.isCompleteForChild(e)}function hj(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Me(n,c);Y0(e,z(u))&&(a=by(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Me(n,c);Y0(e,z(u))||(a=by(t,a,u,l,i,o,s))}),a}function K0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Dy(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;q(n)?l=r:l=new mt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),g=K0(t,h,f);c=_f(t,c,new ne(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=e.serverCache.getNode().getImmediateChild(d),y=K0(t,g,f);c=_f(t,c,new ne(d),y,i,o,s,a)}}),c}function pj(t,e,n,r,i,o,s){if(yf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(q(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return _f(t,e,n,c.getNode().getChild(n),i,o,a,s);if(q(n)){let l=new mt(null);return c.getNode().forEachChild(ms,(u,d)=>{l=l.set(new ne(u),d)}),Dy(t,e,n,l,i,o,a,s)}else return e}else{let l=new mt(null);return r.foreach((u,d)=>{let f=Me(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Dy(t,e,n,l,i,o,a,s)}}function gj(t,e,n,r,i){let o=e.serverCache,s=FT(e,o.getNode(),o.isFullyInitialized()||q(n),o.isFiltered());return HT(t,s,n,r,$T,i)}function mj(t,e,n,r,i,o){let s;if(yf(r,n)!=null)return e;{let a=new Rc(r,e,i),c=e.eventCache.getNode(),l;if(q(n)||z(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=vf(r,Yi(e));else{let d=e.serverCache.getNode();E(d instanceof B,"serverChildren would be complete if leaf node"),u=Wy(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=z(n),d=Gy(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ce(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,B.EMPTY_NODE,ce(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=vf(r,Yi(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||yf(r,Q())!=null,bc(e,l,s,t.filter.filtersNodes())}}var Ty=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Mc(r.getIndex()),o=$V(r);this.processor_=lj(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(B.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(B.EMPTY_NODE,a.getNode(),null),u=new xn(c,s.isFullyInitialized(),i.filtersNodes()),d=new xn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Mf(d,u),this.eventGenerator_=new _y(this.query_)}get query(){return this.query_}};function vj(t){return t.viewCache_.serverCache.getNode()}function yj(t){return mf(t.viewCache_)}function _j(t,e){let n=Yi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!q(e)&&!n.getImmediateChild(z(e)).isEmpty())?n.getChild(e):null}function Q0(t){return t.eventRegistrations_.length===0}function Ej(t,e){t.eventRegistrations_.push(e)}function Z0(t,e,n){let r=[];if(n){E(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function J0(t,e,n,r){e.type===On.MERGE&&e.source.queryId!==null&&(E(Yi(t.viewCache_),"We should always have a full cache before handling merges"),E(mf(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=dj(t.processor_,i,e,n,r);return uj(t.processor_,o.viewCache),E(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,zT(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Cj(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ye,(o,s)=>{r.push(Cs(o,s))}),n.isFullyInitialized()&&r.push(OT(n.getNode())),zT(t,r,n.getNode(),e)}function zT(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return GV(t.eventGenerator_,e,n,i)}var Ef,Cf=class{constructor(){this.views=new Map}};function Ij(t){E(!Ef,"__referenceConstructor has already been defined"),Ef=t}function wj(){return E(Ef,"Reference.ts has not been loaded"),Ef}function bj(t){return t.views.size===0}function qy(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return E(o!=null,"SyncTree gave us an op for an invalid query."),J0(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(J0(s,e,n,r));return o}}function WT(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=vf(n,i?r:null),c=!1;a?c=!0:r instanceof B?(a=Wy(n,r),c=!1):(a=B.EMPTY_NODE,c=!1);let l=Mf(new xn(a,c,!1),new xn(r,i,!1));return new Ty(e,l)}return s}function Dj(t,e,n,r,i,o){let s=WT(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Ej(s,n),Cj(s,n)}function Tj(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=zr(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(Z0(l,n,r)),Q0(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(Z0(c,n,r)),Q0(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!zr(t)&&o.push(new(wj())(e._repo,e._path)),{removed:o,events:s}}function GT(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $r(t,e){let n=null;for(let r of t.views.values())n=n||_j(r,e);return n}function qT(t,e){if(e._queryParams.loadsAllData())return Nf(t);{let r=e._queryIdentifier;return t.views.get(r)}}function YT(t,e){return qT(t,e)!=null}function zr(t){return Nf(t)!=null}function Nf(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var If;function Sj(t){E(!If,"__referenceConstructor has already been defined"),If=t}function Aj(){return E(If,"Reference.ts has not been loaded"),If}var Mj=1,wf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mt(null),this.pendingWriteTree_=aj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function KT(t,e,n,r,i){return QV(t.pendingWriteTree_,e,n,r,i),i?Vc(t,new Is(kT(),e,n)):[]}function Wi(t,e,n=!1){let r=ZV(t.pendingWriteTree_,e);if(JV(t.pendingWriteTree_,e)){let o=new mt(null);return r.snap!=null?o=o.set(Q(),!0):gt(r.children,s=>{o=o.set(new ne(s),!0)}),Vc(t,new yy(r.path,o,n))}else return[]}function Lc(t,e,n){return Vc(t,new Is(Hy(),e,n))}function Rj(t,e,n){let r=mt.fromObject(n);return Vc(t,new gf(Hy(),e,r))}function Nj(t,e){return Vc(t,new pf(Hy(),e))}function Pj(t,e,n){let r=Ky(t,n);if(r){let i=Qy(r),o=i.path,s=i.queryId,a=st(o,e),c=new pf(zy(s),a);return Zy(t,o,c)}else return[]}function bf(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||YT(s,e))){let c=Tj(s,e,n,r);bj(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>zr(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=kj(f);for(let g=0;g<h.length;++g){let y=h[g],v=y.query,C=XT(t,y);t.listenProvider_.startListening(Tc(v),Nc(t,v),C.hashFn,C.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Tc(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Pf(f));t.listenProvider_.stopListening(Tc(f),h)}))}Fj(t,l)}return a}function QT(t,e,n,r){let i=Ky(t,r);if(i!=null){let o=Qy(i),s=o.path,a=o.queryId,c=st(s,e),l=new Is(zy(a),c,n);return Zy(t,s,l)}else return[]}function Oj(t,e,n,r){let i=Ky(t,r);if(i){let o=Qy(i),s=o.path,a=o.queryId,c=st(s,e),l=mt.fromObject(n),u=new gf(zy(a),c,l);return Zy(t,s,u)}else return[]}function Sy(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=st(f,i);o=o||$r(h,g),s=s||zr(h)});let a=t.syncPointTree_.get(i);a?(s=s||zr(a),o=o||$r(a,Q())):(a=new Cf,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=B.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,g)=>{let y=$r(g,Q());y&&(o=o.updateImmediateChild(h,y))}));let l=YT(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Pf(e);E(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=Lj();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Rf(t.pendingWriteTree_,i),d=Dj(a,e,n,u,o,c);if(!l&&!s&&!r){let f=qT(a,e);d=d.concat(Vj(t,e,f))}return d}function Yy(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=st(s,e),l=$r(a,c);if(l)return l});return jT(i,e,o,n,!0)}function xj(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=st(l,n);r=r||$r(u,d)});let i=t.syncPointTree_.get(n);i?r=r||$r(i,Q()):(i=new Cf,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new xn(r,!0,!1):null,a=Rf(t.pendingWriteTree_,e._path),c=WT(i,e,a,o?s.getNode():B.EMPTY_NODE,o);return yj(c)}function Vc(t,e){return ZT(e,t.syncPointTree_,null,Rf(t.pendingWriteTree_,Q()))}function ZT(t,e,n,r){if(q(t.path))return JT(t,e,n,r);{let i=e.get(Q());n==null&&i!=null&&(n=$r(i,Q()));let o=[],s=z(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=UT(r,s);o=o.concat(ZT(a,c,l,u))}return i&&(o=o.concat(qy(i,t,r,n))),o}}function JT(t,e,n,r){let i=e.get(Q());n==null&&i!=null&&(n=$r(i,Q()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=UT(r,s),u=t.operationForChild(s);u&&(o=o.concat(JT(u,a,c,l)))}),i&&(o=o.concat(qy(i,t,r,n))),o}function XT(t,e){let n=e.query,r=Nc(t,n);return{hashFn:()=>(vj(e)||B.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Pj(t,n._path,r):Nj(t,n._path);{let o=XL(i,n);return bf(t,n,null,o)}}}}function Nc(t,e){let n=Pf(e);return t.queryToTagMap.get(n)}function Pf(t){return t._path.toString()+"$"+t._queryIdentifier}function Ky(t,e){return t.tagToQueryMap.get(e)}function Qy(t){let e=t.indexOf("$");return E(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function Zy(t,e,n){let r=t.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");let i=Rf(t.pendingWriteTree_,e);return qy(r,n,i,null)}function kj(t){return t.fold((e,n,r)=>{if(n&&zr(n))return[Nf(n)];{let i=[];return n&&(i=GT(n)),gt(r,(o,s)=>{i=i.concat(s)}),i}})}function Tc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Aj())(t._repo,t._path):t}function Fj(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Pf(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function Lj(){return Mj++}function Vj(t,e,n){let r=e._path,i=Nc(t,e),o=XT(t,n),s=t.listenProvider_.startListening(Tc(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)E(!zr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!q(l)&&u&&zr(u))return[Nf(u).query];{let f=[];return u&&(f=f.concat(GT(u).map(h=>h.query))),gt(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Tc(u),Nc(t,u))}}return s}var Ay=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},My=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Me(this.path_,e);return new t(this.syncTree_,n)}node(){return Yy(this.syncTree_,this.path_)}},jj=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},X0=function(t,e,n){if(!t||typeof t!="object")return t;if(E(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Uj(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Bj(t[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Uj=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+t)}},Bj=function(t,e,n){t.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);let i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},$j=function(t,e,n,r){return Jy(e,new My(n,t),r)},eS=function(t,e,n){return Jy(t,new Ay(e),n)};function Jy(t,e,n){let r=t.getPriority().val(),i=X0(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=X0(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new _s(a,Le(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new _s(i))),s.forEachChild(ye,(a,c)=>{let l=Jy(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Pc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Xy(t,e){let n=e instanceof ne?e:new ne(e),r=t,i=z(n);for(;i!==null;){let o=ji(r.node.children,i)||{children:{},childCount:0};r=new Pc(i,r,o),n=ce(n),i=z(n)}return r}function Ts(t){return t.node.value}function tS(t,e){t.node.value=e,Ry(t)}function nS(t){return t.node.childCount>0}function Hj(t){return Ts(t)===void 0&&!nS(t)}function Of(t,e){gt(t.node.children,(n,r)=>{e(new Pc(n,t,r))})}function rS(t,e,n,r){n&&!r&&e(t),Of(t,i=>{rS(i,e,!0,r)}),n&&r&&e(t)}function zj(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jc(t){return new ne(t.parent===null?t.name:jc(t.parent)+"/"+t.name)}function Ry(t){t.parent!==null&&Wj(t.parent,t.name,t)}function Wj(t,e,n){let r=Hj(n),i=Mn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ry(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ry(t))}var Gj=/[\[\].#$\/\u0000-\u001F\u007F]/,qj=/[\[\].#$\u0000-\u001F\u007F]/,$v=10*1024*1024,iS=function(t){return typeof t=="string"&&t.length!==0&&!Gj.test(t)},oS=function(t){return typeof t=="string"&&t.length!==0&&!qj.test(t)},Yj=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oS(t)};var sS=function(t,e,n,r){r&&e===void 0||e_(Jd(t,"value"),e,n)},e_=function(t,e,n){let r=n instanceof ne?new ny(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Hi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Hi(r)+" with contents = "+e.toString());if(aT(e))throw new Error(t+"contains "+e.toString()+" "+Hi(r));if(typeof e=="string"&&e.length>$v/3&&hc(e)>$v)throw new Error(t+"contains a string greater than "+$v+" utf8 bytes "+Hi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(gt(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!iS(s)))throw new Error(t+" contains an invalid key ("+s+") "+Hi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AV(r,s),e_(t,a,r),MV(r)}),i&&o)throw new Error(t+' contains ".value" child '+Hi(r)+" in addition to actual children.")}};var aS=function(t,e,n,r){if(!(r&&n===void 0)&&!oS(n))throw new Error(Jd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Kj=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aS(t,e,n,r)},t_=function(t,e){if(z(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Qj=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!iS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Yj(n))throw new Error(Jd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ny=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function n_(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!Uy(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function cS(t,e,n){n_(t,n),lS(t,r=>Uy(r,e))}function kn(t,e,n){n_(t,n),lS(t,r=>tn(r,e)||tn(e,r))}function lS(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(Zj(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Zj(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Gi&&Je("event: "+n.toString()),Ds(r)}}}var Jj="repo_interrupt",Xj=25,Py=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ny,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hf(),this.transactionQueueTree_=new Pc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function eU(t,e,n){if(t.stats_=jy(t.repoInfo_),t.forceRestClient_||rV())t.server_=new hy(t.repoInfo_,(r,i,o,s)=>{eT(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>tT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new By(t.repoInfo_,e,(r,i,o,s)=>{eT(t,r,i,o,s)},r=>{tT(t,r)},r=>{tU(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=oV(t.repoInfo_,()=>new vy(t.stats_,t.server_)),t.infoData_=new py,t.infoSyncTree_=new wf({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Lc(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),i_(t,"connected",!1),t.serverSyncTree_=new wf({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);kn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function uS(t){let n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function r_(t){return jj({timestamp:uS(t)})}function eT(t,e,n,r,i){t.dataUpdateCount++;let o=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=fc(n,l=>Le(l));s=Oj(t.serverSyncTree_,o,c,i)}else{let c=Le(n);s=QT(t.serverSyncTree_,o,c,i)}else if(r){let c=fc(n,l=>Le(l));s=Rj(t.serverSyncTree_,o,c)}else{let c=Le(n);s=Lc(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=kf(t,o)),kn(t.eventQueue_,a,s)}function tT(t,e){i_(t,"connected",e),e===!1&&iU(t)}function tU(t,e){gt(e,(n,r)=>{i_(t,n,r)})}function i_(t,e,n){let r=new ne("/.info/"+e),i=Le(n);t.infoData_.updateSnapshot(r,i);let o=Lc(t.infoSyncTree_,r,i);kn(t.eventQueue_,r,o)}function dS(t){return t.nextWriteId_++}function nU(t,e,n){let r=xj(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=Le(i).withIndex(e._queryParams.getIndex());Sy(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=Lc(t.serverSyncTree_,e._path,o);else{let a=Nc(t.serverSyncTree_,e);s=QT(t.serverSyncTree_,e._path,o,a)}return kn(t.eventQueue_,e._path,s),bf(t.serverSyncTree_,e,n,null,!0),o},i=>(xf(t,"get for query "+Te(e)+" failed: "+i),Promise.reject(new Error(i))))}function rU(t,e,n,r,i){xf(t,"set",{path:e.toString(),value:n,priority:r});let o=r_(t),s=Le(n,r),a=Yy(t.serverSyncTree_,e),c=eS(s,a,o),l=dS(t),u=KT(t.serverSyncTree_,e,c,l,!0);n_(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||pt("set at "+e+" failed: "+f);let y=Wi(t.serverSyncTree_,l,!g);kn(t.eventQueue_,e,y),aU(t,i,f,h)});let d=mS(t,e);kf(t,d),kn(t.eventQueue_,d,[])}function iU(t){xf(t,"onDisconnectEvents");let e=r_(t),n=hf();gy(t.onDisconnect_,Q(),(i,o)=>{let s=$j(i,o,t.serverSyncTree_,e);xT(n,i,s)});let r=[];gy(n,Q(),(i,o)=>{r=r.concat(Lc(t.serverSyncTree_,i,o));let s=mS(t,i);kf(t,s)}),t.onDisconnect_=hf(),kn(t.eventQueue_,Q(),r)}function oU(t,e,n){let r;z(e._path)===".info"?r=Sy(t.infoSyncTree_,e,n):r=Sy(t.serverSyncTree_,e,n),cS(t.eventQueue_,e._path,r)}function nT(t,e,n){let r;z(e._path)===".info"?r=bf(t.infoSyncTree_,e,n):r=bf(t.serverSyncTree_,e,n),cS(t.eventQueue_,e._path,r)}function sU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Jj)}function xf(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Je(n,...e)}function aU(t,e,n,r){e&&Ds(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function fS(t,e,n){return Yy(t.serverSyncTree_,e,n)||B.EMPTY_NODE}function o_(t,e=t.transactionQueueTree_){if(e||Ff(t,e),Ts(e)){let n=pS(t,e);E(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&cU(t,jc(e),n)}else nS(e)&&Of(e,n=>{o_(t,n)})}function cU(t,e,n){let r=n.map(l=>l.currentWriteId),i=fS(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];E(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=st(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{xf(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Wi(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Ff(t,Xy(t.transactionQueueTree_,e)),o_(t,t.transactionQueueTree_),kn(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ds(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{pt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}kf(t,e)}},s)}function kf(t,e){let n=hS(t,e),r=jc(n),i=pS(t,n);return lU(t,i,r),r}function lU(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=st(n,c.path),u=!1,d;if(E(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Wi(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Xj)u=!0,d="maxretry",i=i.concat(Wi(t.serverSyncTree_,c.currentWriteId,!0));else{let f=fS(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){e_("transaction failed: Data returned ",h,c.path);let g=Le(h);typeof h=="object"&&h!=null&&Mn(h,".priority")||(g=g.updatePriority(f.getPriority()));let v=c.currentWriteId,C=r_(t),$=eS(g,f,C);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=$,c.currentWriteId=dS(t),s.splice(s.indexOf(v),1),i=i.concat(KT(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(Wi(t.serverSyncTree_,v,!0))}else u=!0,d="nodata",i=i.concat(Wi(t.serverSyncTree_,c.currentWriteId,!0))}kn(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ff(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ds(r[a]);o_(t,t.transactionQueueTree_)}function hS(t,e){let n,r=t.transactionQueueTree_;for(n=z(e);n!==null&&Ts(r)===void 0;)r=Xy(r,n),e=ce(e),n=z(e);return r}function pS(t,e){let n=[];return gS(t,e,n),n.sort((r,i)=>r.order-i.order),n}function gS(t,e,n){let r=Ts(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Of(e,i=>{gS(t,i,n)})}function Ff(t,e){let n=Ts(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,tS(e,n.length>0?n:void 0)}Of(e,r=>{Ff(t,r)})}function mS(t,e){let n=jc(hS(t,e)),r=Xy(t.transactionQueueTree_,e);return zj(r,i=>{Hv(t,i)}),Hv(t,r),rS(r,i=>{Hv(t,i)}),n}function Hv(t,e){let n=Ts(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(E(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(E(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Wi(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?tS(e,void 0):n.length=o+1,kn(t.eventQueue_,jc(e),i);for(let s=0;s<r.length;s++)Ds(r[s])}}function uU(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function dU(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pt(`Invalid query segment '${n}' in query '${t}'`)}return e}var rT=function(t,e){let n=fU(t),r=n.namespace;n.domain==="firebase.com"&&or(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||YL();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new of(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ne(n.pathString)}},fU=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=uU(t.substring(u,d)));let f=dU(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var iT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hU=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=iT.charAt(n%64),n=Math.floor(n/64);E(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=iT.charAt(e[i]);return E(s.length===20,"nextPushId: Length should be 20."),s}}();var Df=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Te(this.snapshot.exportVal())}},Tf=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Sf=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Oy=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return q(this._path)?null:DT(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){let e=$0(this._queryParams),n=Vy(e);return n==="{}"?"default":n}get _queryObject(){return $0(this._queryParams)}isEqual(e){if(e=Ae(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Uy(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+SV(this._path)}};var Fn=class t extends Oy{constructor(e,n){super(e,n,new fy,!1)}get parent(){let e=ST(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Oc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ne(e),r=Ki(this.ref,e);return new t(this._node.getChild(n),r,ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Ki(this.ref,r),ye)))}hasChild(e){let n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function vt(t,e){return t=Ae(t),t._checkNotDeleted("ref"),e!==void 0?Ki(t._root,e):t._root}function Ki(t,e){return t=Ae(t),z(t._path)===null?Kj("child","path",e,!1):aS("child","path",e,!1),new Fn(t._repo,Me(t._path,e))}function Uc(t,e){t=Ae(t),t_("push",t._path),sS("push",e,t._path,!0);let n=uS(t._repo),r=hU(n),i=Ki(t,r),o=Ki(t,r),s;return e!=null?s=Zi(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Lf(t){return t_("remove",t._path),Zi(t,null)}function Zi(t,e){t=Ae(t),t_("set",t._path),sS("set",e,t._path,!1);let n=new Qt;return rU(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Vf(t){t=Ae(t);let e=new Sf(()=>{}),n=new Af(e);return nU(t._repo,t,n).then(r=>new Oc(r,new Fn(t._repo,t._path),t._queryParams.getIndex()))}var Af=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Df("value",this,new Oc(e.snapshotNode,new Fn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Tf(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},xy=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Tf(this,e,n):null}createEvent(e,n){E(e.childName!=null,"Child events should have a childName.");let r=Ki(new Fn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Df(e.type,this,new Oc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function pU(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{nT(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Sf(n,o||void 0),a=e==="value"?new Af(s):new xy(e,s);return oU(t._repo,t,a),()=>nT(t._repo,t,a)}function Ji(t,e,n,r){return pU(t,"value",e,n,r)}Ij(Fn);Sj(Fn);var gU="FIREBASE_DATABASE_EMULATOR_HOST",ky={},mU=!1;function vU(t,e,n,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=Vr(o);t.repoInfo_=new of(e,s,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function yU(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=rT(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[gU]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=rT(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new wc(wc.OWNER):new Kv(t.name,t.options,e);Qj("Invalid Firebase Database URL",s),q(s.path)||or("Database URL must point to the root of a Firebase Database (not including a child path).");let d=EU(a,t,u,new Yv(t,n));return new Fy(d,t)}function _U(t,e){let n=ky[e];(!n||n[t.key]!==t)&&or(`Database ${e}(${t.repoInfo_}) has already been deleted.`),sU(t),delete n[t.key]}function EU(t,e,n,r){let i=ky[e.name];i||(i={},ky[e.name]=i);let o=i[t.toURLString()];return o&&or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Py(t,mU,n,r),i[t.toURLString()]=o,o}var Fy=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(eU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_U(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&or("Cannot call "+e+" on a deleted database.")}};function Ss(t=$i(),e){let n=fs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=e0("database");r&&vS(n,...r)}return n}function vS(t,e,n,r={}){t=Ae(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Rn(r,o.repoInfo_.emulatorOptions))return;or("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new wc(wc.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:t0(r.mockUserToken,t.app.options.projectId);s=new wc(a)}Vr(e)&&(Yd(e),Kd("Database",!0)),vU(o,i,r,s)}function CU(t){WL(Ur),Xt(new ot("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return yU(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ve(D0,T0,t),ve(D0,T0,"esm2017")}By.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};By.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};CU();var IU="firebase",wU="11.10.0";ve(IU,wU,"app");function yS(t){t===void 0&&(t=m(we));let e=t.get(Dr);return n=>new N(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Wr=new Ai("ANGULARFIRE2_VERSION");function Bc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ms=(t,e)=>{let n=e?[e]:tf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},As=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(As||{}),_S=ym()&&typeof Zone<"u"?As.WARN:As.SILENT;var jf=class{zone;delegate;constructor(e,n=Hh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Gr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=m(ee);this.outsideAngular=n.runOutsideAngular(()=>new jf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new jf(typeof Zone>"u"?void 0:Zone.current,$h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ES=!1;function bU(t,e){!ES&&(_S>As.SILENT||ym())&&(ES=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),_S>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function DU(t){let e=m(ee,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Xi(t){let e=m(ee,{optional:!0});return e?e.run(()=>t()):t()}var TU=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),_e(n,()=>Xi(()=>t.apply(void 0,r)))),rn=(t,e,n)=>(n||=e?As.WARN:As.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=m(Gr),s=m(Dr),a=m(ge)}catch{return bU(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Xi(()=>s.add())),i[l]=TU(i[l],r,a));let c=DU(()=>t.apply(this,i));return e?c instanceof N?c.pipe(dr(o.outsideAngular),ur(o.insideAngular),yS(a)):c instanceof Promise?Xi(()=>{let l=s.add();return new Promise((u,d)=>{c.then(f=>_e(a,()=>Xi(()=>u(f))),f=>_e(a,()=>Xi(()=>d(f)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Xi(()=>c):c instanceof N?c.pipe(dr(o.outsideAngular),ur(o.insideAngular)):Xi(()=>c)});var Tt=class{constructor(e){return e}},eo=class{constructor(){return tf()}};function SU(t){return t&&t.length===1?t[0]:new Tt($i())}var s_=new D("angularfire2._apps"),AU={provide:Tt,useFactory:SU,deps:[[new It,s_]]},MU={provide:eo,deps:[[new It,s_]]};function RU(t){return(e,n)=>{let r=n.get(Sr);ve("angularfire",Wr.full,"core"),ve("angularfire",Wr.full,"app"),ve("angular",rb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Tt(i)}}function CS(t,...e){return St([AU,MU,{provide:s_,useFactory:RU(t),multi:!0,deps:[ee,we,Gr,...e]}])}var IS=rn(Fv,!0);var Uf=class t{constructor(e){this.app=e;this.db=Ss(this.app)}db;getPizzas(){let e=vt(this.db,"pizzas");return new N(n=>{Ji(e,r=>{let i=[];r.forEach(o=>{let s=o.val();i.push(_({id:o.key||""},s))}),n.next(i)},r=>{n.error(r)})})}getPizzaById(e){let n=vt(this.db,`pizzas/${e}`);return new N(r=>{Ji(n,i=>{let o=i.val();o?r.next(_({id:i.key||""},o)):r.next(void 0)},i=>{r.error(i)})})}addReserva(e){let n=vt(this.db,"reservas");return Promise.resolve(Uc(n,e))}static \u0275fac=function(n){return new(n||t)(A(Tt))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var PU=new Map,OU={activated:!1,tokenObservers:[]},xU={initialized:!1,enabled:!1};function on(t){return PU.get(t)||Object.assign({},OU)}function SS(){return xU}var kU="https://content-firebaseappcheck.googleapis.com/v1";var FU="exchangeDebugToken",bS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Kte=24*60*60*1e3;var l_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return p(this,null,function*(){this.stop();try{this.pending=new Qt,this.pending.promise.catch(n=>{}),yield LU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Qt,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function LU(t){return new Promise(e=>{setTimeout(e,t)})}var VU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},qr=new Jt("appCheck","AppCheck",VU);function AS(t){if(!on(t).activated)throw qr.create("use-before-activation",{appName:t.name})}function MS(r,i){return p(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(h){throw qr.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw qr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw qr.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function RS(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${kU}/projects/${n}/apps/${r}:${FU}?key=${i}`,body:{debug_token:e}}}var jU="firebase-app-check-database",UU=1,u_="firebase-app-check-store";var Bf=null;function BU(){return Bf||(Bf=new Promise((t,e)=>{try{let n=indexedDB.open(jU,UU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(qr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(u_,{keyPath:"compositeKey"})}}}catch(n){e(qr.create("storage-open",{originalErrorMessage:n?.message}))}}),Bf)}function $U(t,e){return HU(zU(t),e)}function HU(t,e){return p(this,null,function*(){let r=(yield BU()).transaction(u_,"readwrite"),o=r.objectStore(u_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(qr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function zU(t){return`${t.options.appId}-${t.name}`}var $c=new Nn("@firebase/app-check");function a_(t,e){return Zd()?$U(t,e).catch(n=>{$c.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function NS(){return SS().enabled}function PS(){return p(this,null,function*(){let t=SS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var WU={error:"UNKNOWN_ERROR"};function GU(t){return ls.encodeString(JSON.stringify(t),!1)}function d_(t,e=!1,n=!1){return p(this,null,function*(){let r=t.app;AS(r);let i=on(r),o=i.token,s;if(o&&!Hc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Hc(l)?o=l:yield a_(r,void 0))}if(!e&&o&&Hc(o))return{token:o.token};let a=!1;if(NS())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=MS(RS(r,yield PS()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield a_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$c.warn(l.message):n&&$c.error(l),c_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield on(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$c.warn(l.message):n&&$c.error(l),s=l}let c;return o?s?Hc(o)?c={token:o.token,internalError:s}:c=c_(s):(c={token:o.token},i.token=o,yield a_(r,o)):c=c_(s),a&&QU(r,c),c})}function qU(t){return p(this,null,function*(){let e=t.app;AS(e);let{provider:n}=on(e);if(NS()){let r=yield PS(),{token:i}=yield MS(RS(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function YU(t,e,n,r){let{app:i}=t,o=on(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Hc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),DS(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>DS(t))}function OS(t,e){let n=on(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function DS(t){let{app:e}=t,n=on(e),r=n.tokenRefresher;r||(r=KU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function KU(t){let{app:e}=t;return new l_(()=>p(null,null,function*(){let n=on(e),r;if(n.token?r=yield d_(t,!0):r=yield d_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=on(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},bS.RETRIAL_MIN_WAIT,bS.RETRIAL_MAX_WAIT)}function QU(t,e){let n=on(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hc(t){return t.expireTimeMillis-Date.now()>0}function c_(t){return{token:GU(WU),error:t}}var f_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=on(this.app);for(let n of e)OS(this.app,n.next);return Promise.resolve()}};function ZU(t,e){return new f_(t,e)}function JU(t){return{getToken:e=>d_(t,e),getLimitedUseToken:()=>qU(t),addTokenListener:e=>YU(t,"INTERNAL",e),removeTokenListener:e=>OS(t.app,e)}}var XU="@firebase/app-check",e2="0.10.1";var t2="app-check",TS="app-check-internal";function n2(){Xt(new ot(t2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return ZU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(TS).initialize()})),Xt(new ot(TS,t=>{let e=t.getProvider("app-check").getImmediate();return JU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ve(XU,e2)}n2();var r2="app-check";var Rs=class{constructor(){return Ms(r2)}};var i2=["localhost","0.0.0.0","127.0.0.1"],cne=typeof window<"u"&&i2.includes(window.location.hostname);function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QS=KS,ZS=new Jt("auth","Firebase",KS());var qf=new Nn("@firebase/auth");function o2(t,...e){qf.logLevel<=te.WARN&&qf.warn(`Auth (${Ur}): ${t}`,...e)}function Hf(t,...e){qf.logLevel<=te.ERROR&&qf.error(`Auth (${Ur}): ${t}`,...e)}function Vn(t,...e){throw L_(t,...e)}function to(t,...e){return L_(t,...e)}function JS(t,e,n){let r=Object.assign(Object.assign({},QS()),{[e]:n});return new Jt("auth","Firebase",r).create(e,{appName:t.name})}function cr(t){return JS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZS.create(t,...e)}function x(t,e,...n){if(!t)throw L_(e,...n)}function sr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hf(e),new Error(e)}function Qr(t,e){t||sr(e)}function m_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function s2(){return xS()==="http:"||xS()==="https:"}function xS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function a2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s2()||r0()||"connection"in navigator)?navigator.onLine:!0}function c2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var no=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qr(n>e,"Short delay should be less than long delay!"),this.isMobile=uc()||Qd()}get(){return a2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function V_(t,e){Qr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Yf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var l2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var u2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],d2=new no(3e4,6e4);function Zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Jr(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return XS(t,i,()=>p(null,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Ui(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let h=Object.assign({method:e,headers:f},l);return n0()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(h.credentials="include"),Yf.fetch()(yield eA(t,t.config.apiHost,n,d),h)}))})}function XS(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},l2),e);try{let i=new v_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw $f(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw $f(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw $f(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw JS(t,u,l);Vn(t,u)}}catch(i){if(i instanceof Zt)throw i;Vn(t,"network-request-failed",{message:String(i)})}})}function Jc(o,s,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let l=yield Jr(t,e,n,r,i);return"mfaPendingCredential"in l&&Vn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function eA(t,e,n,r){return p(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?V_(t.config,i):`${t.config.apiScheme}://${i}`;return u2.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function f2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var v_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(to(this.auth,"network-request-failed")),d2.get())})}};function $f(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=to(t,e,r);return i.customData._tokenResponse=n,i}function kS(t){return t!==void 0&&t.enterprise!==void 0}var y_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return f2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function h2(t,e){return p(this,null,function*(){return Jr(t,"GET","/v2/recaptchaConfig",Zr(t,e))})}function p2(t,e){return p(this,null,function*(){return Jr(t,"POST","/v1/accounts:delete",e)})}function Kf(t,e){return p(this,null,function*(){return Jr(t,"POST","/v1/accounts:lookup",e)})}function Wc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function j_(t,e=!1){return p(this,null,function*(){let n=Ae(t),r=yield n.getIdToken(e),i=U_(r);x(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Wc(h_(i.auth_time)),issuedAtTime:Wc(h_(i.iat)),expirationTime:Wc(h_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function h_(t){return Number(t)*1e3}function U_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{let i=as(n);return i?JSON.parse(i):(Hf("Failed to decode base64 JWT payload"),null)}catch(i){return Hf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FS(t){let e=U_(t);return x(e,"internal-error"),x(typeof e.exp<"u","internal-error"),x(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qc(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Zt&&g2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function g2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var __=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qf(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield qc(t,Kf(n,{idToken:r}));x(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tA(o.providerUserInfo):[],a=m2(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Yc(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function B_(t){return p(this,null,function*(){let e=Ae(t);yield Qf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function m2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tA(t){return t.map(e=>{var{providerId:n}=e,r=zh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function v2(t,e){return p(this,null,function*(){let n=yield XS(t,{},()=>p(null,null,function*(){let r=Ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield eA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(c.credentials="include"),Yf.fetch()(s,c)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function y2(t,e){return p(this,null,function*(){return Jr(t,"POST","/v2/accounts:revokeToken",Zr(t,e))})}var Gc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x(typeof e.idToken<"u","internal-error"),x(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){x(e.length!==0,"internal-error");let n=FS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield v2(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(x(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return sr("not implemented")}};function Yr(t,e){x(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Kr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=zh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new __(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield qc(this,this.stsTokenManager.getToken(this.auth,e));return x(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return j_(this,e)}reload(){return B_(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Qf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(ht(this.auth.app))return Promise.reject(cr(this.auth));let e=yield this.getIdToken();return yield qc(this,p2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,C=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:oe,emailVerified:Z,isAnonymous:Un,providerData:ks,stsTokenManager:cl}=n;x(oe&&cl,e,"internal-error");let pM=Gc.fromJSON(this.name,cl);x(typeof oe=="string",e,"internal-error"),Yr(d,e.name),Yr(f,e.name),x(typeof Z=="boolean",e,"internal-error"),x(typeof Un=="boolean",e,"internal-error"),Yr(h,e.name),Yr(g,e.name),Yr(y,e.name),Yr(v,e.name),Yr(C,e.name),Yr($,e.name);let wh=new t({uid:oe,auth:e,email:f,emailVerified:Z,displayName:d,isAnonymous:Un,photoURL:g,phoneNumber:h,tenantId:y,stsTokenManager:pM,createdAt:C,lastLoginAt:$});return ks&&Array.isArray(ks)&&(wh.providerData=ks.map(gM=>Object.assign({},gM))),v&&(wh._redirectEventId=v),wh}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Gc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qf(o),o})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?tA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Gc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var LS=new Map;function ar(t){Qr(t instanceof Function,"Expected a class definition");let e=LS.get(t);return e?(Qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LS.set(t,e),e)}var _2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),E_=_2;function zf(t,e,n){return`firebase:${t}:${e}:${n}`}var Zf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=zf(this.userKey,i.apiKey,o),this.fullPersistenceKey=zf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Kf(this.auth,{idToken:e}).catch(()=>{});return n?Kr._fromGetAccountInfoResponse(this.auth,n,e):null}return Kr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(ar(E_),e,r);let i=(yield Promise.all(n.map(l=>p(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ar(E_),s=zf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d;if(typeof u=="string"){let f=yield Kf(e,{idToken:u}).catch(()=>{});if(!f)break;d=yield Kr._fromGetAccountInfoResponse(e,f,u)}else d=Kr._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>p(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function VS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aA(e))return"Blackberry";if(cA(e))return"Webos";if(rA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(sA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function nA(t=Ze()){return/firefox\//i.test(t)}function rA(t=Ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(t=Ze()){return/crios\//i.test(t)}function oA(t=Ze()){return/iemobile/i.test(t)}function sA(t=Ze()){return/android/i.test(t)}function aA(t=Ze()){return/blackberry/i.test(t)}function cA(t=Ze()){return/webos/i.test(t)}function $_(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E2(t=Ze()){var e;return $_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C2(){return i0()&&document.documentMode===10}function lA(t=Ze()){return $_(t)||sA(t)||cA(t)||aA(t)||/windows phone/i.test(t)||oA(t)}function uA(t,e=[]){let n;switch(t){case"Browser":n=VS(Ze());break;case"Worker":n=`${VS(Ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ur}/${r}`}var C_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function I2(n){return p(this,arguments,function*(t,e={}){return Jr(t,"GET","/v2/passwordPolicy",Zr(t,e))})}var w2=6,I_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:w2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var w_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jf(this),this.idTokenSubscription=new Jf(this),this.beforeStateQueue=new C_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Zf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield Kf(this,{idToken:e}),r=yield Kr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(ht(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Qf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=c2()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(ht(this.app))return Promise.reject(cr(this));let n=e?Ae(e):null;return n&&x(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&x(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return ht(this.app)?Promise.reject(cr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ht(this.app)?Promise.reject(cr(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield I2(this),n=new I_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield y2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ar(e)||this._popupRedirectResolver;x(n,this,"argument-error"),this.redirectPersistenceManager=yield Zf.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;if(ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&o2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function io(t){return Ae(t)}var Jf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=l0(n=>this.observer=n)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var oh={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b2(t){oh=t}function dA(t){return oh.loadJS(t)}function D2(){return oh.recaptchaEnterpriseScript}function T2(){return oh.gapiScript}function fA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var b_=class{constructor(){this.enterprise=new D_}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},D_=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var S2="recaptcha-enterprise",hA="NO_RECAPTCHA",T_=class{constructor(e){this.type=S2,this.auth=io(e)}verify(e="verify",n=!1){return p(this,null,function*(){function r(o){return p(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>p(null,null,function*(){h2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new y_(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;kS(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(hA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new b_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&kS(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=D2();c.length!==0&&(c+=a),dA(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function zc(t,e,n,r=!1,i=!1){return p(this,null,function*(){let o=new T_(t),s;if(i)s=hA;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function S_(t,e,n,r,i){return p(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield zc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>p(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield zc(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield zc(t,e,n);return r(t,a).catch(c=>p(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let u=yield zc(t,e,n,!1,!0);return r(t,u)}return Promise.reject(c)}))}else{let a=yield zc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function H_(t,e){let n=fs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Rn(o,e??{}))return i;Vn(i,"already-initialized")}return n.initialize({options:e})}function A2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ar);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function z_(t,e,n){let r=io(t);x(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=pA(e),{host:s,port:a}=M2(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){x(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),x(Rn(l,r.config.emulator)&&Rn(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Vr(s)?(Yd(`${o}//${s}${c}`),Kd("Auth",!0)):i||R2()}function pA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M2(t){let e=pA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:jS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:jS(s)}}}function jS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function R2(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Kc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}};function N2(t,e){return p(this,null,function*(){return Jr(t,"POST","/v1/accounts:signUp",e)})}function P2(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithPassword",Zr(t,e))})}function O2(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))})}function x2(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))})}var Qc=class t extends Kc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,n,"signInWithPassword",P2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return O2(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}})}_linkToIdToken(e,n){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,r,"signUpPassword",N2,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return x2(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function p_(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signInWithIdp",Zr(t,e))})}function k2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F2(t){let e=us(ds(t)).link,n=e?us(ds(e)).deep_link_id:null,r=us(ds(t)).deep_link_id;return(r?us(ds(r)).link:null)||r||n||e||t}var Xf=class t{constructor(e){var n,r,i,o,s,a;let c=us(ds(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=k2((i=c.mode)!==null&&i!==void 0?i:null);x(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=F2(e);try{return new t(n)}catch{return null}}};var gA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Qc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Xf.parseLink(r);return x(i,"argument-error"),Qc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),eh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var A_=class extends eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function L2(t,e){return p(this,null,function*(){return Jc(t,"POST","/v1/accounts:signUp",Zr(t,e))})}var Ns=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let o=yield Kr._fromIdTokenResponse(e,r,i),s=US(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=US(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function US(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var M_=class t extends Zt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function mA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?M_._fromErrorAndOperation(t,o,e,r):o})}function V2(t,e,n=!1){return p(this,null,function*(){let r=yield qc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ns._forOperation(t,"link",r)})}function j2(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(ht(r.app))return Promise.reject(cr(r));let i="reauthenticate";try{let o=yield qc(t,mA(r,i,e,t),n);x(o.idToken,r,"internal-error");let s=U_(o.idToken);x(s,r,"internal-error");let{sub:a}=s;return x(t.uid===a,r,"user-mismatch"),Ns._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Vn(r,"user-mismatch"),o}})}function vA(t,e,n=!1){return p(this,null,function*(){if(ht(t.app))return Promise.reject(cr(t));let r="signIn",i=yield mA(t,r,e),o=yield Ns._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function W_(t,e){return p(this,null,function*(){return vA(io(t),e)})}function yA(t){return p(this,null,function*(){let e=io(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function G_(t,e,n){return p(this,null,function*(){if(ht(t.app))return Promise.reject(cr(t));let r=io(t),s=yield S_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",L2,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&yA(t),c}),a=yield Ns._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function q_(t,e,n){return ht(t.app)?Promise.reject(cr(t)):W_(Ae(t),gA.credential(e,n)).catch(r=>p(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&yA(t),r}))}function sh(t,e,n,r){return Ae(t).onIdTokenChanged(e,n,r)}function Y_(t,e,n){return Ae(t).beforeAuthStateChanged(e,n)}function ah(t,e,n,r){return Ae(t).onAuthStateChanged(e,n,r)}function K_(t){return Ae(t).signOut()}var th="__sak";var nh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var U2=1e3,B2=10,$2=(()=>{class t extends nh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);C2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,B2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},U2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield ei(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield ei(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield ei(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),_A=$2;var H2=(()=>{class t extends nh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Q_=H2;function z2(t){return Promise.all(t.map(e=>p(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var W2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,s)})),l=yield z2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function EA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var R_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=EA("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ln(){return window}function G2(t){Ln().location.href=t}function CA(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}function q2(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Y2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function K2(){return CA()?self:null}var IA="firebaseLocalStorageDb",Q2=1,rh="firebaseLocalStorage",wA="fbase_key",ro=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ch(t,e){return t.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function Z2(){let t=indexedDB.deleteDatabase(IA);return new ro(t).toPromise()}function N_(){let t=indexedDB.open(IA,Q2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(rh,{keyPath:wA})}catch(i){n(i)}}),t.addEventListener("success",()=>p(null,null,function*(){let r=t.result;r.objectStoreNames.contains(rh)?e(r):(r.close(),yield Z2(),e(yield N_()))}))})}function BS(t,e,n){return p(this,null,function*(){let r=ch(t,!0).put({[wA]:e,value:n});return new ro(r).toPromise()})}function J2(t,e){return p(this,null,function*(){let n=ch(t,!1).get(e),r=yield new ro(n).toPromise();return r===void 0?null:r.value})}function $S(t,e){let n=ch(t,!0).delete(e);return new ro(n).toPromise()}var X2=800,eB=3,tB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield N_(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>eB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return CA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=W2._getInstance(K2()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield q2(),!this.activeServiceWorker)return;this.sender=new R_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Y2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield N_();return yield BS(n,th,"1"),yield $S(n,th),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>BS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>J2(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>$S(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(o=>{let s=ch(o,!1).getAll();return new ro(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),X2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),bA=tB;var mne=fA("rcb"),vne=new no(3e4,6e4);function nB(t,e){return e?ar(e):(x(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Zc=class extends Kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return p_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return p_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return p_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function rB(t){return vA(t.auth,new Zc(t),t.bypassAuthState)}function iB(t){let{auth:e,user:n}=t;return x(n,e,"internal-error"),j2(n,new Zc(t),t.bypassAuthState)}function oB(t){return p(this,null,function*(){let{auth:e,user:n}=t;return x(n,e,"internal-error"),V2(n,new Zc(t),t.bypassAuthState)})}var P_=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rB;case"linkViaPopup":case"linkViaRedirect":return oB;case"reauthViaPopup":case"reauthViaRedirect":return iB;default:Vn(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var yne=new no(2e3,1e4);var sB="pendingRedirect",Wf=new Map,O_=class t extends P_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=Wf.get(this.auth._key());if(!e){try{let r=(yield aB(this.resolver,this.auth))?yield ei(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return ei(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,ei(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function aB(t,e){return p(this,null,function*(){let n=uB(e),r=lB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function cB(t,e){Wf.set(t._key(),e)}function lB(t){return ar(t._redirectPersistence)}function uB(t){return zf(sB,t.config.apiKey,t.name)}function dB(t,e,n=!1){return p(this,null,function*(){if(ht(t.app))return Promise.reject(cr(t));let r=io(t),i=nB(r,e),s=yield new O_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var fB=10*60*1e3,x_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(to(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fB&&this.cachedEventUids.clear(),this.cachedEventUids.has(HS(e))}saveEventToCache(e){this.cachedEventUids.add(HS(e)),this.lastProcessedEventTime=Date.now()}};function HS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(t);default:return!1}}function pB(n){return p(this,arguments,function*(t,e={}){return Jr(t,"GET","/v1/projects",e)})}var gB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mB=/^https?/;function vB(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield pB(t);for(let n of e)try{if(yB(n))return}catch{}Vn(t,"unauthorized-domain")})}function yB(t){let e=m_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!mB.test(n))return!1;if(gB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _B=new no(3e4,6e4);function zS(){let t=Ln().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EB(t){return new Promise((e,n)=>{var r,i,o;function s(){zS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zS(),n(to(t,"network-request-failed"))},timeout:_B.get()})}if(!((i=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ln().gapi)===null||o===void 0)&&o.load)s();else{let a=fA("iframefcb");return Ln()[a]=()=>{gapi.load?s():n(to(t,"network-request-failed"))},dA(`${T2()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Gf=null,e})}var Gf=null;function CB(t){return Gf=Gf||EB(t),Gf}var IB=new no(5e3,15e3),wB="__/auth/iframe",bB="emulator/auth/iframe",DB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SB(t){let e=t.config;x(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?V_(e,bB):`https://${t.config.authDomain}/${wB}`,r={apiKey:e.apiKey,appName:t.name,v:Ur},i=TB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ui(r).slice(1)}`}function AB(t){return p(this,null,function*(){let e=yield CB(t),n=Ln().gapi;return x(n,t,"internal-error"),e.open({where:document.body,url:SB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DB,dontclear:!0},r=>new Promise((i,o)=>p(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=to(t,"network-request-failed"),a=Ln().setTimeout(()=>{o(s)},IB.get());function c(){Ln().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var MB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RB=500,NB=600,PB="_blank",OB="http://localhost",ih=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xB(t,e,n,r=RB,i=NB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},MB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();n&&(a=iA(l)?PB:n),nA(l)&&(e=e||OB,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(E2(l)&&a!=="_self")return kB(e||"",a),new ih(null);let d=window.open(e||"",a,u);x(d,t,"popup-blocked");try{d.focus()}catch{}return new ih(d)}function kB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var FB="__/auth/handler",LB="emulator/auth/handler",VB=encodeURIComponent("fac");function WS(t,e,n,r,i,o){return p(this,null,function*(){x(t.config.authDomain,t,"auth-domain-config-required"),x(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ur,eventId:i};if(e instanceof eh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",dc(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof A_){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${VB}=${encodeURIComponent(c)}`:"";return`${jB(t)}?${Ui(a).slice(1)}${l}`})}function jB({config:t}){return t.emulator?V_(t,LB):`https://${t.authDomain}/${FB}`}var g_="webStorageSupport",k_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q_,this._completeRedirectFn=dB,this._overrideRedirectResult=cB}_openPopup(e,n,r,i){return p(this,null,function*(){var o;Qr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield WS(e,n,r,m_(),i);return xB(e,s,EA())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let o=yield WS(e,n,r,m_(),i);return G2(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Qr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield AB(e),r=new x_(e);return n.register("authEvent",i=>(x(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(g_,{type:g_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[g_];s!==void 0&&n(!!s),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||rA()||$_()}},TA=k_;var GS="@firebase/auth",qS="1.10.8";var F_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function UB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BB(t){Xt(new ot("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;x(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uA(t)},l=new w_(r,i,o,c);return A2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xt(new ot("auth-internal",e=>{let n=io(e.getProvider("auth").getImmediate());return(r=>new F_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ve(GS,qS,UB(t)),ve(GS,qS,"esm2017")}var $B=5*60,HB=Iv("authIdTokenMaxAge")||$B,YS=null,zB=t=>e=>p(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HB)return;let i=n?.token;YS!==i&&(YS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Z_(t=$i()){let e=fs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=H_(t,{popupRedirectResolver:TA,persistence:[bA,_A,Q_]}),r=Iv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=zB(o.toString());Y_(n,s,()=>s(n.currentUser)),sh(n,a=>s(a))}}let i=Ev("auth");return i&&z_(n,`http://${i}`),n}function WB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}b2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=to("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",WB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BB("Browser");function AA(t){return new N(function(e){var n=ah(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var MA="auth",oo=class{constructor(e){return e}},Xc=class{constructor(){return Ms(MA)}};var J_=new D("angularfire2.auth-instances");function P$(t,e){let n=Bc(MA,t,e);return n&&new oo(n)}function O$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new oo(r)}}var x$={provide:Xc,deps:[[new It,J_]]},k$={provide:oo,useFactory:P$,deps:[[new It,J_],Tt]};function RA(t,...e){return ve("angularfire",Wr.full,"auth"),St([k$,x$,{provide:J_,useFactory:O$(t),multi:!0,deps:[ee,we,Gr,eo,[new It,Rs],...e]}])}var NA=rn(AA,!0);var PA=rn(G_,!0,2);var OA=rn(Z_,!0);var xA=rn(q_,!0,2);var kA=rn(K_,!0,2);var Vt=class t{constructor(e){this.auth=e;this.user$=NA(this.auth)}user$;register(e,n){return PA(this.auth,e,n)}login(e,n){return xA(this.auth,e,n)}logout(){return kA(this.auth)}static \u0275fac=function(n){return new(n||t)(A(oo))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var jn=class t{constructor(e){this.app=e;this.db=Ss(this.app)}db;getCart(e){if(!e)return S([]);let n=vt(this.db,`carts/${e}/items`);return new N(r=>{Ji(n,i=>{let o=[];i.forEach(s=>{let a=s.val();a&&s.key&&o.push({pizzaId:s.key,nombre:a.nombre||"Nombre Desconocido",precio:a.precio||0,cantidad:a.cantidad||0,imagenUrl:a.imagenUrl||""})}),r.next(o)},i=>{console.error("Error al obtener el carrito:",i),r.error(i)})})}addItemToCart(e,n,r){return p(this,null,function*(){if(!e)throw new Error("No hay usuario logueado para agregar al carrito.");let i=vt(this.db,`carts/${e}/items/${n.id}`),o=yield Vf(i),s,a;if(o.exists()){let c=o.val();s=c.cantidad+r,a=F(_({},c),{cantidad:s})}else s=r,a={pizzaId:n.id,nombre:n.nombre,precio:n.precio,cantidad:s,imagenUrl:n.imagenUrl};return yield Zi(i,a),s})}updateItemQuantity(e,n,r){return p(this,null,function*(){if(!e)throw new Error("No hay usuario logueado para actualizar el carrito.");if(r<=0){yield this.removeItemFromCart(e,n);return}let i=vt(this.db,`carts/${e}/items/${n}`),o=yield Vf(i);if(o.exists()){let s=o.val(),a=F(_({},s),{cantidad:r});yield Zi(i,a)}else throw new Error(`El \xEDtem con ID ${n} no se encontr\xF3 en el carrito para actualizar.`)})}removeItemFromCart(e,n){return p(this,null,function*(){if(!e)throw new Error("No hay usuario logueado para modificar el carrito.");let r=vt(this.db,`carts/${e}/items/${n}`);yield Lf(r)})}clearCart(e){return p(this,null,function*(){if(!e)throw new Error("No hay usuario logueado para vaciar el carrito.");let n=vt(this.db,`carts/${e}/items`);yield Lf(n)})}recordPurchase(e,n,r){return p(this,null,function*(){if(!e)throw new Error("No hay usuario logueado para registrar la compra.");let i=vt(this.db,`purchases/${e}`),o=Uc(i).key,s={purchaseId:o,userId:e,items:n,total:r,timestamp:new Date().toISOString()};return yield Zi(vt(this.db,`purchases/${e}/${o}`),s),s})}getPurchaseHistory(e){if(!e)return S([]);let n=vt(this.db,`purchases/${e}`);return new N(r=>{Ji(n,i=>{console.log("Snapshot de historial de compras (raw):",i.val());let o=[];i.forEach(s=>{let a=s.val();a&&o.push(a)}),console.log("Historial de compras (parseado):",o),r.next(o)},i=>{console.error("Error al obtener el historial de compras:",i),r.error(i)})})}static \u0275fac=function(n){return new(n||t)(A(Tt))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var L$=t=>["/pizza",t],V$=(t,e)=>e.id;function j$(t,e){if(t&1&&(w(0,"span",19),M(1),b()),t&2){let n=e.$implicit;O(),rt(" ",n," ")}}function U$(t,e){if(t&1){let n=Ot();w(0,"div",10)(1,"a",11),Ke(2,"div",12),w(3,"div",13)(4,"h2",14),M(5),b(),w(6,"p",15),M(7),b(),w(8,"div",16)(9,"span",17),M(10),$e(11,"currency"),b(),w(12,"div",18),Zn(13,j$,2,1,"span",19,cm),b()()()(),w(15,"div",20)(16,"input",21,0),se("change",function(){let i=We(n).$implicit,o=um(17);return Ge(i.selectedQuantity=o.valueAsNumber)}),b(),w(18,"button",22),se("click",function(){let i=We(n).$implicit,o=ue(3);return Ge(o.addToCart(i,i.selectedQuantity||1))}),M(19,"Agregar al Carrito"),b()()()}if(t&2){let n=e.$implicit,r=ue(3);O(),Pt("routerLink",dm(11,L$,n.id)),O(),ed("background-image","url("+(n.imagenUrl||"https://placehold.co/600x400/FF5733/FFFFFF?text="+r.encodeURIComponent(n.nombre||"Pizza"))+")"),O(3),xe(n.nombre),O(2),rt(" ",n.descripcion," "),O(3),rt(" ",Cn(11,6,n.precio,"UYU","$","1.2-2")," "),O(3),Jn(n.sabores)}}function B$(t,e){if(t&1&&(w(0,"div",8),Zn(1,U$,20,13,"div",10,V$),b()),t&2){let n=ue();O(),Jn(n)}}function $$(t,e){t&1&&(w(0,"div",9)(1,"p"),M(2,"Lo sentimos, no hay pizzas disponibles en este momento."),b()())}function H$(t,e){t&1&&(w(0,"div",6),qe(1,B$,3,0,"div",8)(2,$$,3,0,"div",9),b()),t&2&&(O(),Ye(e.length>0?1:2))}function z$(t,e){t&1&&(w(0,"div",7)(1,"p"),M(2,"Cargando el menu de pizzas..."),b()())}var lh=class t{constructor(e,n,r){this.pizzaService=e;this.authService=n;this.cartService=r}pizzas$;pizzasSubscription;ngOnInit(){this.pizzas$=this.pizzaService.getPizzas().pipe(P(e=>e.map(n=>F(_({},n),{selectedQuantity:1})))),this.pizzasSubscription=this.pizzas$.subscribe(e=>{console.log("Datos de pizzas recibidos:",e),e&&e.length>0&&(console.log("Primera pizza:",e[0]),console.log("URL de imagen de la primera pizza:",e[0].imagenUrl))},e=>{console.error("Error al obtener pizzas:",e)})}ngOnDestroy(){this.pizzasSubscription&&this.pizzasSubscription.unsubscribe()}addToCart(e,n){this.authService.user$.subscribe(r=>{if(r&&r.uid){let i=Math.max(1,n);this.cartService.addItemToCart(r.uid,e,i).then(o=>{alert(`"${e.nombre}" tiene ahora ${o} unidades en tu carrito.`),console.log(`Pizza "${e.nombre}" tiene ahora ${o} unidades en el carrito del usuario ${r.uid}`)}).catch(o=>{console.error("Error al agregar pizza al carrito:",o),alert("Error al agregar pizza al carrito. Por favor, int\xE9ntalo de nuevo.")})}else alert("Debes iniciar sesi\xF3n para agregar productos al carrito."),console.log("Usuario no logueado. No se puede agregar al carrito.")})}encodeURIComponent(e){return encodeURIComponent(e)}static \u0275fac=function(n){return new(n||t)(R(Uf),R(Vt),R(jn))};static \u0275cmp=wt({type:t,selectors:[["app-pizza-list"]],decls:9,vars:3,consts:[["quantityInput",""],[1,"main-container"],[1,"content-wrapper"],[1,"menu-header"],[1,"company-logo-container-list"],["src","img/logo.png","alt","Logo de la Empresa",1,"company-logo-list"],[1,"pizza-grid-container","relative"],[1,"loading-message"],[1,"pizza-grid"],[1,"no-pizzas-message"],[1,"pizza-card-3d"],[1,"pizza-card-link-content",3,"routerLink"],[1,"pizza-image"],[1,"pizza-details"],[1,"pizza-name"],[1,"pizza-description"],[1,"pizza-footer"],[1,"pizza-price"],[1,"pizza-flavors"],[1,"pizza-flavor-tag"],[1,"add-to-cart-section"],["type","number","min","1","value","1",1,"quantity-input",3,"change"],[1,"add-to-cart-button",3,"click"]],template:function(n,r){if(n&1&&(w(0,"div",1)(1,"div",2)(2,"header",3),M(3," Menu Piedraviva "),b(),w(4,"div",4),Ke(5,"img",5),b(),qe(6,H$,3,1,"div",6),$e(7,"async"),qt(8,z$,3,0,"div",7),b()()),n&2){let i;O(6),Ye((i=En(7,1,r.pizzas$))?6:8,i)}},dependencies:[Ft,Sn,er,Mi],styles:['@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6K6MmTpA.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6D6MmTpA.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6I6MmTpA.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6J6MmTpA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6H6Mk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#1a202c;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.content-wrapper[_ngcontent-%COMP%]{max-width:1280px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden}.menu-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1.5rem;text-align:center;font-size:3.5rem;font-weight:400;letter-spacing:.05em;text-transform:none;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;margin-bottom:2rem;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.company-logo-container-list[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem}.company-logo-list[_ngcontent-%COMP%]{max-width:180px;height:auto;display:inline-block;border-radius:.5rem;box-shadow:0 5px 15px #0000004d}.pizza-grid-container[_ngcontent-%COMP%]{perspective:1500px;padding:2rem}.pizza-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;justify-items:center}.pizza-card-3d[_ngcontent-%COMP%]{position:relative;transform-style:preserve-3d;transition:transform .5s cubic-bezier(.25,.8,.25,1),box-shadow .5s ease;border:2px solid #4a5568;box-shadow:0 10px 20px #0000004d;display:flex;flex-direction:column;background-color:#2d3748;border-radius:.75rem;overflow:hidden;width:100%;max-width:320px;padding-bottom:11rem}.pizza-card-3d[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 40px #0009;z-index:10}.pizza-card-link-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit;padding-bottom:1rem}.pizza-image[_ngcontent-%COMP%]{border-top-left-radius:.75rem;border-top-right-radius:.75rem;background-size:cover;background-position:center;display:block;min-height:192px;width:100%}.pizza-details[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem;line-height:1.2}.pizza-description[_ngcontent-%COMP%]{color:#a0aec0;margin-bottom:1rem;font-size:.875rem;flex-grow:1;height:4rem;overflow:hidden}.pizza-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:1rem;border-top:1px solid #4a5568}.pizza-price[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:800;color:#f6e05e}.pizza-flavors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:flex-end}.pizza-flavor-tag[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px;box-shadow:0 1px 2px #0000000d;white-space:nowrap}.add-to-cart-section[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;display:flex;flex-direction:column;align-items:center;padding:.75rem 1.5rem;background-color:#2d3748;border-top:1px solid #4a5568;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;box-shadow:0 -2px 10px #0003;transform:translateZ(1px);gap:.75rem;box-sizing:border-box}.quantity-input[_ngcontent-%COMP%]{width:80px;padding:.5rem;border:1px solid #4a5568;border-radius:.375rem;background-color:#1a202c;color:#e2e8f0;font-size:1rem;text-align:center;appearance:textfield;-moz-appearance:textfield;box-sizing:border-box}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.add-to-cart-button[_ngcontent-%COMP%]{width:100%;background-color:#f6e05e;color:#1a202c;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1.125rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a;box-sizing:border-box}.add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateZ(5px)}.add-to-cart-button[_ngcontent-%COMP%]:active{transform:translateZ(0) scale(.98)}.loading-message[_ngcontent-%COMP%], .no-pizzas-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:50vh;background-color:#2d3748;color:#a0aec0;font-size:1.25rem}']})};var W$=(t,e)=>e.pizzaId;function G$(t,e){if(t&1){let n=Ot();w(0,"button",25),se("click",function(){We(n);let i=ue().$implicit,o=ue(3);return Ge(o.saveQuantity(i))}),M(1,"Guardar"),b()}}function q$(t,e){if(t&1){let n=Ot();w(0,"div",11),Ke(1,"img",16),w(2,"div",17)(3,"h2",18),M(4),b(),w(5,"p",19),M(6),$e(7,"currency"),b()(),w(8,"div",20)(9,"input",21),se("input",function(i){let o=We(n).$implicit,s=ue(3);return Ge(s.onQuantityChange(o,i))}),b(),qe(10,G$,2,0,"button",22),w(11,"button",23),se("click",function(){let i=We(n).$implicit,o=ue(3);return Ge(o.removeItem(i))}),M(12,"Eliminar"),b()(),w(13,"span",24),M(14),$e(15,"currency"),b()()}if(t&2){let n=e.$implicit,r=ue(3);O(),Pt("src",n.imagenUrl||"https://placehold.co/100x100/FF5733/FFFFFF?text=Pizza",Vo)("alt",n.nombre),O(3),xe(n.nombre),O(2),xe(Cn(7,7,n.precio,"UYU","$","1.2-2")),O(3),Pt("value",n.cantidad),O(),Ye(r.hasEditedQuantity(n)?10:-1),O(4),xe(Cn(15,12,n.precio*n.cantidad,"UYU","$","1.2-2"))}}function Y$(t,e){if(t&1){let n=Ot();w(0,"div",10),Zn(1,q$,16,17,"div",11,W$),b(),w(3,"div",12)(4,"div",13)(5,"span"),M(6,"Total:"),b(),w(7,"span",14),M(8),$e(9,"async"),$e(10,"currency"),b()(),w(11,"button",15),se("click",function(){We(n);let i=ue(2);return Ge(i.checkout())}),M(12,"Comprar Ahora"),b()()}if(t&2){let n=ue(),r=ue();O(),Jn(n),O(7),xe(Cn(10,3,En(9,1,r.totalAmount$),"UYU","$","1.2-2"))}}function K$(t,e){t&1&&(w(0,"div",9)(1,"p"),M(2,"Tu carrito est\xE1 vac\xEDo. \xA1Agrega algunas pizzas deliciosas!"),b(),w(3,"a",26),M(4,"Ver Men\xFA"),b()())}function Q$(t,e){t&1&&qe(0,Y$,13,8)(1,K$,5,0,"div",9),t&2&&Ye(e.length>0?0:1)}function Z$(t,e){t&1&&(w(0,"div",7)(1,"p"),M(2,"Cargando tu carrito..."),b()())}function J$(t,e){if(t&1){let n=Ot();w(0,"div",8)(1,"button",27),se("click",function(){We(n);let i=ue();return Ge(i.viewPurchaseHistory())}),M(2,"Ver Historial de Compras"),b()()}}var uh=class t{constructor(e,n,r){this.cartService=e;this.authService=n;this.router=r;this.cartItems$=S([]),this.totalAmount$=S(0)}cartItems$;totalAmount$;currentUserSubscription;userId=null;showPurchaseHistoryButton=!1;editedQuantities=new Map;ngOnInit(){this.currentUserSubscription=this.authService.user$.pipe(Re(e=>(this.userId=e?e.uid:null,this.userId?(this.checkPurchaseHistory(this.userId),this.cartService.getCart(this.userId)):(this.showPurchaseHistoryButton=!1,S([])))),P(e=>(this.editedQuantities.clear(),console.log("Carrito actualizado desde Firebase:",e),e))).subscribe(e=>{this.cartItems$=S(e)}),this.totalAmount$=this.cartItems$.pipe(P(e=>this.calculateTotal(e)))}ngOnDestroy(){this.currentUserSubscription&&this.currentUserSubscription.unsubscribe()}checkPurchaseHistory(e){this.cartService.getPurchaseHistory(e).pipe(Ut(1),P(n=>(console.log("Historial de compras recibido en ShoppingCartComponent:",n),n.length>0))).subscribe(n=>{this.showPurchaseHistoryButton=n,console.log("\xBFTiene historial de compras al cargar (resultado final)?",n)})}calculateTotal(e){return e.reduce((n,r)=>n+r.precio*r.cantidad,0)}onQuantityChange(e,n){let r=n.target,i=parseInt(r.value,10);if(isNaN(i)||i<0)return;let o=new Map(this.editedQuantities);o.set(e.pizzaId,i),this.editedQuantities=o,console.log(`Cantidad de "${e.nombre}" editada a ${i} (localmente).`)}hasEditedQuantity(e){let n=this.editedQuantities.get(e.pizzaId);return n!==void 0&&n!==e.cantidad}saveQuantity(e){return p(this,null,function*(){if(!this.userId||!e.pizzaId){alert("Error: No se pudo identificar el usuario o el producto.");return}let n=this.editedQuantities.get(e.pizzaId);if(n===void 0||isNaN(n)||n<0){alert("Por favor, introduce una cantidad v\xE1lida.");return}try{yield this.cartService.updateItemQuantity(this.userId,e.pizzaId,n),alert(`Cantidad de "${e.nombre}" actualizada a ${n}.`),console.log(`Cantidad de "${e.nombre}" actualizada a ${n} en Firebase.`)}catch(r){console.error("Error al actualizar cantidad en Firebase:",r),alert("Error al actualizar la cantidad. Por favor, int\xE9ntalo de nuevo.")}})}removeItem(e){return p(this,null,function*(){if(this.userId&&e.pizzaId&&confirm(`\xBFEst\xE1s seguro de que quieres eliminar "${e.nombre}" del carrito?`))try{yield this.cartService.removeItemFromCart(this.userId,e.pizzaId),alert(`"${e.nombre}" eliminado del carrito.`),console.log(`"${e.nombre}" eliminado del carrito en Firebase.`)}catch(n){console.error("Error al eliminar \xEDtem de Firebase:",n),alert("Error al eliminar el \xEDtem del carrito. Por favor, int\xE9ntalo de nuevo.")}})}checkout(){return p(this,null,function*(){if(!this.userId){alert("Debes iniciar sesi\xF3n para completar la compra.");return}if(this.editedQuantities.size>0){alert("Por favor, guarda o descarta los cambios de cantidad antes de proceder con la compra.");return}let e=(yield this.cartItems$.pipe(P(r=>r),Bt()).toPromise())||[],n=this.calculateTotal(e);if(e.length===0){alert("Tu carrito est\xE1 vac\xEDo. Agrega productos antes de comprar.");return}if(confirm(`\xBFConfirmas la compra por un total de ${n?.toFixed(2)} Pesos Uruguayos?`))try{yield this.cartService.recordPurchase(this.userId,e,n),console.log("Compra registrada exitosamente."),yield this.cartService.clearCart(this.userId),alert("\xA1Compra realizada con \xE9xito! Tu carrito ha sido vaciado."),this.showPurchaseHistoryButton=!0,console.log("Carrito vaciado despu\xE9s de la compra.")}catch(r){console.error("Error al procesar la compra:",r),alert("Ocurri\xF3 un error al procesar tu compra. Por favor, int\xE9ntalo de nuevo.")}})}viewPurchaseHistory(){this.router.navigate(["/purchase-history"])}static \u0275fac=function(n){return new(n||t)(R(jn),R(Vt),R(Li))};static \u0275cmp=wt({type:t,selectors:[["app-shopping-cart"]],decls:13,vars:4,consts:[[1,"cart-main-container"],[1,"cart-content-wrapper"],[1,"back-button-container"],["routerLink","/",1,"back-button"],[1,"company-logo-container"],["src","https://placehold.co/150x50/FFDDC1/000000?text=Tu+Logo","alt","Logo de la Empresa",1,"company-logo"],[1,"cart-title"],[1,"loading-message-cart"],[1,"purchase-history-button-container"],[1,"empty-cart-message"],[1,"cart-items-grid"],[1,"cart-item-card"],[1,"cart-summary"],[1,"total-section"],[1,"total-amount"],[1,"checkout-button",3,"click"],[1,"cart-item-image",3,"src","alt"],[1,"item-details"],[1,"item-name"],[1,"item-price"],[1,"item-controls"],["type","number","min","1",1,"item-quantity-input",3,"input","value"],[1,"save-item-button"],[1,"remove-item-button",3,"click"],[1,"item-subtotal"],[1,"save-item-button",3,"click"],["routerLink","/",1,"back-to-menu-button"],[1,"view-history-button",3,"click"]],template:function(n,r){if(n&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),M(4,"\u2190 Seguir Comprando"),b()(),w(5,"div",4),Ke(6,"img",5),b(),w(7,"h1",6),M(8,"Tu Carrito de Compras"),b(),qe(9,Q$,2,1),$e(10,"async"),qt(11,Z$,3,0,"div",7),qe(12,J$,3,0,"div",8),b()()),n&2){let i;O(9),Ye((i=En(10,2,r.cartItems$))?9:11,i),O(3),Ye(r.showPurchaseHistoryButton?12:-1)}},dependencies:[Ft,Sn,er,Mi],styles:[".cart-main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#1a202c;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.cart-content-wrapper[_ngcontent-%COMP%]{max-width:800px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden;padding:2rem;position:relative}.back-button-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-button[_ngcontent-%COMP%]{display:inline-block;background-color:#4a5568;color:#e2e8f0;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#64748b}.company-logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.company-logo[_ngcontent-%COMP%]{max-width:150px;height:auto;display:inline-block}.cart-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;text-align:center;margin-bottom:2rem;color:#f6e05e;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.cart-items-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;margin-bottom:2rem}.cart-item-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#1a202c;border-radius:.5rem;box-shadow:0 5px 15px #0003;padding:1rem;gap:1rem;flex-wrap:wrap}.cart-item-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:.375rem;object-fit:cover;flex-shrink:0}.item-details[_ngcontent-%COMP%]{flex-grow:1}.item-name[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff;margin-bottom:.25rem}.item-price[_ngcontent-%COMP%]{font-size:1rem;color:#a0aec0}.item-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-shrink:0;margin-top:.5rem;width:100%;justify-content:center}@media (min-width: 640px){.item-controls[_ngcontent-%COMP%]{width:auto;margin-top:0;justify-content:flex-start}}.item-quantity-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:1px solid #4a5568;border-radius:.375rem;background-color:#2d3748;color:#e2e8f0;font-size:1rem;text-align:center;-moz-appearance:textfield}.item-quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .item-quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.save-item-button[_ngcontent-%COMP%]{background-color:#48bb78;color:#1a202c;padding:.5rem 1rem;border:none;border-radius:.375rem;font-size:.9rem;font-weight:600;cursor:pointer;transition:background-color .2s ease}.save-item-button[_ngcontent-%COMP%]:hover{background-color:#38a169}.remove-item-button[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;padding:.5rem 1rem;border:none;border-radius:.375rem;font-size:.9rem;font-weight:600;cursor:pointer;transition:background-color .2s ease}.remove-item-button[_ngcontent-%COMP%]:hover{background-color:#c53030}.item-subtotal[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#f6e05e;flex-shrink:0;margin-left:auto}@media (max-width: 639px){.cart-item-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.item-details[_ngcontent-%COMP%]{width:100%}.item-subtotal[_ngcontent-%COMP%]{margin-left:0;width:100%;text-align:right;margin-top:.5rem}}.cart-summary[_ngcontent-%COMP%]{background-color:#1a202c;border-radius:.5rem;padding:1.5rem;box-shadow:0 5px 15px #0003;display:flex;flex-direction:column;gap:1.5rem}.total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:1.5rem;font-weight:700;color:#fff}.total-amount[_ngcontent-%COMP%]{color:#f6e05e;font-size:2rem}.checkout-button[_ngcontent-%COMP%]{width:100%;background-color:#48bb78;color:#1a202c;padding:1rem 2rem;border:none;border-radius:.5rem;font-size:1.25rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 4px 6px #0000001a}.checkout-button[_ngcontent-%COMP%]:hover{background-color:#38a169;transform:translateY(-2px)}.checkout-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}.empty-cart-message[_ngcontent-%COMP%], .loading-message-cart[_ngcontent-%COMP%]{text-align:center;padding:3rem;font-size:1.25rem;color:#a0aec0}.back-to-menu-button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;background-color:#c53030;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-to-menu-button[_ngcontent-%COMP%]:hover{background-color:#a02020}.purchase-history-button-container[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.view-history-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a}.view-history-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-1px)}.view-history-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #0000001a}"]})};var X$=(t,e)=>e.purchaseId,eH=(t,e)=>e.pizzaId;function tH(t,e){t&1&&(w(0,"div",7)(1,"p"),M(2,"Cargando tu historial de compras..."),b()())}function nH(t,e){if(t&1&&(w(0,"div",16),Ke(1,"img",19),w(2,"div",20)(3,"span",21),M(4),b(),w(5,"span",22),M(6),b(),w(7,"span",23),M(8),$e(9,"currency"),b()()()),t&2){let n=e.$implicit;O(),Pt("src",n.imagenUrl||"https://placehold.co/50x50/FF5733/FFFFFF?text=Pizza",Vo)("alt",n.nombre),O(3),xe(n.nombre),O(2),rt("x",n.cantidad),O(2),xe(Cn(9,5,n.precio,"UYU","$","1.2-2"))}}function rH(t,e){if(t&1&&(w(0,"div",11)(1,"div",12)(2,"span",13),M(3),b(),w(4,"span",14),M(5),$e(6,"date"),b()(),w(7,"div",15),Zn(8,nH,10,10,"div",16,eH),b(),w(10,"div",17)(11,"span"),M(12,"Total de la Compra:"),b(),w(13,"span",18),M(14),$e(15,"currency"),b()()()),t&2){let n=e.$implicit;O(3),rt("Compra ID: ",n.purchaseId.substring(0,8),"..."),O(2),xe(hm(6,3,n.timestamp,"short")),O(3),Jn(n.items),O(6),xe(Cn(15,6,n.total,"UYU","$","1.2-2"))}}function iH(t,e){if(t&1&&(w(0,"div",9),Zn(1,rH,16,11,"div",11,X$),b()),t&2){let n=ue();O(),Jn(n)}}function oH(t,e){t&1&&(w(0,"div",10)(1,"p"),M(2,"No tienes compras registradas a\xFAn."),b(),w(3,"a",24),M(4,"Explorar Men\xFA"),b()())}function sH(t,e){t&1&&qe(0,iH,3,0,"div",9)(1,oH,5,0,"div",10),t&2&&Ye(e.length>0?0:1)}function aH(t,e){t&1&&(w(0,"div",8)(1,"p"),M(2,"Ocurri\xF3 un error al cargar el historial de compras."),b()())}function cH(t,e){if(t&1&&(qe(0,sH,2,1),$e(1,"async"),qt(2,aH,3,0,"div",8)),t&2){let n,r=ue();Ye((n=En(1,1,r.purchases$))?0:2,n)}}var dh=class t{constructor(e,n){this.authService=e;this.cartService=n;this.purchases$=S([])}purchases$;currentUserSubscription;userId=null;loading=!0;ngOnInit(){this.currentUserSubscription=this.authService.user$.pipe(Re(e=>(this.userId=e?e.uid:null,this.userId?(this.loading=!0,this.cartService.getPurchaseHistory(this.userId)):(this.loading=!1,S([])))),P(e=>(this.loading=!1,console.log("Historial de compras cargado:",e),e.sort((n,r)=>new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime())))).subscribe(e=>this.purchases$=S(e),e=>{console.error("Error al cargar el historial de compras:",e),this.loading=!1,this.purchases$=S([])})}ngOnDestroy(){this.currentUserSubscription&&this.currentUserSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||t)(R(Vt),R(jn))};static \u0275cmp=wt({type:t,selectors:[["app-purchase-history"]],decls:11,vars:1,consts:[[1,"history-main-container"],[1,"history-content-wrapper"],[1,"back-button-container"],["routerLink","/cart",1,"back-button"],[1,"company-logo-container"],["src","https://placehold.co/150x50/FFDDC1/000000?text=Tu+Logo","alt","Logo de la Empresa",1,"company-logo"],[1,"history-title"],[1,"loading-message-history"],[1,"error-loading-history"],[1,"purchases-grid"],[1,"empty-history-message"],[1,"purchase-card"],[1,"purchase-header"],[1,"purchase-id"],[1,"purchase-date"],[1,"purchase-items-list"],[1,"purchase-item"],[1,"purchase-total"],[1,"total-amount"],[1,"purchase-item-image",3,"src","alt"],[1,"purchase-item-details"],[1,"purchase-item-name"],[1,"purchase-item-quantity"],[1,"purchase-item-price"],["routerLink","/",1,"back-to-menu-button"]],template:function(n,r){n&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),M(4,"\u2190 Volver al Carrito"),b()(),w(5,"div",4),Ke(6,"img",5),b(),w(7,"h1",6),M(8,"Historial de Compras"),b(),qe(9,tH,3,0,"div",7)(10,cH,3,3),b()()),n&2&&(O(9),Ye(r.loading?9:10))},dependencies:[Ft,Sn,er,Mi,Nm],styles:[".history-main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#1a202c;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.history-content-wrapper[_ngcontent-%COMP%]{max-width:800px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden;padding:2rem;position:relative}.back-button-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-button[_ngcontent-%COMP%]{display:inline-block;background-color:#4a5568;color:#e2e8f0;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#64748b}.company-logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.company-logo[_ngcontent-%COMP%]{max-width:150px;height:auto;display:inline-block}.history-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;text-align:center;margin-bottom:2rem;color:#f6e05e;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.loading-message-history[_ngcontent-%COMP%], .empty-history-message[_ngcontent-%COMP%], .error-loading-history[_ngcontent-%COMP%]{text-align:center;padding:3rem;font-size:1.25rem;color:#a0aec0}.back-to-menu-button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;background-color:#c53030;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;text-decoration:none;font-weight:600;transition:background-color .3s ease}.back-to-menu-button[_ngcontent-%COMP%]:hover{background-color:#a02020}.purchases-grid[_ngcontent-%COMP%]{display:grid;gap:2rem}.purchase-card[_ngcontent-%COMP%]{background-color:#1a202c;border-radius:.5rem;box-shadow:0 5px 15px #0003;padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.purchase-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #4a5568;padding-bottom:.75rem;margin-bottom:.75rem}.purchase-id[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#a0aec0}.purchase-date[_ngcontent-%COMP%]{font-size:.9rem;color:#a0aec0}.purchase-items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.purchase-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;background-color:#2d3748;padding:.75rem;border-radius:.375rem;box-shadow:inset 0 1px 3px #0000001a}.purchase-item-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:.25rem;object-fit:cover;flex-shrink:0}.purchase-item-details[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.purchase-item-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;flex-basis:100%}@media (min-width: 640px){.purchase-item-name[_ngcontent-%COMP%]{flex-basis:auto}}.purchase-item-quantity[_ngcontent-%COMP%]{font-size:.875rem;color:#a0aec0;margin-left:auto}.purchase-item-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#f6e05e;margin-left:.5rem}.purchase-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-top:1px solid #4a5568;padding-top:1rem;margin-top:1rem;font-size:1.25rem;font-weight:700;color:#fff}.purchase-total[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{color:#f6e05e;font-size:1.5rem}"]})};var FA=[{path:"",component:lh},{path:"cart",component:uh},{path:"purchase-history",component:dh},{path:"**",redirectTo:""}];var tl=class{constructor(e){return e}},LA="database",eE=class{constructor(){return Ms(LA)}};var tE=new D("angularfire2.database-instances");function lH(t,e){let n=Bc(LA,t,e);return n&&new tl(n)}function uH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new tl(r)}}var dH={provide:eE,deps:[[new It,tE]]},fH={provide:tl,useFactory:lH,deps:[[new It,tE],Tt]};function VA(t,...e){return ve("angularfire",Wr.full,"rtdb"),St([fH,dH,{provide:tE,useFactory:uH(t),multi:!0,deps:[ee,we,Gr,eo,[new It,Xc],[new It,Rs],...e]}])}var jA=rn(Ss,!0);var UA={production:!1,firebaseConfig:{apiKey:"AIzaSyBwe-SvSjOdCdBfKG_Nv8hjJ4IE8Q-vS1g",authDomain:"piedraviva-20327.firebaseapp.com",projectId:"piedraviva-20327",storageBucket:"piedraviva-20327.firebasestorage.app",messagingSenderId:"895243777977",appId:"1:895243777977:web:8dff1a8e88b23df2c82868",measurementId:"G-HLK1QHRRQ8"}};function hH(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:i===0&&n!==0&&n%1e6===0&&r===0||!(i>=0&&i<=5)?4:5}var BA=["es-UY",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["d","l","m","m","j","v","s"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Set.","Oct.","Nov.","Dic."],["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]],[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}","{1} {0}","{1}, {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","\xA4\xA0#,##0.00","#E0"],"UYU","$","peso uruguayo",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:["US$","$"],UYU:["$"],UYW:["UP"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",hH];xb(BA);var $A={providers:[hv(FA),Hm(),CS(()=>IS(UA.firebaseConfig)),VA(()=>jA()),RA(()=>OA()),jn,{provide:Nr,useValue:"es-UY"}]};var ZA=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(R(Ar),R(Kn))};static \u0275dir=Oe({type:t})}return t})(),pH=(()=>{class t extends ZA{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Si(t)))(i||t)}})();static \u0275dir=Oe({type:t,features:[_n]})}return t})(),JA=new D("");var gH={provide:JA,useExisting:Wn(()=>_h),multi:!0};function mH(){let t=xt()?xt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var vH=new D(""),_h=(()=>{class t extends ZA{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!mH())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(R(Ar),R(Kn),R(vH,8))};static \u0275dir=Oe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Bo([gH]),_n]})}return t})();function yH(t){return t==null||_H(t)===0}function _H(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var oE=new D(""),XA=new D("");function EH(t){return yH(t.value)?{required:!0}:null}function HA(t){return null}function eM(t){return t!=null}function tM(t){return Qn(t)?de(t):t}function nM(t){let e={};return t.forEach(n=>{e=n!=null?_(_({},e),n):e}),Object.keys(e).length===0?null:e}function rM(t,e){return e.map(n=>n(t))}function CH(t){return!t.validate}function iM(t){return t.map(e=>CH(e)?e:n=>e.validate(n))}function IH(t){if(!t)return null;let e=t.filter(eM);return e.length==0?null:function(n){return nM(rM(n,e))}}function sE(t){return t!=null?IH(iM(t)):null}function wH(t){if(!t)return null;let e=t.filter(eM);return e.length==0?null:function(n){let r=rM(n,e).map(tM);return Gh(r).pipe(P(nM))}}function aE(t){return t!=null?wH(iM(t)):null}function zA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function bH(t){return t._rawValidators}function DH(t){return t._rawAsyncValidators}function nE(t){return t?Array.isArray(t)?t:[t]:[]}function hh(t,e){return Array.isArray(t)?t.includes(e):t===e}function WA(t,e){let n=nE(e);return nE(t).forEach(i=>{hh(n,i)||n.push(i)}),n}function GA(t,e){return nE(e).filter(n=>!hh(t,n))}var ph=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=aE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},xs=class extends ph{name;get formDirective(){return null}get path(){return null}},al=class extends ph{_parent=null;name=null;valueAccessor=null},gh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},TH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uoe=F(_({},TH),{"[class.ng-submitted]":"isSubmitted"}),oM=(()=>{class t extends gh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(R(al,2))};static \u0275dir=Oe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ba("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[_n]})}return t})(),sM=(()=>{class t extends gh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(R(xs,10))};static \u0275dir=Oe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ba("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[_n]})}return t})();var nl="VALID",fh="INVALID",Ps="PENDING",rl="DISABLED",Xr=class{},mh=class extends Xr{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ol=class extends Xr{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},sl=class extends Xr{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Os=class extends Xr{status;source;constructor(e,n){super(),this.status=e,this.source=n}},rE=class extends Xr{source;constructor(e){super(),this.source=e}},iE=class extends Xr{source;constructor(e){super(),this.source=e}};function aM(t){return(Eh(t)?t.validators:t)||null}function SH(t){return Array.isArray(t)?sE(t):t||null}function cM(t,e){return(Eh(e)?e.asyncValidators:t)||null}function AH(t){return Array.isArray(t)?aE(t):t||null}function Eh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function MH(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new I(1e3,"");if(!r[n])throw new I(1001,"")}function RH(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new I(1002,"")})}var vh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(e){ut(()=>this.statusReactive.set(e))}_status=$o(()=>this.statusReactive());statusReactive=fn(void 0);get valid(){return this.status===nl}get invalid(){return this.status===fh}get pending(){return this.status==Ps}get disabled(){return this.status===rl}get enabled(){return this.status!==rl}errors;get pristine(){return ut(this.pristineReactive)}set pristine(e){ut(()=>this.pristineReactive.set(e))}_pristine=$o(()=>this.pristineReactive());pristineReactive=fn(!0);get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(e){ut(()=>this.touchedReactive.set(e))}_touched=$o(()=>this.touchedReactive());touchedReactive=fn(!1);get untouched(){return!this.touched}_events=new Ce;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GA(e,this._rawAsyncValidators))}hasValidator(e){return hh(this._rawValidators,e)}hasAsyncValidator(e){return hh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(F(_({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new sl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new sl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(F(_({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ol(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ol(!0,r))}markAsPending(e={}){this.status=Ps;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Os(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(F(_({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=rl,this.errors=null,this._forEachChild(i=>{i.disable(F(_({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mh(this.value,r)),this._events.next(new Os(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(F(_({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=nl,this._forEachChild(r=>{r.enable(F(_({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(F(_({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nl||this.status===Ps)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mh(this.value,n)),this._events.next(new Os(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(F(_({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rl:nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ps,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=tM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Os(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new he,this.statusChanges=new he}_calculateStatus(){return this._allControlsDisabled()?rl:this.errors?fh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ps)?Ps:this._anyControlsHaveStatus(fh)?fh:nl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ol(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new sl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Eh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=SH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AH(this._rawAsyncValidators)}},yh=class extends vh{constructor(e,n,r){super(aM(n),cM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){RH(this,!0,e),Object.keys(e).forEach(r=>{MH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var cE=new D("",{providedIn:"root",factory:()=>lE}),lE="always";function NH(t,e){return[...e.path,t]}function lM(t,e,n=lE){uM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),OH(t,e),kH(t,e),xH(t,e),PH(t,e)}function qA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function PH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function uM(t,e){let n=bH(t);e.validator!==null?t.setValidators(zA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=DH(t);e.asyncValidator!==null?t.setAsyncValidators(zA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();qA(e._rawValidators,i),qA(e._rawAsyncValidators,i)}function OH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&dM(t,e)})}function xH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&dM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function dM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function kH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function FH(t,e){t==null,uM(t,e)}function LH(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function VH(t){return Object.getPrototypeOf(t.constructor)===pH}function jH(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function UH(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===_h?n=o:VH(o)?r=o:i=o}),i||r||n||null}var BH={provide:xs,useExisting:Wn(()=>uE)},il=Promise.resolve(),uE=(()=>{class t extends xs{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=$o(()=>this.submittedReactive());submittedReactive=fn(!1);_directives=new Set;form;ngSubmit=new he;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new yh({},sE(n),aE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){il.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),lM(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){il.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){il.then(()=>{let r=this._findContainer(n.path),i=new yh({});FH(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){il.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){il.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),jH(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new rE(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new iE(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(R(oE,10),R(XA,10),R(cE,8))};static \u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bo([BH]),_n]})}return t})();function YA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var $H=class extends vh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(aM(n),cM(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Eh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(KA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){KA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var HH={provide:al,useExisting:Wn(()=>dE)},QA=Promise.resolve(),dE=(()=>{class t extends al{_changeDetectorRef;callSetDisabledState;control=new $H;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new he;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=UH(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),LH(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){QA.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Or(r);QA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?NH(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(R(xs,9),R(oE,10),R(XA,10),R(JA,10),R(Pr,8),R(cE,8))};static \u0275dir=Oe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bo([HH]),_n,Yn]})}return t})();var fM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var zH=(()=>{class t{_validator=HA;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):HA,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Oe({type:t,features:[Yn]})}return t})();var WH={provide:oE,useExisting:Wn(()=>fE),multi:!0};var fE=(()=>{class t extends zH{required;inputName="required";normalizeInput=Or;createValidator=n=>EH;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Si(t)))(i||t)}})();static \u0275dir=Oe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Uo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Bo([WH]),_n]})}return t})();var GH=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=yn({type:t});static \u0275inj=$t({})}return t})();var hM=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:cE,useValue:n.callSetDisabledState??lE}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=yn({type:t});static \u0275inj=$t({imports:[GH]})}return t})();function YH(t,e){if(t&1&&(w(0,"p",14),M(1),b()),t&2){let n=ue();O(),xe(n.errorMessage)}}var Ch=class t{constructor(e){this.authService=e}close=new he;loggedIn=new he;isLoginMode=!0;email="";password="";errorMessage=null;loading=!1;toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=null}onSubmit(){return p(this,null,function*(){this.errorMessage=null,this.loading=!0;try{this.isLoginMode?(yield this.authService.login(this.email,this.password),console.log("Inicio de sesi\xF3n exitoso")):(yield this.authService.register(this.email,this.password),console.log("Registro exitoso")),this.loggedIn.emit(),this.close.emit()}catch(e){switch(console.error("Error de autenticaci\xF3n:",e),e.code){case"auth/email-already-in-use":this.errorMessage="El email ya est\xE1 en uso. Intenta iniciar sesi\xF3n.";break;case"auth/invalid-email":this.errorMessage="El formato del email no es v\xE1lido.";break;case"auth/weak-password":this.errorMessage="La contrase\xF1a debe tener al menos 6 caracteres.";break;case"auth/user-not-found":case"auth/wrong-password":this.errorMessage="Email o contrase\xF1a incorrectos.";break;case"auth/too-many-requests":this.errorMessage="Demasiados intentos fallidos. Intenta de nuevo m\xE1s tarde.";break;default:this.errorMessage="Ocurri\xF3 un error. Por favor, int\xE9ntalo de nuevo.";break}}finally{this.loading=!1}})}onClose(){this.close.emit()}static \u0275fac=function(n){return new(n||t)(R(Vt))};static \u0275cmp=wt({type:t,selectors:[["app-login-register-modal"]],outputs:{close:"close",loggedIn:"loggedIn"},decls:23,vars:8,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-button",3,"click"],[1,"modal-title"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","autocomplete","email","placeholder","tu@email.com",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[1,"toggle-mode-section"],[1,"toggle-link",3,"click"],[1,"error-message"]],template:function(n,r){n&1&&(w(0,"div",0),se("click",function(){return r.onClose()}),w(1,"div",1),se("click",function(o){return o.stopPropagation()}),w(2,"button",2),se("click",function(){return r.onClose()}),M(3,"\xD7"),b(),w(4,"h2",3),M(5),b(),w(6,"form",4),se("ngSubmit",function(){return r.onSubmit()}),w(7,"div",5)(8,"label",6),M(9,"Email"),b(),w(10,"input",7),Ta("ngModelChange",function(o){return td(r.email,o)||(r.email=o),o}),b()(),w(11,"div",5)(12,"label",8),M(13,"Contrase\xF1a"),b(),w(14,"input",9),Ta("ngModelChange",function(o){return td(r.password,o)||(r.password=o),o}),b()(),Zu(15,YH,2,1,"p",10),w(16,"button",11),M(17),b()(),w(18,"div",12)(19,"p"),M(20),w(21,"a",13),se("click",function(){return r.toggleMode()}),M(22),b()()()()()),n&2&&(O(5),rt(" ",r.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),O(5),Da("ngModel",r.email),O(4),Da("ngModel",r.password),O(),Pt("ngIf",r.errorMessage),O(),Pt("disabled",r.loading),O(),rt(" ",r.loading?"Cargando...":r.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),O(3),rt(" ",r.isLoginMode?"\xBFNo tienes una cuenta?":"\xBFYa tienes una cuenta?"," "),O(2),rt(" ",r.isLoginMode?"Reg\xEDstrate aqu\xED":"Inicia sesi\xF3n aqu\xED"," "))},dependencies:[Ft,Mm,hM,fM,_h,oM,sM,fE,dE,uE],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background-color:#2d3748;color:#e2e8f0;padding:2.5rem;border-radius:.75rem;box-shadow:0 10px 25px #00000080;position:relative;width:90%;max-width:450px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.8rem;color:#a0aec0;cursor:pointer;transition:color .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#fff}.modal-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-align:center;margin-bottom:2rem;color:#f6e05e}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;margin-bottom:.5rem;color:#a0aec0}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #4a5568;border-radius:.5rem;background-color:#1a202c;color:#e2e8f0;font-size:1rem;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f6e05e;box-shadow:0 0 0 3px #f6e05e4d}.error-message[_ngcontent-%COMP%]{color:#fc8181;font-size:.875rem;margin-top:1rem;text-align:center}.submit-button[_ngcontent-%COMP%]{width:100%;background-color:#c53030;color:#fff;padding:.85rem 1.5rem;border:none;border-radius:.5rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;margin-top:1.5rem}.submit-button[_ngcontent-%COMP%]:hover{background-color:#a02020;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.toggle-mode-section[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.9rem;color:#a0aec0}.toggle-link[_ngcontent-%COMP%]{color:#f6e05e;cursor:pointer;text-decoration:underline;margin-left:.25rem}.toggle-link[_ngcontent-%COMP%]:hover{color:#ecc94b}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};function KH(t,e){if(t&1){let n=Ot();w(0,"span",9),M(1),b(),w(2,"a",10),Ke(3,"i",11),b(),w(4,"button",12),se("click",function(){We(n);let i=ue();return Ge(i.logout())}),M(5,"Cerrar Sesi\xF3n"),b()}t&2&&(O(),xe(e.email))}function QH(t,e){if(t&1){let n=Ot();w(0,"button",13),se("click",function(){We(n);let i=ue();return Ge(i.openLoginModal())}),M(1,"Iniciar Sesi\xF3n / Registrarse"),b()}}function ZH(t,e){if(t&1){let n=Ot();w(0,"app-login-register-modal",14),se("close",function(){We(n);let i=ue();return Ge(i.closeLoginModal())})("loggedIn",function(){We(n);let i=ue();return Ge(i.closeLoginModal())}),b()}}var Ih=class t{constructor(e){this.authService=e;this.currentUser$=this.authService.user$}title="pizza-reservation-app";showLoginModal=!1;currentUser$;ngOnInit(){}openLoginModal(){this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}logout(){return p(this,null,function*(){try{yield this.authService.logout(),console.log("Sesi\xF3n cerrada exitosamente")}catch(e){console.error("Error al cerrar sesi\xF3n:",e),alert("Error al cerrar sesi\xF3n. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(n){return new(n||t)(R(Vt))};static \u0275cmp=wt({type:t,selectors:[["app-root"]],decls:17,vars:4,consts:[[1,"app-header"],[1,"header-content"],[1,"app-title"],[1,"main-nav"],["routerLink","/",1,"nav-link"],[1,"auth-section"],[1,"login-button"],[1,"app-main-content"],[1,"app-footer"],[1,"user-email"],["routerLink","/cart",1,"cart-icon-link"],[1,"fas","fa-shopping-cart"],[1,"logout-button",3,"click"],[1,"login-button",3,"click"],[3,"close","loggedIn"]],template:function(n,r){if(n&1&&(w(0,"header",0)(1,"div",1)(2,"h1",2),M(3,"\u{1F355} Men\xFA Piedraviva"),b(),w(4,"nav",3)(5,"a",4),M(6,"Inicio"),b()(),w(7,"div",5),qe(8,KH,6,1),$e(9,"async"),qt(10,QH,2,0,"button",6),b()()(),w(11,"main",7),Ke(12,"router-outlet"),b(),qe(13,ZH,1,0,"app-login-register-modal"),w(14,"footer",8)(15,"p"),M(16,"\xA9 2025 Men\xFA Piedraviva. Todos los derechos reservados."),b()()),n&2){let i;O(8),Ye((i=En(9,2,r.currentUser$))?8:10,i),O(5),Ye(r.showLoginModal?13:-1)}},dependencies:[Ft,oc,Sn,Ch,er],styles:[".app-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a;font-family:sans-serif}.header-content[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.app-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0;flex-shrink:0}.main-nav[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;transition:color .2s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#fbd38d}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-email[_ngcontent-%COMP%]{font-weight:600;color:#f6e05e}.cart-icon-link[_ngcontent-%COMP%]{color:#fff;font-size:2rem;transition:color .2s ease,transform .2s ease;padding:.5rem;border-radius:.25rem}.cart-icon-link[_ngcontent-%COMP%]:hover{color:#fbd38d;transform:scale(1.1)}.login-button[_ngcontent-%COMP%], .logout-button[_ngcontent-%COMP%]{background-color:#f6e05e;color:#1a202c;padding:.75rem 1.25rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a}.login-button[_ngcontent-%COMP%]:hover, .logout-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateY(-1px)}.login-button[_ngcontent-%COMP%]:active, .logout-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #0000001a}.app-main-content[_ngcontent-%COMP%]{flex-grow:1}.app-footer[_ngcontent-%COMP%]{background-color:#1a202c;color:#a0aec0;text-align:center;padding:1.5rem 2rem;font-size:.9rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.main-nav[_ngcontent-%COMP%], .auth-section[_ngcontent-%COMP%]{width:100%;justify-content:center;margin-top:1rem}.app-title[_ngcontent-%COMP%]{text-align:center;width:100%}}"]})};Um(Ih,$A).catch(t=>console.error(t));
