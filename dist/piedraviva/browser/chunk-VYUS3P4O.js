import{a as J}from"./chunk-DUTCJ627.js";import{h as Z}from"./chunk-2XRK2AG4.js";import{o as V,u as Y}from"./chunk-XFMXKC7R.js";import{c as B,e as $,f as q,o as j}from"./chunk-ECQRDTG2.js";import{$a as h,Ca as f,D as F,Ga as k,N as O,Va as g,Wa as S,Xa as _,Ya as E,Za as b,_a as C,a as y,aa as p,ab as o,b as P,ba as m,bb as i,cb as I,d as w,fb as A,jb as u,kb as s,lb as Q,nb as d,ob as v,pb as x,s as U,vb as T,w as M,wb as z,xa as c,xb as D,zb as L}from"./chunk-G5SB7B44.js";var H=n=>["/product",n],K=(n,t)=>t.id;function G(n,t){n&1&&(o(0,"div",4)(1,"p"),d(2,"Cargando el men\xFA de productos..."),i()())}function W(n,t){if(n&1&&(o(0,"div",4)(1,"p"),d(2),i()()),n&2){let e=s(2);c(2),v(e.errorMessage)}}function X(n,t){if(n&1&&(o(0,"span",22),d(1),i()),n&2){let e=t.$implicit;c(),x(" ",e," ")}}function tt(n,t){if(n&1&&(o(0,"div",15),b(1,X,2,1,"span",22,E),i()),n&2){let e=s().$implicit;c(),C(e.sabores)}}function et(n,t){if(n&1){let e=A();o(0,"div",7)(1,"a",8),I(2,"div",9),o(3,"div",10)(4,"h2",11),d(5),i(),o(6,"p",12),d(7),i(),o(8,"div",13)(9,"span",14),d(10),z(11,"currency"),i(),g(12,tt,3,0,"div",15),i()()(),o(13,"div",16)(14,"div",17)(15,"button",18),u("click",function(){let r=p(e).$implicit,l=s(3);return m(l.decrementQuantity(r))}),d(16,"-"),i(),o(17,"input",19),u("input",function(r){let l=p(e).$implicit,R=s(3);return m(R.onQuantityInputChange(l,r))}),i(),o(18,"button",20),u("click",function(){let r=p(e).$implicit,l=s(3);return m(l.incrementQuantity(r))}),d(19,"+"),i()(),o(20,"button",21),u("click",function(){let r=p(e).$implicit,l=s(3);return m(l.addToCart(r,r.selectedQuantity||0))}),d(21,"Agregar al Carrito"),i()()()}if(n&2){let e=t.$implicit,a=s(3);c(),h("routerLink",T(13,H,e.id)),c(),Q("background-image","url("+(e.imagenUrl||"https://placehold.co/600x400/FF5733/FFFFFF?text="+a.encodeURIComponent(e.nombre||"Producto"))+")"),c(3),v(e.nombre),c(2),x(" ",e.descripcion," "),c(3),x(" ",L(11,8,e.precio,"UYU","$","1.2-2")," "),c(2),_(a.isPizza(e)&&e.sabores.length?12:-1),c(5),h("value",e.selectedQuantity||0)}}function nt(n,t){if(n&1&&(o(0,"div",5),b(1,et,22,15,"div",7,K),i()),n&2){let e=s();c(),C(e)}}function it(n,t){n&1&&(o(0,"div",6)(1,"p"),d(2,"Lo sentimos, no hay productos disponibles en este momento."),i()())}function ot(n,t){if(n&1&&(o(0,"div",3),g(1,G,3,0,"div",4)(2,W,3,1,"div",4)(3,nt,3,0,"div",5)(4,it,3,0,"div",6),i()),n&2){let e=s();c(),_(e.loading?1:e.errorMessage?2:t.length>0?3:4)}}function rt(n,t){n&1&&(o(0,"div",4)(1,"p"),d(2,"Cargando el men\xFA de productos..."),i()())}var N=class n{constructor(t,e,a){this.productService=t;this.authService=e;this.cartService=a}products$;userSubscription;userId=null;loading=!0;errorMessage=null;ngOnInit(){this.products$=this.authService.user$.pipe(O(t=>(this.userId=t?t.uid:null,console.log("User ID en ProductList:",this.userId),this.loading=!0,this.productService.getProducts())),M(t=>(console.log("Datos de productos recibidos:",t),this.loading=!1,t.map(e=>P(y({},e),{selectedQuantity:0})))),F(t=>(console.error("Error al cargar los productos:",t),this.loading=!1,this.errorMessage="No se pudieron cargar los productos. Por favor, intenta de nuevo m\xE1s tarde.",U([])))),this.userSubscription=this.products$.subscribe()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}incrementQuantity(t){t.selectedQuantity===void 0&&(t.selectedQuantity=0),t.selectedQuantity++}decrementQuantity(t){t.selectedQuantity===void 0&&(t.selectedQuantity=0),t.selectedQuantity>0&&t.selectedQuantity--}onQuantityInputChange(t,e){let a=e.target,r=parseInt(a.value,10);!isNaN(r)&&r>=0?t.selectedQuantity=r:(t.selectedQuantity=0,a.value="0")}addToCart(t,e){return w(this,null,function*(){if(!this.userId){alert("Debes iniciar sesi\xF3n para a\xF1adir productos al carrito.");return}if(e<=0){alert("Por favor, selecciona una cantidad mayor que 0 para a\xF1adir al carrito.");return}try{yield this.cartService.addItemToCart(this.userId,t,e),alert(`"${t.nombre}" x${e} a\xF1adido(s) al carrito.`),t.selectedQuantity=0}catch(a){console.error("Error al a\xF1adir al carrito:",a),alert("Ocurri\xF3 un error al a\xF1adir al carrito. Por favor, int\xE9ntalo de nuevo.")}})}encodeURIComponent(t){return encodeURIComponent(t)}isPizza(t){return t.tipo==="pizza"||t.sabores!==void 0}static \u0275fac=function(e){return new(e||n)(f(J),f(V),f(Y))};static \u0275cmp=k({type:n,selectors:[["app-product-list"]],decls:7,vars:3,consts:[[1,"main-container"],[1,"content-wrapper"],[1,"menu-header"],[1,"pizza-grid-container","relative"],[1,"loading-message"],[1,"pizza-grid"],[1,"no-pizzas-message"],[1,"pizza-card-3d"],[1,"pizza-card-link-content",3,"routerLink"],[1,"pizza-image"],[1,"pizza-details"],[1,"pizza-name"],[1,"pizza-description"],[1,"pizza-footer"],[1,"pizza-price"],[1,"pizza-flavors"],[1,"add-to-cart-section"],[1,"quantity-controls"],[1,"quantity-button","minus-button",3,"click"],["type","number","min","0",1,"quantity-input",3,"input","value"],[1,"quantity-button","plus-button",3,"click"],[1,"add-to-cart-button",3,"click"],[1,"pizza-flavor-tag"]],template:function(e,a){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"header",2),d(3," Menu Piedraviva "),i(),g(4,ot,5,1,"div",3),z(5,"async"),S(6,rt,3,0,"div",4),i()()),e&2){let r;c(4),_((r=D(5,1,a.products$))?4:6,r)}},dependencies:[q,j,Z,B,$],styles:['@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6K6MmTpA.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6D6MmTpA.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6I6MmTpA.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6J6MmTpA.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Pacifico;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6H6Mk.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#ece9cd;color:#e2e8f0;padding:2rem;font-family:sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;flex-direction:column;align-items:center}.content-wrapper[_ngcontent-%COMP%]{max-width:1280px;width:100%;margin:0 auto;background-color:#2d3748;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;overflow:hidden}.menu-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1.5rem;text-align:center;font-size:3.5rem;font-weight:400;letter-spacing:.05em;text-transform:none;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;margin-bottom:2rem;font-family:Pacifico,cursive;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.pizza-grid-container[_ngcontent-%COMP%]{perspective:1500px;padding:2rem}.pizza-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem;justify-items:center}.pizza-card-3d[_ngcontent-%COMP%]{position:relative;transform-style:preserve-3d;transition:transform .5s cubic-bezier(.25,.8,.25,1),box-shadow .5s ease;border:2px solid #4a5568;box-shadow:0 10px 20px #0000004d;display:flex;flex-direction:column;background-color:#2d3748;border-radius:.75rem;overflow:hidden;width:100%;max-width:320px;padding-bottom:11rem}.pizza-card-3d[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 20px 40px #0009;z-index:10}.pizza-card-link-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit;padding-bottom:1rem}.pizza-image[_ngcontent-%COMP%]{border-top-left-radius:.75rem;border-top-right-radius:.75rem;background-size:cover;background-position:center;display:block;min-height:192px;width:100%}.pizza-details[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.5rem;line-height:1.2}.pizza-description[_ngcontent-%COMP%]{color:#a0aec0;margin-bottom:1rem;font-size:.875rem;flex-grow:1;height:4rem;overflow:hidden}.pizza-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:1rem;border-top:1px solid #4a5568}.pizza-price[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:800;color:#f6e05e}.pizza-flavors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:flex-end}.pizza-flavor-tag[_ngcontent-%COMP%]{background-color:#e53e3e;color:#fff;font-size:.75rem;font-weight:600;padding:.25rem .5rem;border-radius:9999px;box-shadow:0 1px 2px #0000000d;white-space:nowrap}.add-to-cart-section[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;display:flex;flex-direction:column;align-items:center;padding:.75rem 1.5rem;background-color:#2d3748;border-top:1px solid #4a5568;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;box-shadow:0 -2px 10px #0003;transform:translateZ(1px);gap:.75rem;box-sizing:border-box}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem;width:100%;justify-content:center}.quantity-button[_ngcontent-%COMP%]{background-color:#4a5568;color:#fff;border:1px solid #4a5568;width:35px;height:35px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:background-color .2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0}.quantity-button.minus-button[_ngcontent-%COMP%]{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.quantity-button.plus-button[_ngcontent-%COMP%]{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.quantity-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:1px solid #4a5568;border-radius:0;background-color:#1a202c;color:#e2e8f0;font-size:1rem;text-align:center;appearance:textfield;-moz-appearance:textfield;box-sizing:border-box}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.add-to-cart-button[_ngcontent-%COMP%]{width:100%;background-color:#f6e05e;color:#1a202c;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1.125rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a;box-sizing:border-box}.add-to-cart-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateZ(5px)}.add-to-cart-button[_ngcontent-%COMP%]:active{transform:translateZ(0) scale(.98)}.loading-message[_ngcontent-%COMP%], .no-pizzas-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:50vh;background-color:#2d3748;color:#a0aec0;font-size:1.25rem}@media (max-width: 768px){.menu-header[_ngcontent-%COMP%]{font-size:2.8rem}.pizza-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.pizza-card-3d[_ngcontent-%COMP%]{margin:0 auto;max-width:350px}.add-to-cart-section[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.quantity-button[_ngcontent-%COMP%], .quantity-input[_ngcontent-%COMP%]{flex-shrink:0}.add-to-cart-button[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0}}@media (max-width: 480px){.menu-header[_ngcontent-%COMP%]{font-size:2.2rem}.content-wrapper[_ngcontent-%COMP%], .pizza-details[_ngcontent-%COMP%]{padding:1rem}.pizza-name[_ngcontent-%COMP%]{font-size:1.5rem}.pizza-price[_ngcontent-%COMP%]{font-size:1.2rem}.add-to-cart-button[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem 1rem}}']})};export{N as ProductListComponent};
