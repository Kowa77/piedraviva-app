import{a as _e,b as ve,c as Me,d as Pe,e as Se,f as xe,g as ye,h as Ae}from"./chunk-2XRK2AG4.js";import{a as ie,b as ae,c as se,d as le,e as ce,f as me,g as de,h as ue,i as pe,j as ge,k as fe,l as he,m as be,n as Ce,o as u,t as Oe,u as we}from"./chunk-XFMXKC7R.js";import{b as G,c as X,f as x,g as Q,h as Z,j as ee,m as te,n as oe,o as ne,p as re}from"./chunk-ECQRDTG2.js";import{$a as k,Bb as K,Ca as _,G as V,Ga as v,La as W,Na as I,Oa as Y,S as B,V as j,Va as E,W as w,Wa as H,Xa as D,Y as U,aa as p,ab as r,ba as g,bb as a,ca as z,cb as M,d as C,fb as P,jb as c,ka as f,kb as d,nb as s,ob as S,pb as h,qb as L,rb as $,sb as R,w as N,wb as J,xa as l,xb as q}from"./chunk-G5SB7B44.js";var y=class e{constructor(n,t){this.authService=n;this.router=t}canActivate(n,t){return this.authService.user$.pipe(V(1),N(o=>o?!0:(alert("Necesitas iniciar sesi\xF3n para acceder a esta p\xE1gina."),this.router.createUrlTree(["/"]))))}static \u0275fac=function(t){return new(t||e)(w(u),w(oe))};static \u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})};var De=[{path:"",loadComponent:()=>import("./chunk-VYUS3P4O.js").then(e=>e.ProductListComponent),title:"Men\xFA Principal"},{path:"product/:id",loadComponent:()=>import("./chunk-AIJL7A7T.js").then(e=>e.ProductDetailComponent),title:"Detalle del Producto"},{path:"cart",loadComponent:()=>import("./chunk-LJQEYWHT.js").then(e=>e.ShoppingCartComponent),title:"Tu Carrito"},{path:"purchase-history",loadComponent:()=>import("./chunk-KFNBAZVT.js").then(e=>e.PurchaseHistoryComponent),canActivate:[y],title:"Historial de Compras"},{path:"purchase-success",loadComponent:()=>import("./chunk-SVVCZOTS.js").then(e=>e.PurchaseSuccessComponent),title:"Pago Exitoso"},{path:"purchase-failure",loadComponent:()=>import("./chunk-BEDR4E2H.js").then(e=>e.PurchaseFailureComponent),title:"Pago Fallido"},{path:"purchase-pending",loadComponent:()=>import("./chunk-CANCFNJI.js").then(e=>e.PurchasePendingComponent),title:"Pago Pendiente"},{path:"**",redirectTo:""}];var b=class{constructor(n){return n}},ke="database",T=class{constructor(){return le(ke)}};var F=new j("angularfire2.database-instances");function Ne(e,n){let t=se(ke,e,n);return t&&new b(t)}function Ve(e){return(n,t)=>{let o=n.runOutsideAngular(()=>e(t));return new b(o)}}var Be={provide:T,deps:[[new f,F]]},je={provide:b,useFactory:Ne,deps:[[new f,F],de]};function Le(e,...n){return ie("angularfire",ae.full,"rtdb"),U([je,Be,{provide:F,useFactory:Ve(e),multi:!0,deps:[Y,z,ce,ue,[new f,he],[new f,fe],...n]}])}var $e=me(Oe,!0);var Re={production:!1,firebaseConfig:{apiKey:"AIzaSyBwe-SvSjOdCdBfKG_Nv8hjJ4IE8Q-vS1g",authDomain:"piedraviva-20327.firebaseapp.com",projectId:"piedraviva-20327",storageBucket:"piedraviva-20327.firebasestorage.app",messagingSenderId:"895243777977",appId:"1:895243777977:web:8dff1a8e88b23df2c82868",measurementId:"G-HLK1QHRRQ8"}};function Ue(e){let n=e,t=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:i===0&&t!==0&&t%1e6===0&&o===0||!(i>=0&&i<=5)?4:5}var Te=["es-UY",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["d","l","m","m","j","v","s"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Set.","Oct.","Nov.","Dic."],["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]],[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}","{1} {0}","{1}, {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","\xA4\xA0#,##0.00","#E0"],"UYU","$","peso uruguayo",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:["US$","$"],UYU:["$"],UYW:["UP"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",Ue];Q(Te);var Fe={providers:[re(De),ee(),pe(()=>ge(Re.firebaseConfig)),Le(()=>$e()),be(()=>Ce()),we,{provide:K,useValue:"es-UY"}]};function Ye(e,n){if(e&1&&(r(0,"p",14),s(1),a()),e&2){let t=d();l(),S(t.errorMessage)}}var A=class e{constructor(n){this.authService=n}close=new I;loggedIn=new I;isLoginMode=!0;email="";password="";errorMessage=null;loading=!1;toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=null}onSubmit(){return C(this,null,function*(){this.errorMessage=null,this.loading=!0;try{this.isLoginMode?(yield this.authService.login(this.email,this.password),console.log("Inicio de sesi\xF3n exitoso")):(yield this.authService.register(this.email,this.password),console.log("Registro exitoso")),this.loggedIn.emit(),this.close.emit()}catch(n){switch(console.error("Error de autenticaci\xF3n:",n),n.code){case"auth/email-already-in-use":this.errorMessage="El email ya est\xE1 en uso. Intenta iniciar sesi\xF3n.";break;case"auth/invalid-email":this.errorMessage="El formato del email no es v\xE1lido.";break;case"auth/weak-password":this.errorMessage="La contrase\xF1a debe tener al menos 6 caracteres.";break;case"auth/user-not-found":case"auth/wrong-password":this.errorMessage="Email o contrase\xF1a incorrectos.";break;case"auth/too-many-requests":this.errorMessage="Demasiados intentos fallidos. Intenta de nuevo m\xE1s tarde.";break;default:this.errorMessage="Ocurri\xF3 un error. Por favor, int\xE9ntalo de nuevo.";break}}finally{this.loading=!1}})}onClose(){this.close.emit()}static \u0275fac=function(t){return new(t||e)(_(u))};static \u0275cmp=v({type:e,selectors:[["app-login-register-modal"]],outputs:{close:"close",loggedIn:"loggedIn"},decls:23,vars:8,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-button",3,"click"],[1,"modal-title"],[1,"auth-form",3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","autocomplete","email","placeholder","tu@email.com",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[1,"toggle-mode-section"],[1,"toggle-link",3,"click"],[1,"error-message"]],template:function(t,o){t&1&&(r(0,"div",0),c("click",function(){return o.onClose()}),r(1,"div",1),c("click",function(m){return m.stopPropagation()}),r(2,"button",2),c("click",function(){return o.onClose()}),s(3,"\xD7"),a(),r(4,"h2",3),s(5),a(),r(6,"form",4),c("ngSubmit",function(){return o.onSubmit()}),r(7,"div",5)(8,"label",6),s(9,"Email"),a(),r(10,"input",7),R("ngModelChange",function(m){return $(o.email,m)||(o.email=m),m}),a()(),r(11,"div",5)(12,"label",8),s(13,"Contrase\xF1a"),a(),r(14,"input",9),R("ngModelChange",function(m){return $(o.password,m)||(o.password=m),m}),a()(),W(15,Ye,2,1,"p",10),r(16,"button",11),s(17),a()(),r(18,"div",12)(19,"p"),s(20),r(21,"a",13),c("click",function(){return o.toggleMode()}),s(22),a()()()()()),t&2&&(l(5),h(" ",o.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),l(5),L("ngModel",o.email),l(4),L("ngModel",o.password),l(),k("ngIf",o.errorMessage),l(),k("disabled",o.loading),l(),h(" ",o.loading?"Cargando...":o.isLoginMode?"Iniciar Sesi\xF3n":"Registrarse"," "),l(3),h(" ",o.isLoginMode?"\xBFNo tienes una cuenta?":"\xBFYa tienes una cuenta?"," "),l(2),h(" ",o.isLoginMode?"Reg\xEDstrate aqu\xED":"Inicia sesi\xF3n aqu\xED"," "))},dependencies:[x,G,Ae,xe,_e,ve,Me,ye,Se,Pe],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background-color:#2d3748;color:#e2e8f0;padding:2.5rem;border-radius:.75rem;box-shadow:0 10px 25px #00000080;position:relative;width:90%;max-width:450px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.8rem;color:#a0aec0;cursor:pointer;transition:color .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#fff}.modal-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-align:center;margin-bottom:2rem;color:#f6e05e}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.auth-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;margin-bottom:.5rem;color:#a0aec0}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #4a5568;border-radius:.5rem;background-color:#1a202c;color:#e2e8f0;font-size:1rem;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.auth-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f6e05e;box-shadow:0 0 0 3px #f6e05e4d}.error-message[_ngcontent-%COMP%]{color:#fc8181;font-size:.875rem;margin-top:1rem;text-align:center}.submit-button[_ngcontent-%COMP%]{width:100%;background-color:#c53030;color:#fff;padding:.85rem 1.5rem;border:none;border-radius:.5rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;margin-top:1.5rem}.submit-button[_ngcontent-%COMP%]:hover{background-color:#a02020;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.toggle-mode-section[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.9rem;color:#a0aec0}.toggle-link[_ngcontent-%COMP%]{color:#f6e05e;cursor:pointer;text-decoration:underline;margin-left:.25rem}.toggle-link[_ngcontent-%COMP%]:hover{color:#ecc94b}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};function He(e,n){if(e&1){let t=P();r(0,"span",10),s(1),a(),r(2,"a",11),M(3,"i",12),a(),r(4,"button",13),c("click",function(){p(t);let i=d();return g(i.logout())}),s(5,"Cerrar Sesi\xF3n"),a()}e&2&&(l(),S(n.email))}function Je(e,n){if(e&1){let t=P();r(0,"button",14),c("click",function(){p(t);let i=d();return g(i.openLoginModal())}),s(1,"Iniciar Sesi\xF3n / Registrarse"),a()}}function qe(e,n){if(e&1){let t=P();r(0,"app-login-register-modal",15),c("close",function(){p(t);let i=d();return g(i.closeLoginModal())})("loggedIn",function(){p(t);let i=d();return g(i.closeLoginModal())}),a()}}var O=class e{constructor(n){this.authService=n;this.currentUser$=this.authService.user$}title="pizza-reservation-app";showLoginModal=!1;currentUser$;ngOnInit(){}openLoginModal(){this.showLoginModal=!0}closeLoginModal(){this.showLoginModal=!1}logout(){return C(this,null,function*(){try{yield this.authService.logout(),console.log("Sesi\xF3n cerrada exitosamente")}catch(n){console.error("Error al cerrar sesi\xF3n:",n),alert("Error al cerrar sesi\xF3n. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(t){return new(t||e)(_(u))};static \u0275cmp=v({type:e,selectors:[["app-root"]],decls:18,vars:4,consts:[[1,"app-header"],[1,"header-content"],[1,"app-title"],[1,"main-nav"],["routerLink","/",1,"nav-link"],[1,"auth-section"],[1,"login-button"],["src","piedraviva.png","alt","Logo de la Empresa",1,"header-logo-fixed"],[1,"app-main-content"],[1,"app-footer"],[1,"user-email"],["routerLink","/cart",1,"cart-icon-link"],[1,"fas","fa-shopping-cart"],[1,"logout-button",3,"click"],[1,"login-button",3,"click"],[3,"close","loggedIn"]],template:function(t,o){if(t&1&&(r(0,"header",0)(1,"div",1)(2,"h1",2),s(3," \u{1F355} Men\xFA Piedraviva "),a(),r(4,"nav",3)(5,"a",4),s(6,"Inicio"),a()(),r(7,"div",5),E(8,He,6,1),J(9,"async"),H(10,Je,2,0,"button",6),a()()(),M(11,"img",7),r(12,"main",8),M(13,"router-outlet"),a(),E(14,qe,1,0,"app-login-register-modal"),r(15,"footer",9)(16,"p"),s(17,"\xA9 2025 Men\xFA Piedraviva. Todos los derechos reservados."),a()()),t&2){let i;l(8),D((i=q(9,2,o.currentUser$))?8:10,i),l(6),D(o.showLoginModal?14:-1)}},dependencies:[x,te,ne,A,X],styles:[".app-header[_ngcontent-%COMP%]{background-color:#c53030;color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a;font-family:sans-serif;position:relative;z-index:999}.header-content[_ngcontent-%COMP%]{max-width:1280px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.app-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0;flex-shrink:0}.header-logo-fixed[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;height:200px;width:auto;z-index:1000;border-radius:50%;box-shadow:0 4px 8px #0000004d;transition:transform .2s ease-in-out}.header-logo-fixed[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.main-nav[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;transition:color .2s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#fbd38d}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-email[_ngcontent-%COMP%]{font-weight:600;color:#f6e05e}.cart-icon-link[_ngcontent-%COMP%]{color:#fff;font-size:2rem;transition:color .2s ease,transform .2s ease;padding:.5rem;border-radius:.25rem}.cart-icon-link[_ngcontent-%COMP%]:hover{color:#fbd38d;transform:scale(1.1)}.login-button[_ngcontent-%COMP%], .logout-button[_ngcontent-%COMP%]{background-color:#f6e05e;color:#1a202c;padding:.75rem 1.25rem;border:none;border-radius:.5rem;font-size:.9rem;font-weight:700;cursor:pointer;transition:background-color .3s ease,transform .1s ease;box-shadow:0 2px 4px #0000001a}.login-button[_ngcontent-%COMP%]:hover, .logout-button[_ngcontent-%COMP%]:hover{background-color:#ecc94b;transform:translateY(-1px)}.login-button[_ngcontent-%COMP%]:active, .logout-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 2px #0000001a}.app-main-content[_ngcontent-%COMP%]{flex-grow:1;padding-top:80px}.app-footer[_ngcontent-%COMP%]{background-color:#1a202c;color:#a0aec0;text-align:center;padding:1.5rem 2rem;font-size:.9rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.main-nav[_ngcontent-%COMP%], .auth-section[_ngcontent-%COMP%]{width:100%;justify-content:center;margin-top:1rem}.app-title[_ngcontent-%COMP%]{text-align:center;width:100%}.header-logo-fixed[_ngcontent-%COMP%]{height:50px;top:10px;left:10px}.app-main-content[_ngcontent-%COMP%]{padding-top:100px}}"]})};Z(O,Fe).catch(e=>console.error(e));
